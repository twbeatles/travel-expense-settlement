var Ng=Object.defineProperty;var Sg=(i,o,d)=>o in i?Ng(i,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):i[o]=d;var pf=(i,o,d)=>Sg(i,typeof o!="symbol"?o+"":o,d);import{j as l}from"./query-DSssunvb.js";import{r as m}from"./state-CaaGWC4P.js";import{r as Cg,a as Eg}from"./react-qkC6yhPU.js";import{i as Dg,g as Tg,a as Mg,b as Ag,G as wg,o as Og,s as zg,c as _g,d as Ye,e as wc,f as _c,h as $a,j as Pt,k as ls,q as Rc,l as cu,u as jt,m as ns,w as Rg,n as Bg,p as Oc,r as kg,t as Ug,v as Hg}from"./firebase-BLlXytI7.js";import{_ as gf,E as Bc,h as iu}from"./export-tkypTl9r.js";import{C as Uf,A as Hf,a as Lf,L as qf,B as Yf,p as Gf,b as Qf,c as Xf,P as xf,d as Kf,e as Lg,f as qg,i as Yg,g as Gg,D as Qg}from"./charts-N-NnyrSF.js";import{Q as Xg}from"./ui-BZrhb3E4.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))u(p);new MutationObserver(p=>{for(const x of p)if(x.type==="childList")for(const S of x.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&u(S)}).observe(document,{childList:!0,subtree:!0});function d(p){const x={};return p.integrity&&(x.integrity=p.integrity),p.referrerPolicy&&(x.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?x.credentials="include":p.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function u(p){if(p.ep)return;p.ep=!0;const x=d(p);fetch(p.href,x)}})();var eu={exports:{}},ts={},tu={exports:{}},au={};var yf;function Kg(){return yf||(yf=1,(function(i){function o(H,z){var $=H.length;H.push(z);e:for(;0<$;){var te=$-1>>>1,ge=H[te];if(0<p(ge,z))H[te]=z,H[$]=ge,$=te;else break e}}function d(H){return H.length===0?null:H[0]}function u(H){if(H.length===0)return null;var z=H[0],$=H.pop();if($!==z){H[0]=$;e:for(var te=0,ge=H.length,Me=ge>>>1;te<Me;){var de=2*(te+1)-1,K=H[de],M=de+1,q=H[M];if(0>p(K,$))M<ge&&0>p(q,K)?(H[te]=q,H[M]=$,te=M):(H[te]=K,H[de]=$,te=de);else if(M<ge&&0>p(q,$))H[te]=q,H[M]=$,te=M;else break e}}return z}function p(H,z){var $=H.sortIndex-z.sortIndex;return $!==0?$:H.id-z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var x=performance;i.unstable_now=function(){return x.now()}}else{var S=Date,h=S.now();i.unstable_now=function(){return S.now()-h}}var N=[],C=[],w=1,j=null,b=3,v=!1,T=!1,g=!1,y=!1,A=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function _(H){for(var z=d(C);z!==null;){if(z.callback===null)u(C);else if(z.startTime<=H)u(C),z.sortIndex=z.expirationTime,o(N,z);else break;z=d(C)}}function G(H){if(g=!1,_(H),!T)if(d(N)!==null)T=!0,ee||(ee=!0,ne());else{var z=d(C);z!==null&&Z(G,z.startTime-H)}}var ee=!1,P=-1,X=5,ae=-1;function I(){return y?!0:!(i.unstable_now()-ae<X)}function ie(){if(y=!1,ee){var H=i.unstable_now();ae=H;var z=!0;try{e:{T=!1,g&&(g=!1,R(P),P=-1),v=!0;var $=b;try{t:{for(_(H),j=d(N);j!==null&&!(j.expirationTime>H&&I());){var te=j.callback;if(typeof te=="function"){j.callback=null,b=j.priorityLevel;var ge=te(j.expirationTime<=H);if(H=i.unstable_now(),typeof ge=="function"){j.callback=ge,_(H),z=!0;break t}j===d(N)&&u(N),_(H)}else u(N);j=d(N)}if(j!==null)z=!0;else{var Me=d(C);Me!==null&&Z(G,Me.startTime-H),z=!1}}break e}finally{j=null,b=$,v=!1}z=void 0}}finally{z?ne():ee=!1}}}var ne;if(typeof E=="function")ne=function(){E(ie)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,Ne=je.port2;je.port1.onmessage=ie,ne=function(){Ne.postMessage(null)}}else ne=function(){A(ie,0)};function Z(H,z){P=A(function(){H(i.unstable_now())},z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(H){switch(b){case 1:case 2:case 3:var z=3;break;default:z=b}var $=b;b=z;try{return H()}finally{b=$}},i.unstable_requestPaint=function(){y=!0},i.unstable_runWithPriority=function(H,z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var $=b;b=H;try{return z()}finally{b=$}},i.unstable_scheduleCallback=function(H,z,$){var te=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?te+$:te):$=te,H){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=$+ge,H={id:w++,callback:z,priorityLevel:H,startTime:$,expirationTime:ge,sortIndex:-1},$>te?(H.sortIndex=$,o(C,H),d(N)===null&&H===d(C)&&(g?(R(P),P=-1):g=!0,Z(G,$-te))):(H.sortIndex=ge,o(N,H),T||v||(T=!0,ee||(ee=!0,ne()))),H},i.unstable_shouldYield=I,i.unstable_wrapCallback=function(H){var z=b;return function(){var $=b;b=z;try{return H.apply(this,arguments)}finally{b=$}}}})(au)),au}var vf;function Vg(){return vf||(vf=1,tu.exports=Kg()),tu.exports}var bf;function Zg(){if(bf)return ts;bf=1;var i=Vg(),o=Cg(),d=Eg();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function x(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function S(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function N(e){if(x(e)!==e)throw Error(u(188))}function C(e){var t=e.alternate;if(!t){if(t=x(e),t===null)throw Error(u(188));return t!==e?null:e}for(var a=e,n=t;;){var s=a.return;if(s===null)break;var c=s.alternate;if(c===null){if(n=s.return,n!==null){a=n;continue}break}if(s.child===c.child){for(c=s.child;c;){if(c===a)return N(s),e;if(c===n)return N(s),t;c=c.sibling}throw Error(u(188))}if(a.return!==n.return)a=s,n=c;else{for(var r=!1,f=s.child;f;){if(f===a){r=!0,a=s,n=c;break}if(f===n){r=!0,n=s,a=c;break}f=f.sibling}if(!r){for(f=c.child;f;){if(f===a){r=!0,a=c,n=s;break}if(f===n){r=!0,n=c,a=s;break}f=f.sibling}if(!r)throw Error(u(189))}}if(a.alternate!==n)throw Error(u(190))}if(a.tag!==3)throw Error(u(188));return a.stateNode.current===a?e:t}function w(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=w(e),t!==null)return t;e=e.sibling}return null}var j=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),E=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function ne(e){return e===null||typeof e!="object"?null:(e=ie&&e[ie]||e["@@iterator"],typeof e=="function"?e:null)}var je=Symbol.for("react.client.reference");function Ne(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===je?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case g:return"Fragment";case A:return"Profiler";case y:return"StrictMode";case G:return"Suspense";case ee:return"SuspenseList";case ae:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case T:return"Portal";case E:return e.displayName||"Context";case R:return(e._context.displayName||"Context")+".Consumer";case _:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return t=e.displayName||null,t!==null?t:Ne(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return Ne(e(t))}catch{}}return null}var Z=Array.isArray,H=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},te=[],ge=-1;function Me(e){return{current:e}}function de(e){0>ge||(e.current=te[ge],te[ge]=null,ge--)}function K(e,t){ge++,te[ge]=e.current,e.current=t}var M=Me(null),q=Me(null),F=Me(null),le=Me(null);function re(e,t){switch(K(F,t),K(q,e),K(M,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Um(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Um(t),e=Hm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}de(M),K(M,e)}function he(){de(M),de(q),de(F)}function pe(e){e.memoizedState!==null&&K(le,e);var t=M.current,a=Hm(t,e.type);t!==a&&(K(q,e),K(M,a))}function xe(e){q.current===e&&(de(M),de(q)),le.current===e&&(de(le),Wn._currentValue=$)}var Qe,Nt;function Ge(e){if(Qe===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Qe=t&&t[1]||"",Nt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+e+Nt}var ot=!1;function ta(e,t){if(!e||ot)return"";ot=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(Y){var L=Y}Reflect.construct(e,[],J)}else{try{J.call()}catch(Y){L=Y}e.call(J.prototype)}}else{try{throw Error()}catch(Y){L=Y}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(Y){if(Y&&L&&typeof Y.stack=="string")return[Y.stack,L.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=n.DetermineComponentFrameRoot(),r=c[0],f=c[1];if(r&&f){var D=r.split(`
`),U=f.split(`
`);for(s=n=0;n<D.length&&!D[n].includes("DetermineComponentFrameRoot");)n++;for(;s<U.length&&!U[s].includes("DetermineComponentFrameRoot");)s++;if(n===D.length||s===U.length)for(n=D.length-1,s=U.length-1;1<=n&&0<=s&&D[n]!==U[s];)s--;for(;1<=n&&0<=s;n--,s--)if(D[n]!==U[s]){if(n!==1||s!==1)do if(n--,s--,0>s||D[n]!==U[s]){var Q=`
`+D[n].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=n&&0<=s);break}}}finally{ot=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ge(a):""}function aa(e,t){switch(e.tag){case 26:case 27:case 5:return Ge(e.type);case 16:return Ge("Lazy");case 13:return e.child!==t&&t!==null?Ge("Suspense Fallback"):Ge("Suspense");case 19:return Ge("SuspenseList");case 0:case 15:return ta(e.type,!1);case 11:return ta(e.type.render,!1);case 1:return ta(e.type,!0);case 31:return Ge("Activity");default:return""}}function bl(e){try{var t="",a=null;do t+=aa(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var Wa=Object.prototype.hasOwnProperty,Ia=i.unstable_scheduleCallback,Yt=i.unstable_cancelCallback,St=i.unstable_shouldYield,la=i.unstable_requestPaint,Je=i.unstable_now,cs=i.unstable_getCurrentPriorityLevel,is=i.unstable_ImmediatePriority,rs=i.unstable_UserBlockingPriority,jl=i.unstable_NormalPriority,qc=i.unstable_LowPriority,us=i.unstable_IdlePriority,Nl=i.log,Yc=i.unstable_setDisableYieldValue,Pa=null,dt=null;function Jt(e){if(typeof Nl=="function"&&Yc(e),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(Pa,e)}catch{}}var W=Math.clz32?Math.clz32:Gt,be=Math.log,et=Math.LN2;function Gt(e){return e>>>=0,e===0?32:31-(be(e)/et|0)|0}var el=256,os=262144,ds=4194304;function tl(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ms(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var s=0,c=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var f=n&134217727;return f!==0?(n=f&~c,n!==0?s=tl(n):(r&=f,r!==0?s=tl(r):a||(a=f&~e,a!==0&&(s=tl(a))))):(f=n&~c,f!==0?s=tl(f):r!==0?s=tl(r):a||(a=n&~e,a!==0&&(s=tl(a)))),s===0?0:t!==0&&t!==s&&(t&c)===0&&(c=s&-s,a=t&-t,c>=a||c===32&&(a&4194048)!==0)?t:s}function on(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function uh(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xu(){var e=ds;return ds<<=1,(ds&62914560)===0&&(ds=4194304),e}function Gc(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function dn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function oh(e,t,a,n,s,c){var r=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var f=e.entanglements,D=e.expirationTimes,U=e.hiddenUpdates;for(a=r&~a;0<a;){var Q=31-W(a),J=1<<Q;f[Q]=0,D[Q]=-1;var L=U[Q];if(L!==null)for(U[Q]=null,Q=0;Q<L.length;Q++){var Y=L[Q];Y!==null&&(Y.lane&=-536870913)}a&=~J}n!==0&&yu(e,n,0),c!==0&&s===0&&e.tag!==0&&(e.suspendedLanes|=c&~(r&~t))}function yu(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-W(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function vu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-W(a),s=1<<n;s&t|e[n]&t&&(e[n]|=t),a&=~s}}function bu(e,t){var a=t&-t;return a=(a&42)!==0?1:Qc(a),(a&(e.suspendedLanes|t))!==0?0:a}function Qc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Xc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ju(){var e=z.p;return e!==0?e:(e=window.event,e===void 0?32:rf(e.type))}function Nu(e,t){var a=z.p;try{return z.p=e,t()}finally{z.p=a}}var Ca=Math.random().toString(36).slice(2),lt="__reactFiber$"+Ca,ht="__reactProps$"+Ca,Sl="__reactContainer$"+Ca,Kc="__reactEvents$"+Ca,dh="__reactListeners$"+Ca,mh="__reactHandles$"+Ca,Su="__reactResources$"+Ca,mn="__reactMarker$"+Ca;function Vc(e){delete e[lt],delete e[ht],delete e[Kc],delete e[dh],delete e[mh]}function Cl(e){var t=e[lt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Sl]||a[lt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Km(e);e!==null;){if(a=e[lt])return a;e=Km(e)}return t}e=a,a=e.parentNode}return null}function El(e){if(e=e[lt]||e[Sl]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function fn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function Dl(e){var t=e[Su];return t||(t=e[Su]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function tt(e){e[mn]=!0}var Cu=new Set,Eu={};function al(e,t){Tl(e,t),Tl(e+"Capture",t)}function Tl(e,t){for(Eu[e]=t,e=0;e<t.length;e++)Cu.add(t[e])}var fh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Du={},Tu={};function hh(e){return Wa.call(Tu,e)?!0:Wa.call(Du,e)?!1:fh.test(e)?Tu[e]=!0:(Du[e]=!0,!1)}function fs(e,t,a){if(hh(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function hs(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function na(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function Ot(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Mu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ph(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(r){a=""+r,c.call(this,r)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(r){a=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zc(e){if(!e._valueTracker){var t=Mu(e)?"checked":"value";e._valueTracker=ph(e,t,""+e[t])}}function Au(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=Mu(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function ps(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var gh=/[\n"\\]/g;function zt(e){return e.replace(gh,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Jc(e,t,a,n,s,c,r,f){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ot(t)):e.value!==""+Ot(t)&&(e.value=""+Ot(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?$c(e,r,Ot(t)):a!=null?$c(e,r,Ot(a)):n!=null&&e.removeAttribute("value"),s==null&&c!=null&&(e.defaultChecked=!!c),s!=null&&(e.checked=s&&typeof s!="function"&&typeof s!="symbol"),f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.name=""+Ot(f):e.removeAttribute("name")}function wu(e,t,a,n,s,c,r,f){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||a!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){Zc(e);return}a=a!=null?""+Ot(a):"",t=t!=null?""+Ot(t):a,f||t===e.value||(e.value=t),e.defaultValue=t}n=n??s,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=f?e.checked:!!n,e.defaultChecked=!!n,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r),Zc(e)}function $c(e,t,a){t==="number"&&ps(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ml(e,t,a,n){if(e=e.options,t){t={};for(var s=0;s<a.length;s++)t["$"+a[s]]=!0;for(a=0;a<e.length;a++)s=t.hasOwnProperty("$"+e[a].value),e[a].selected!==s&&(e[a].selected=s),s&&n&&(e[a].defaultSelected=!0)}else{for(a=""+Ot(a),t=null,s=0;s<e.length;s++){if(e[s].value===a){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ou(e,t,a){if(t!=null&&(t=""+Ot(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Ot(a):""}function zu(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(u(92));if(Z(n)){if(1<n.length)throw Error(u(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=Ot(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),Zc(e)}function Al(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var xh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _u(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||xh.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Ru(e,t,a){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&a[s]!==n&&_u(e,s,n)}else for(var c in t)t.hasOwnProperty(c)&&_u(e,c,t[c])}function Fc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gs(e){return vh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function sa(){}var Wc=null;function Ic(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wl=null,Ol=null;function Bu(e){var t=El(e);if(t&&(e=t.stateNode)){var a=e[ht]||null;e:switch(e=t.stateNode,t.type){case"input":if(Jc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+zt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var s=n[ht]||null;if(!s)throw Error(u(90));Jc(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&Au(n)}break e;case"textarea":Ou(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&Ml(e,!!a.multiple,t,!1)}}}var Pc=!1;function ku(e,t,a){if(Pc)return e(t,a);Pc=!0;try{var n=e(t);return n}finally{if(Pc=!1,(wl!==null||Ol!==null)&&(lc(),wl&&(t=wl,e=Ol,Ol=wl=null,Bu(t),e)))for(t=0;t<e.length;t++)Bu(e[t])}}function hn(e,t){var a=e.stateNode;if(a===null)return null;var n=a[ht]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(u(231,t,typeof a));return a}var ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ei=!1;if(ca)try{var pn={};Object.defineProperty(pn,"passive",{get:function(){ei=!0}}),window.addEventListener("test",pn,pn),window.removeEventListener("test",pn,pn)}catch{ei=!1}var Ea=null,ti=null,xs=null;function Uu(){if(xs)return xs;var e,t=ti,a=t.length,n,s="value"in Ea?Ea.value:Ea.textContent,c=s.length;for(e=0;e<a&&t[e]===s[e];e++);var r=a-e;for(n=1;n<=r&&t[a-n]===s[c-n];n++);return xs=s.slice(e,1<n?1-n:void 0)}function ys(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vs(){return!0}function Hu(){return!1}function pt(e){function t(a,n,s,c,r){this._reactName=a,this._targetInst=s,this.type=n,this.nativeEvent=c,this.target=r,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(a=e[f],this[f]=a?a(c):c[f]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?vs:Hu,this.isPropagationStopped=Hu,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=vs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=vs)},persist:function(){},isPersistent:vs}),t}var ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bs=pt(ll),gn=j({},ll,{view:0,detail:0}),bh=pt(gn),ai,li,xn,js=j({},gn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:si,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xn&&(xn&&e.type==="mousemove"?(ai=e.screenX-xn.screenX,li=e.screenY-xn.screenY):li=ai=0,xn=e),ai)},movementY:function(e){return"movementY"in e?e.movementY:li}}),Lu=pt(js),jh=j({},js,{dataTransfer:0}),Nh=pt(jh),Sh=j({},gn,{relatedTarget:0}),ni=pt(Sh),Ch=j({},ll,{animationName:0,elapsedTime:0,pseudoElement:0}),Eh=pt(Ch),Dh=j({},ll,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Th=pt(Dh),Mh=j({},ll,{data:0}),qu=pt(Mh),Ah={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Oh[e])?!!t[e]:!1}function si(){return zh}var _h=j({},gn,{key:function(e){if(e.key){var t=Ah[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ys(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:si,charCode:function(e){return e.type==="keypress"?ys(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ys(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rh=pt(_h),Bh=j({},js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yu=pt(Bh),kh=j({},gn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:si}),Uh=pt(kh),Hh=j({},ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lh=pt(Hh),qh=j({},js,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yh=pt(qh),Gh=j({},ll,{newState:0,oldState:0}),Qh=pt(Gh),Xh=[9,13,27,32],ci=ca&&"CompositionEvent"in window,yn=null;ca&&"documentMode"in document&&(yn=document.documentMode);var Kh=ca&&"TextEvent"in window&&!yn,Gu=ca&&(!ci||yn&&8<yn&&11>=yn),Qu=" ",Xu=!1;function Ku(e,t){switch(e){case"keyup":return Xh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zl=!1;function Vh(e,t){switch(e){case"compositionend":return Vu(t);case"keypress":return t.which!==32?null:(Xu=!0,Qu);case"textInput":return e=t.data,e===Qu&&Xu?null:e;default:return null}}function Zh(e,t){if(zl)return e==="compositionend"||!ci&&Ku(e,t)?(e=Uu(),xs=ti=Ea=null,zl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gu&&t.locale!=="ko"?null:t.data;default:return null}}var Jh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Jh[e.type]:t==="textarea"}function Ju(e,t,a,n){wl?Ol?Ol.push(n):Ol=[n]:wl=n,t=oc(t,"onChange"),0<t.length&&(a=new bs("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var vn=null,bn=null;function $h(e){Om(e,0)}function Ns(e){var t=fn(e);if(Au(t))return e}function $u(e,t){if(e==="change")return t}var Fu=!1;if(ca){var ii;if(ca){var ri="oninput"in document;if(!ri){var Wu=document.createElement("div");Wu.setAttribute("oninput","return;"),ri=typeof Wu.oninput=="function"}ii=ri}else ii=!1;Fu=ii&&(!document.documentMode||9<document.documentMode)}function Iu(){vn&&(vn.detachEvent("onpropertychange",Pu),bn=vn=null)}function Pu(e){if(e.propertyName==="value"&&Ns(bn)){var t=[];Ju(t,bn,e,Ic(e)),ku($h,t)}}function Fh(e,t,a){e==="focusin"?(Iu(),vn=t,bn=a,vn.attachEvent("onpropertychange",Pu)):e==="focusout"&&Iu()}function Wh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ns(bn)}function Ih(e,t){if(e==="click")return Ns(t)}function Ph(e,t){if(e==="input"||e==="change")return Ns(t)}function ep(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:ep;function jn(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var s=a[n];if(!Wa.call(t,s)||!Ct(e[s],t[s]))return!1}return!0}function eo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function to(e,t){var a=eo(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=eo(a)}}function ao(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ao(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lo(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ps(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=ps(e.document)}return t}function ui(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var tp=ca&&"documentMode"in document&&11>=document.documentMode,_l=null,oi=null,Nn=null,di=!1;function no(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;di||_l==null||_l!==ps(n)||(n=_l,"selectionStart"in n&&ui(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Nn&&jn(Nn,n)||(Nn=n,n=oc(oi,"onSelect"),0<n.length&&(t=new bs("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=_l)))}function nl(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Rl={animationend:nl("Animation","AnimationEnd"),animationiteration:nl("Animation","AnimationIteration"),animationstart:nl("Animation","AnimationStart"),transitionrun:nl("Transition","TransitionRun"),transitionstart:nl("Transition","TransitionStart"),transitioncancel:nl("Transition","TransitionCancel"),transitionend:nl("Transition","TransitionEnd")},mi={},so={};ca&&(so=document.createElement("div").style,"AnimationEvent"in window||(delete Rl.animationend.animation,delete Rl.animationiteration.animation,delete Rl.animationstart.animation),"TransitionEvent"in window||delete Rl.transitionend.transition);function sl(e){if(mi[e])return mi[e];if(!Rl[e])return e;var t=Rl[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in so)return mi[e]=t[a];return e}var co=sl("animationend"),io=sl("animationiteration"),ro=sl("animationstart"),ap=sl("transitionrun"),lp=sl("transitionstart"),np=sl("transitioncancel"),uo=sl("transitionend"),oo=new Map,fi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fi.push("scrollEnd");function Qt(e,t){oo.set(e,t),al(t,[e])}var Ss=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},_t=[],Bl=0,hi=0;function Cs(){for(var e=Bl,t=hi=Bl=0;t<e;){var a=_t[t];_t[t++]=null;var n=_t[t];_t[t++]=null;var s=_t[t];_t[t++]=null;var c=_t[t];if(_t[t++]=null,n!==null&&s!==null){var r=n.pending;r===null?s.next=s:(s.next=r.next,r.next=s),n.pending=s}c!==0&&mo(a,s,c)}}function Es(e,t,a,n){_t[Bl++]=e,_t[Bl++]=t,_t[Bl++]=a,_t[Bl++]=n,hi|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function pi(e,t,a,n){return Es(e,t,a,n),Ds(e)}function cl(e,t){return Es(e,null,null,t),Ds(e)}function mo(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var s=!1,c=e.return;c!==null;)c.childLanes|=a,n=c.alternate,n!==null&&(n.childLanes|=a),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(s=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,s&&t!==null&&(s=31-W(a),e=c.hiddenUpdates,n=e[s],n===null?e[s]=[t]:n.push(t),t.lane=a|536870912),c):null}function Ds(e){if(50<Xn)throw Xn=0,Cr=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var kl={};function sp(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(e,t,a,n){return new sp(e,t,a,n)}function gi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ia(e,t){var a=e.alternate;return a===null?(a=Et(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function fo(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ts(e,t,a,n,s,c){var r=0;if(n=e,typeof e=="function")gi(e)&&(r=1);else if(typeof e=="string")r=og(e,a,M.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ae:return e=Et(31,a,t,s),e.elementType=ae,e.lanes=c,e;case g:return il(a.children,s,c,t);case y:r=8,s|=24;break;case A:return e=Et(12,a,t,s|2),e.elementType=A,e.lanes=c,e;case G:return e=Et(13,a,t,s),e.elementType=G,e.lanes=c,e;case ee:return e=Et(19,a,t,s),e.elementType=ee,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case E:r=10;break e;case R:r=9;break e;case _:r=11;break e;case P:r=14;break e;case X:r=16,n=null;break e}r=29,a=Error(u(130,e===null?"null":typeof e,"")),n=null}return t=Et(r,a,t,s),t.elementType=e,t.type=n,t.lanes=c,t}function il(e,t,a,n){return e=Et(7,e,n,t),e.lanes=a,e}function xi(e,t,a){return e=Et(6,e,null,t),e.lanes=a,e}function ho(e){var t=Et(18,null,null,0);return t.stateNode=e,t}function yi(e,t,a){return t=Et(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var po=new WeakMap;function Rt(e,t){if(typeof e=="object"&&e!==null){var a=po.get(e);return a!==void 0?a:(t={value:e,source:t,stack:bl(t)},po.set(e,t),t)}return{value:e,source:t,stack:bl(t)}}var Ul=[],Hl=0,Ms=null,Sn=0,Bt=[],kt=0,Da=null,$t=1,Ft="";function ra(e,t){Ul[Hl++]=Sn,Ul[Hl++]=Ms,Ms=e,Sn=t}function go(e,t,a){Bt[kt++]=$t,Bt[kt++]=Ft,Bt[kt++]=Da,Da=e;var n=$t;e=Ft;var s=32-W(n)-1;n&=~(1<<s),a+=1;var c=32-W(t)+s;if(30<c){var r=s-s%5;c=(n&(1<<r)-1).toString(32),n>>=r,s-=r,$t=1<<32-W(t)+s|a<<s|n,Ft=c+e}else $t=1<<c|a<<s|n,Ft=e}function vi(e){e.return!==null&&(ra(e,1),go(e,1,0))}function bi(e){for(;e===Ms;)Ms=Ul[--Hl],Ul[Hl]=null,Sn=Ul[--Hl],Ul[Hl]=null;for(;e===Da;)Da=Bt[--kt],Bt[kt]=null,Ft=Bt[--kt],Bt[kt]=null,$t=Bt[--kt],Bt[kt]=null}function xo(e,t){Bt[kt++]=$t,Bt[kt++]=Ft,Bt[kt++]=Da,$t=t.id,Ft=t.overflow,Da=e}var nt=null,He=null,Te=!1,Ta=null,Ut=!1,ji=Error(u(519));function Ma(e){var t=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cn(Rt(t,e)),ji}function yo(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[lt]=e,t[ht]=n,a){case"dialog":Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":case"embed":Ce("load",t);break;case"video":case"audio":for(a=0;a<Vn.length;a++)Ce(Vn[a],t);break;case"source":Ce("error",t);break;case"img":case"image":case"link":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"input":Ce("invalid",t),wu(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Ce("invalid",t);break;case"textarea":Ce("invalid",t),zu(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||Bm(t.textContent,a)?(n.popover!=null&&(Ce("beforetoggle",t),Ce("toggle",t)),n.onScroll!=null&&Ce("scroll",t),n.onScrollEnd!=null&&Ce("scrollend",t),n.onClick!=null&&(t.onclick=sa),t=!0):t=!1,t||Ma(e,!0)}function vo(e){for(nt=e.return;nt;)switch(nt.tag){case 5:case 31:case 13:Ut=!1;return;case 27:case 3:Ut=!0;return;default:nt=nt.return}}function Ll(e){if(e!==nt)return!1;if(!Te)return vo(e),Te=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Lr(e.type,e.memoizedProps)),a=!a),a&&He&&Ma(e),vo(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));He=Xm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));He=Xm(e)}else t===27?(t=He,Ga(e.type)?(e=Xr,Xr=null,He=e):He=t):He=nt?Lt(e.stateNode.nextSibling):null;return!0}function rl(){He=nt=null,Te=!1}function Ni(){var e=Ta;return e!==null&&(vt===null?vt=e:vt.push.apply(vt,e),Ta=null),e}function Cn(e){Ta===null?Ta=[e]:Ta.push(e)}var Si=Me(null),ul=null,ua=null;function Aa(e,t,a){K(Si,t._currentValue),t._currentValue=a}function oa(e){e._currentValue=Si.current,de(Si)}function Ci(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function Ei(e,t,a,n){var s=e.child;for(s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){var r=s.child;c=c.firstContext;e:for(;c!==null;){var f=c;c=s;for(var D=0;D<t.length;D++)if(f.context===t[D]){c.lanes|=a,f=c.alternate,f!==null&&(f.lanes|=a),Ci(c.return,a,e),n||(r=null);break e}c=f.next}}else if(s.tag===18){if(r=s.return,r===null)throw Error(u(341));r.lanes|=a,c=r.alternate,c!==null&&(c.lanes|=a),Ci(r,a,e),r=null}else r=s.child;if(r!==null)r.return=s;else for(r=s;r!==null;){if(r===e){r=null;break}if(s=r.sibling,s!==null){s.return=r.return,r=s;break}r=r.return}s=r}}function ql(e,t,a,n){e=null;for(var s=t,c=!1;s!==null;){if(!c){if((s.flags&524288)!==0)c=!0;else if((s.flags&262144)!==0)break}if(s.tag===10){var r=s.alternate;if(r===null)throw Error(u(387));if(r=r.memoizedProps,r!==null){var f=s.type;Ct(s.pendingProps.value,r.value)||(e!==null?e.push(f):e=[f])}}else if(s===le.current){if(r=s.alternate,r===null)throw Error(u(387));r.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(e!==null?e.push(Wn):e=[Wn])}s=s.return}e!==null&&Ei(t,e,a,n),t.flags|=262144}function As(e){for(e=e.firstContext;e!==null;){if(!Ct(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ol(e){ul=e,ua=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function st(e){return bo(ul,e)}function ws(e,t){return ul===null&&ol(e),bo(e,t)}function bo(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},ua===null){if(e===null)throw Error(u(308));ua=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ua=ua.next=t;return a}var cp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},ip=i.unstable_scheduleCallback,rp=i.unstable_NormalPriority,$e={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Di(){return{controller:new cp,data:new Map,refCount:0}}function En(e){e.refCount--,e.refCount===0&&ip(rp,function(){e.controller.abort()})}var Dn=null,Ti=0,Yl=0,Gl=null;function up(e,t){if(Dn===null){var a=Dn=[];Ti=0,Yl=wr(),Gl={status:"pending",value:void 0,then:function(n){a.push(n)}}}return Ti++,t.then(jo,jo),t}function jo(){if(--Ti===0&&Dn!==null){Gl!==null&&(Gl.status="fulfilled");var e=Dn;Dn=null,Yl=0,Gl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function op(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(s){a.push(s)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var s=0;s<a.length;s++)(0,a[s])(t)},function(s){for(n.status="rejected",n.reason=s,s=0;s<a.length;s++)(0,a[s])(void 0)}),n}var No=H.S;H.S=function(e,t){sm=Je(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&up(e,t),No!==null&&No(e,t)};var dl=Me(null);function Mi(){var e=dl.current;return e!==null?e:Ue.pooledCache}function Os(e,t){t===null?K(dl,dl.current):K(dl,t.pool)}function So(){var e=Mi();return e===null?null:{parent:$e._currentValue,pool:e}}var Ql=Error(u(460)),Ai=Error(u(474)),zs=Error(u(542)),_s={then:function(){}};function Co(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Eo(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(sa,sa),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,To(e),e;default:if(typeof t.status=="string")t.then(sa,sa);else{if(e=Ue,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=n}},function(n){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,To(e),e}throw fl=t,Ql}}function ml(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(fl=a,Ql):a}}var fl=null;function Do(){if(fl===null)throw Error(u(459));var e=fl;return fl=null,e}function To(e){if(e===Ql||e===zs)throw Error(u(483))}var Xl=null,Tn=0;function Rs(e){var t=Tn;return Tn+=1,Xl===null&&(Xl=[]),Eo(Xl,e,t)}function Mn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Bs(e,t){throw t.$$typeof===b?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Mo(e){function t(B,O){if(e){var k=B.deletions;k===null?(B.deletions=[O],B.flags|=16):k.push(O)}}function a(B,O){if(!e)return null;for(;O!==null;)t(B,O),O=O.sibling;return null}function n(B){for(var O=new Map;B!==null;)B.key!==null?O.set(B.key,B):O.set(B.index,B),B=B.sibling;return O}function s(B,O){return B=ia(B,O),B.index=0,B.sibling=null,B}function c(B,O,k){return B.index=k,e?(k=B.alternate,k!==null?(k=k.index,k<O?(B.flags|=67108866,O):k):(B.flags|=67108866,O)):(B.flags|=1048576,O)}function r(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function f(B,O,k,V){return O===null||O.tag!==6?(O=xi(k,B.mode,V),O.return=B,O):(O=s(O,k),O.return=B,O)}function D(B,O,k,V){var me=k.type;return me===g?Q(B,O,k.props.children,V,k.key):O!==null&&(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===X&&ml(me)===O.type)?(O=s(O,k.props),Mn(O,k),O.return=B,O):(O=Ts(k.type,k.key,k.props,null,B.mode,V),Mn(O,k),O.return=B,O)}function U(B,O,k,V){return O===null||O.tag!==4||O.stateNode.containerInfo!==k.containerInfo||O.stateNode.implementation!==k.implementation?(O=yi(k,B.mode,V),O.return=B,O):(O=s(O,k.children||[]),O.return=B,O)}function Q(B,O,k,V,me){return O===null||O.tag!==7?(O=il(k,B.mode,V,me),O.return=B,O):(O=s(O,k),O.return=B,O)}function J(B,O,k){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=xi(""+O,B.mode,k),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case v:return k=Ts(O.type,O.key,O.props,null,B.mode,k),Mn(k,O),k.return=B,k;case T:return O=yi(O,B.mode,k),O.return=B,O;case X:return O=ml(O),J(B,O,k)}if(Z(O)||ne(O))return O=il(O,B.mode,k,null),O.return=B,O;if(typeof O.then=="function")return J(B,Rs(O),k);if(O.$$typeof===E)return J(B,ws(B,O),k);Bs(B,O)}return null}function L(B,O,k,V){var me=O!==null?O.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return me!==null?null:f(B,O,""+k,V);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case v:return k.key===me?D(B,O,k,V):null;case T:return k.key===me?U(B,O,k,V):null;case X:return k=ml(k),L(B,O,k,V)}if(Z(k)||ne(k))return me!==null?null:Q(B,O,k,V,null);if(typeof k.then=="function")return L(B,O,Rs(k),V);if(k.$$typeof===E)return L(B,O,ws(B,k),V);Bs(B,k)}return null}function Y(B,O,k,V,me){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return B=B.get(k)||null,f(O,B,""+V,me);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case v:return B=B.get(V.key===null?k:V.key)||null,D(O,B,V,me);case T:return B=B.get(V.key===null?k:V.key)||null,U(O,B,V,me);case X:return V=ml(V),Y(B,O,k,V,me)}if(Z(V)||ne(V))return B=B.get(k)||null,Q(O,B,V,me,null);if(typeof V.then=="function")return Y(B,O,k,Rs(V),me);if(V.$$typeof===E)return Y(B,O,k,ws(O,V),me);Bs(O,V)}return null}function se(B,O,k,V){for(var me=null,Ae=null,ue=O,ve=O=0,De=null;ue!==null&&ve<k.length;ve++){ue.index>ve?(De=ue,ue=null):De=ue.sibling;var we=L(B,ue,k[ve],V);if(we===null){ue===null&&(ue=De);break}e&&ue&&we.alternate===null&&t(B,ue),O=c(we,O,ve),Ae===null?me=we:Ae.sibling=we,Ae=we,ue=De}if(ve===k.length)return a(B,ue),Te&&ra(B,ve),me;if(ue===null){for(;ve<k.length;ve++)ue=J(B,k[ve],V),ue!==null&&(O=c(ue,O,ve),Ae===null?me=ue:Ae.sibling=ue,Ae=ue);return Te&&ra(B,ve),me}for(ue=n(ue);ve<k.length;ve++)De=Y(ue,B,ve,k[ve],V),De!==null&&(e&&De.alternate!==null&&ue.delete(De.key===null?ve:De.key),O=c(De,O,ve),Ae===null?me=De:Ae.sibling=De,Ae=De);return e&&ue.forEach(function(Za){return t(B,Za)}),Te&&ra(B,ve),me}function fe(B,O,k,V){if(k==null)throw Error(u(151));for(var me=null,Ae=null,ue=O,ve=O=0,De=null,we=k.next();ue!==null&&!we.done;ve++,we=k.next()){ue.index>ve?(De=ue,ue=null):De=ue.sibling;var Za=L(B,ue,we.value,V);if(Za===null){ue===null&&(ue=De);break}e&&ue&&Za.alternate===null&&t(B,ue),O=c(Za,O,ve),Ae===null?me=Za:Ae.sibling=Za,Ae=Za,ue=De}if(we.done)return a(B,ue),Te&&ra(B,ve),me;if(ue===null){for(;!we.done;ve++,we=k.next())we=J(B,we.value,V),we!==null&&(O=c(we,O,ve),Ae===null?me=we:Ae.sibling=we,Ae=we);return Te&&ra(B,ve),me}for(ue=n(ue);!we.done;ve++,we=k.next())we=Y(ue,B,ve,we.value,V),we!==null&&(e&&we.alternate!==null&&ue.delete(we.key===null?ve:we.key),O=c(we,O,ve),Ae===null?me=we:Ae.sibling=we,Ae=we);return e&&ue.forEach(function(jg){return t(B,jg)}),Te&&ra(B,ve),me}function ke(B,O,k,V){if(typeof k=="object"&&k!==null&&k.type===g&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case v:e:{for(var me=k.key;O!==null;){if(O.key===me){if(me=k.type,me===g){if(O.tag===7){a(B,O.sibling),V=s(O,k.props.children),V.return=B,B=V;break e}}else if(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===X&&ml(me)===O.type){a(B,O.sibling),V=s(O,k.props),Mn(V,k),V.return=B,B=V;break e}a(B,O);break}else t(B,O);O=O.sibling}k.type===g?(V=il(k.props.children,B.mode,V,k.key),V.return=B,B=V):(V=Ts(k.type,k.key,k.props,null,B.mode,V),Mn(V,k),V.return=B,B=V)}return r(B);case T:e:{for(me=k.key;O!==null;){if(O.key===me)if(O.tag===4&&O.stateNode.containerInfo===k.containerInfo&&O.stateNode.implementation===k.implementation){a(B,O.sibling),V=s(O,k.children||[]),V.return=B,B=V;break e}else{a(B,O);break}else t(B,O);O=O.sibling}V=yi(k,B.mode,V),V.return=B,B=V}return r(B);case X:return k=ml(k),ke(B,O,k,V)}if(Z(k))return se(B,O,k,V);if(ne(k)){if(me=ne(k),typeof me!="function")throw Error(u(150));return k=me.call(k),fe(B,O,k,V)}if(typeof k.then=="function")return ke(B,O,Rs(k),V);if(k.$$typeof===E)return ke(B,O,ws(B,k),V);Bs(B,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,O!==null&&O.tag===6?(a(B,O.sibling),V=s(O,k),V.return=B,B=V):(a(B,O),V=xi(k,B.mode,V),V.return=B,B=V),r(B)):a(B,O)}return function(B,O,k,V){try{Tn=0;var me=ke(B,O,k,V);return Xl=null,me}catch(ue){if(ue===Ql||ue===zs)throw ue;var Ae=Et(29,ue,null,B.mode);return Ae.lanes=V,Ae.return=B,Ae}}}var hl=Mo(!0),Ao=Mo(!1),wa=!1;function wi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Oa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function za(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Oe&2)!==0){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=Ds(e),mo(e,null,a),t}return Es(e,n,t,a),Ds(e)}function An(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,vu(e,a)}}function zi(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var s=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var r={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};c===null?s=c=r:c=c.next=r,a=a.next}while(a!==null);c===null?s=c=t:c=c.next=t}else s=c=t;a={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:c,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var _i=!1;function wn(){if(_i){var e=Gl;if(e!==null)throw e}}function On(e,t,a,n){_i=!1;var s=e.updateQueue;wa=!1;var c=s.firstBaseUpdate,r=s.lastBaseUpdate,f=s.shared.pending;if(f!==null){s.shared.pending=null;var D=f,U=D.next;D.next=null,r===null?c=U:r.next=U,r=D;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,f=Q.lastBaseUpdate,f!==r&&(f===null?Q.firstBaseUpdate=U:f.next=U,Q.lastBaseUpdate=D))}if(c!==null){var J=s.baseState;r=0,Q=U=D=null,f=c;do{var L=f.lane&-536870913,Y=L!==f.lane;if(Y?(Ee&L)===L:(n&L)===L){L!==0&&L===Yl&&(_i=!0),Q!==null&&(Q=Q.next={lane:0,tag:f.tag,payload:f.payload,callback:null,next:null});e:{var se=e,fe=f;L=t;var ke=a;switch(fe.tag){case 1:if(se=fe.payload,typeof se=="function"){J=se.call(ke,J,L);break e}J=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=fe.payload,L=typeof se=="function"?se.call(ke,J,L):se,L==null)break e;J=j({},J,L);break e;case 2:wa=!0}}L=f.callback,L!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=s.callbacks,Y===null?s.callbacks=[L]:Y.push(L))}else Y={lane:L,tag:f.tag,payload:f.payload,callback:f.callback,next:null},Q===null?(U=Q=Y,D=J):Q=Q.next=Y,r|=L;if(f=f.next,f===null){if(f=s.shared.pending,f===null)break;Y=f,f=Y.next,Y.next=null,s.lastBaseUpdate=Y,s.shared.pending=null}}while(!0);Q===null&&(D=J),s.baseState=D,s.firstBaseUpdate=U,s.lastBaseUpdate=Q,c===null&&(s.shared.lanes=0),Ua|=r,e.lanes=r,e.memoizedState=J}}function wo(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function Oo(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)wo(a[e],t)}var Kl=Me(null),ks=Me(0);function zo(e,t){e=va,K(ks,e),K(Kl,t),va=e|t.baseLanes}function Ri(){K(ks,va),K(Kl,Kl.current)}function Bi(){va=ks.current,de(Kl),de(ks)}var Dt=Me(null),Ht=null;function _a(e){var t=e.alternate;K(Ve,Ve.current&1),K(Dt,e),Ht===null&&(t===null||Kl.current!==null||t.memoizedState!==null)&&(Ht=e)}function ki(e){K(Ve,Ve.current),K(Dt,e),Ht===null&&(Ht=e)}function _o(e){e.tag===22?(K(Ve,Ve.current),K(Dt,e),Ht===null&&(Ht=e)):Ra()}function Ra(){K(Ve,Ve.current),K(Dt,Dt.current)}function Tt(e){de(Dt),Ht===e&&(Ht=null),de(Ve)}var Ve=Me(0);function Us(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Gr(a)||Qr(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var da=0,ye=null,Re=null,Fe=null,Hs=!1,Vl=!1,pl=!1,Ls=0,zn=0,Zl=null,dp=0;function Xe(){throw Error(u(321))}function Ui(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Ct(e[a],t[a]))return!1;return!0}function Hi(e,t,a,n,s,c){return da=c,ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,H.H=e===null||e.memoizedState===null?gd:Pi,pl=!1,c=a(n,s),pl=!1,Vl&&(c=Bo(t,a,n,s)),Ro(e),c}function Ro(e){H.H=Bn;var t=Re!==null&&Re.next!==null;if(da=0,Fe=Re=ye=null,Hs=!1,zn=0,Zl=null,t)throw Error(u(300));e===null||We||(e=e.dependencies,e!==null&&As(e)&&(We=!0))}function Bo(e,t,a,n){ye=e;var s=0;do{if(Vl&&(Zl=null),zn=0,Vl=!1,25<=s)throw Error(u(301));if(s+=1,Fe=Re=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}H.H=xd,c=t(a,n)}while(Vl);return c}function mp(){var e=H.H,t=e.useState()[0];return t=typeof t.then=="function"?_n(t):t,e=e.useState()[0],(Re!==null?Re.memoizedState:null)!==e&&(ye.flags|=1024),t}function Li(){var e=Ls!==0;return Ls=0,e}function qi(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Yi(e){if(Hs){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Hs=!1}da=0,Fe=Re=ye=null,Vl=!1,zn=Ls=0,Zl=null}function mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?ye.memoizedState=Fe=e:Fe=Fe.next=e,Fe}function Ze(){if(Re===null){var e=ye.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var t=Fe===null?ye.memoizedState:Fe.next;if(t!==null)Fe=t,Re=e;else{if(e===null)throw ye.alternate===null?Error(u(467)):Error(u(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Fe===null?ye.memoizedState=Fe=e:Fe=Fe.next=e}return Fe}function qs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _n(e){var t=zn;return zn+=1,Zl===null&&(Zl=[]),e=Eo(Zl,e,t),t=ye,(Fe===null?t.memoizedState:Fe.next)===null&&(t=t.alternate,H.H=t===null||t.memoizedState===null?gd:Pi),e}function Ys(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return _n(e);if(e.$$typeof===E)return st(e)}throw Error(u(438,String(e)))}function Gi(e){var t=null,a=ye.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=ye.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=qs(),ye.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=I;return t.index++,a}function ma(e,t){return typeof t=="function"?t(e):t}function Gs(e){var t=Ze();return Qi(t,Re,e)}function Qi(e,t,a){var n=e.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=a;var s=e.baseQueue,c=n.pending;if(c!==null){if(s!==null){var r=s.next;s.next=c.next,c.next=r}t.baseQueue=s=c,n.pending=null}if(c=e.baseState,s===null)e.memoizedState=c;else{t=s.next;var f=r=null,D=null,U=t,Q=!1;do{var J=U.lane&-536870913;if(J!==U.lane?(Ee&J)===J:(da&J)===J){var L=U.revertLane;if(L===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),J===Yl&&(Q=!0);else if((da&L)===L){U=U.next,L===Yl&&(Q=!0);continue}else J={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(f=D=J,r=c):D=D.next=J,ye.lanes|=L,Ua|=L;J=U.action,pl&&a(c,J),c=U.hasEagerState?U.eagerState:a(c,J)}else L={lane:J,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(f=D=L,r=c):D=D.next=L,ye.lanes|=J,Ua|=J;U=U.next}while(U!==null&&U!==t);if(D===null?r=c:D.next=f,!Ct(c,e.memoizedState)&&(We=!0,Q&&(a=Gl,a!==null)))throw a;e.memoizedState=c,e.baseState=r,e.baseQueue=D,n.lastRenderedState=c}return s===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Xi(e){var t=Ze(),a=t.queue;if(a===null)throw Error(u(311));a.lastRenderedReducer=e;var n=a.dispatch,s=a.pending,c=t.memoizedState;if(s!==null){a.pending=null;var r=s=s.next;do c=e(c,r.action),r=r.next;while(r!==s);Ct(c,t.memoizedState)||(We=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),a.lastRenderedState=c}return[c,n]}function ko(e,t,a){var n=ye,s=Ze(),c=Te;if(c){if(a===void 0)throw Error(u(407));a=a()}else a=t();var r=!Ct((Re||s).memoizedState,a);if(r&&(s.memoizedState=a,We=!0),s=s.queue,Zi(Lo.bind(null,n,s,e),[e]),s.getSnapshot!==t||r||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,Jl(9,{destroy:void 0},Ho.bind(null,n,s,a,t),null),Ue===null)throw Error(u(349));c||(da&127)!==0||Uo(n,t,a)}return a}function Uo(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ye.updateQueue,t===null?(t=qs(),ye.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Ho(e,t,a,n){t.value=a,t.getSnapshot=n,qo(t)&&Yo(e)}function Lo(e,t,a){return a(function(){qo(t)&&Yo(e)})}function qo(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Ct(e,a)}catch{return!0}}function Yo(e){var t=cl(e,2);t!==null&&bt(t,e,2)}function Ki(e){var t=mt();if(typeof e=="function"){var a=e;if(e=a(),pl){Jt(!0);try{a()}finally{Jt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:e},t}function Go(e,t,a,n){return e.baseState=a,Qi(e,Re,typeof n=="function"?n:ma)}function fp(e,t,a,n,s){if(Ks(e))throw Error(u(485));if(e=t.action,e!==null){var c={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){c.listeners.push(r)}};H.T!==null?a(!0):c.isTransition=!1,n(c),a=t.pending,a===null?(c.next=t.pending=c,Qo(t,c)):(c.next=a.next,t.pending=a.next=c)}}function Qo(e,t){var a=t.action,n=t.payload,s=e.state;if(t.isTransition){var c=H.T,r={};H.T=r;try{var f=a(s,n),D=H.S;D!==null&&D(r,f),Xo(e,t,f)}catch(U){Vi(e,t,U)}finally{c!==null&&r.types!==null&&(c.types=r.types),H.T=c}}else try{c=a(s,n),Xo(e,t,c)}catch(U){Vi(e,t,U)}}function Xo(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Ko(e,t,n)},function(n){return Vi(e,t,n)}):Ko(e,t,a)}function Ko(e,t,a){t.status="fulfilled",t.value=a,Vo(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Qo(e,a)))}function Vi(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,Vo(t),t=t.next;while(t!==n)}e.action=null}function Vo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Zo(e,t){return t}function Jo(e,t){if(Te){var a=Ue.formState;if(a!==null){e:{var n=ye;if(Te){if(He){t:{for(var s=He,c=Ut;s.nodeType!==8;){if(!c){s=null;break t}if(s=Lt(s.nextSibling),s===null){s=null;break t}}c=s.data,s=c==="F!"||c==="F"?s:null}if(s){He=Lt(s.nextSibling),n=s.data==="F!";break e}}Ma(n)}n=!1}n&&(t=a[0])}}return a=mt(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:t},a.queue=n,a=fd.bind(null,ye,n),n.dispatch=a,n=Ki(!1),c=Ii.bind(null,ye,!1,n.queue),n=mt(),s={state:t,dispatch:null,action:e,pending:null},n.queue=s,a=fp.bind(null,ye,s,c,a),s.dispatch=a,n.memoizedState=e,[t,a,!1]}function $o(e){var t=Ze();return Fo(t,Re,e)}function Fo(e,t,a){if(t=Qi(e,t,Zo)[0],e=Gs(ma)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=_n(t)}catch(r){throw r===Ql?zs:r}else n=t;t=Ze();var s=t.queue,c=s.dispatch;return a!==t.memoizedState&&(ye.flags|=2048,Jl(9,{destroy:void 0},hp.bind(null,s,a),null)),[n,c,e]}function hp(e,t){e.action=t}function Wo(e){var t=Ze(),a=Re;if(a!==null)return Fo(t,a,e);Ze(),t=t.memoizedState,a=Ze();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function Jl(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=ye.updateQueue,t===null&&(t=qs(),ye.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function Io(){return Ze().memoizedState}function Qs(e,t,a,n){var s=mt();ye.flags|=e,s.memoizedState=Jl(1|t,{destroy:void 0},a,n===void 0?null:n)}function Xs(e,t,a,n){var s=Ze();n=n===void 0?null:n;var c=s.memoizedState.inst;Re!==null&&n!==null&&Ui(n,Re.memoizedState.deps)?s.memoizedState=Jl(t,c,a,n):(ye.flags|=e,s.memoizedState=Jl(1|t,c,a,n))}function Po(e,t){Qs(8390656,8,e,t)}function Zi(e,t){Xs(2048,8,e,t)}function pp(e){ye.flags|=4;var t=ye.updateQueue;if(t===null)t=qs(),ye.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function ed(e){var t=Ze().memoizedState;return pp({ref:t,nextImpl:e}),function(){if((Oe&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}function td(e,t){return Xs(4,2,e,t)}function ad(e,t){return Xs(4,4,e,t)}function ld(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nd(e,t,a){a=a!=null?a.concat([e]):null,Xs(4,4,ld.bind(null,t,e),a)}function Ji(){}function sd(e,t){var a=Ze();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&Ui(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function cd(e,t){var a=Ze();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&Ui(t,n[1]))return n[0];if(n=e(),pl){Jt(!0);try{e()}finally{Jt(!1)}}return a.memoizedState=[n,t],n}function $i(e,t,a){return a===void 0||(da&1073741824)!==0&&(Ee&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=im(),ye.lanes|=e,Ua|=e,a)}function id(e,t,a,n){return Ct(a,t)?a:Kl.current!==null?(e=$i(e,a,n),Ct(e,t)||(We=!0),e):(da&42)===0||(da&1073741824)!==0&&(Ee&261930)===0?(We=!0,e.memoizedState=a):(e=im(),ye.lanes|=e,Ua|=e,t)}function rd(e,t,a,n,s){var c=z.p;z.p=c!==0&&8>c?c:8;var r=H.T,f={};H.T=f,Ii(e,!1,t,a);try{var D=s(),U=H.S;if(U!==null&&U(f,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Q=op(D,n);Rn(e,t,Q,wt(e))}else Rn(e,t,n,wt(e))}catch(J){Rn(e,t,{then:function(){},status:"rejected",reason:J},wt())}finally{z.p=c,r!==null&&f.types!==null&&(r.types=f.types),H.T=r}}function gp(){}function Fi(e,t,a,n){if(e.tag!==5)throw Error(u(476));var s=ud(e).queue;rd(e,s,t,$,a===null?gp:function(){return od(e),a(n)})}function ud(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:$},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function od(e){var t=ud(e);t.next===null&&(t=e.alternate.memoizedState),Rn(e,t.next.queue,{},wt())}function Wi(){return st(Wn)}function dd(){return Ze().memoizedState}function md(){return Ze().memoizedState}function xp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=wt();e=Oa(a);var n=za(t,e,a);n!==null&&(bt(n,t,a),An(n,t,a)),t={cache:Di()},e.payload=t;return}t=t.return}}function yp(e,t,a){var n=wt();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ks(e)?hd(t,a):(a=pi(e,t,a,n),a!==null&&(bt(a,e,n),pd(a,t,n)))}function fd(e,t,a){var n=wt();Rn(e,t,a,n)}function Rn(e,t,a,n){var s={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ks(e))hd(t,s);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var r=t.lastRenderedState,f=c(r,a);if(s.hasEagerState=!0,s.eagerState=f,Ct(f,r))return Es(e,t,s,0),Ue===null&&Cs(),!1}catch{}if(a=pi(e,t,s,n),a!==null)return bt(a,e,n),pd(a,t,n),!0}return!1}function Ii(e,t,a,n){if(n={lane:2,revertLane:wr(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ks(e)){if(t)throw Error(u(479))}else t=pi(e,a,n,2),t!==null&&bt(t,e,2)}function Ks(e){var t=e.alternate;return e===ye||t!==null&&t===ye}function hd(e,t){Vl=Hs=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function pd(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,vu(e,a)}}var Bn={readContext:st,use:Ys,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};Bn.useEffectEvent=Xe;var gd={readContext:st,use:Ys,useCallback:function(e,t){return mt().memoizedState=[e,t===void 0?null:t],e},useContext:st,useEffect:Po,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Qs(4194308,4,ld.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Qs(4194308,4,e,t)},useInsertionEffect:function(e,t){Qs(4,2,e,t)},useMemo:function(e,t){var a=mt();t=t===void 0?null:t;var n=e();if(pl){Jt(!0);try{e()}finally{Jt(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=mt();if(a!==void 0){var s=a(t);if(pl){Jt(!0);try{a(t)}finally{Jt(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=yp.bind(null,ye,e),[n.memoizedState,e]},useRef:function(e){var t=mt();return e={current:e},t.memoizedState=e},useState:function(e){e=Ki(e);var t=e.queue,a=fd.bind(null,ye,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Ji,useDeferredValue:function(e,t){var a=mt();return $i(a,e,t)},useTransition:function(){var e=Ki(!1);return e=rd.bind(null,ye,e.queue,!0,!1),mt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=ye,s=mt();if(Te){if(a===void 0)throw Error(u(407));a=a()}else{if(a=t(),Ue===null)throw Error(u(349));(Ee&127)!==0||Uo(n,t,a)}s.memoizedState=a;var c={value:a,getSnapshot:t};return s.queue=c,Po(Lo.bind(null,n,c,e),[e]),n.flags|=2048,Jl(9,{destroy:void 0},Ho.bind(null,n,c,a,t),null),a},useId:function(){var e=mt(),t=Ue.identifierPrefix;if(Te){var a=Ft,n=$t;a=(n&~(1<<32-W(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Ls++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=dp++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Wi,useFormState:Jo,useActionState:Jo,useOptimistic:function(e){var t=mt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Ii.bind(null,ye,!0,a),a.dispatch=t,[e,t]},useMemoCache:Gi,useCacheRefresh:function(){return mt().memoizedState=xp.bind(null,ye)},useEffectEvent:function(e){var t=mt(),a={impl:e};return t.memoizedState=a,function(){if((Oe&2)!==0)throw Error(u(440));return a.impl.apply(void 0,arguments)}}},Pi={readContext:st,use:Ys,useCallback:sd,useContext:st,useEffect:Zi,useImperativeHandle:nd,useInsertionEffect:td,useLayoutEffect:ad,useMemo:cd,useReducer:Gs,useRef:Io,useState:function(){return Gs(ma)},useDebugValue:Ji,useDeferredValue:function(e,t){var a=Ze();return id(a,Re.memoizedState,e,t)},useTransition:function(){var e=Gs(ma)[0],t=Ze().memoizedState;return[typeof e=="boolean"?e:_n(e),t]},useSyncExternalStore:ko,useId:dd,useHostTransitionStatus:Wi,useFormState:$o,useActionState:$o,useOptimistic:function(e,t){var a=Ze();return Go(a,Re,e,t)},useMemoCache:Gi,useCacheRefresh:md};Pi.useEffectEvent=ed;var xd={readContext:st,use:Ys,useCallback:sd,useContext:st,useEffect:Zi,useImperativeHandle:nd,useInsertionEffect:td,useLayoutEffect:ad,useMemo:cd,useReducer:Xi,useRef:Io,useState:function(){return Xi(ma)},useDebugValue:Ji,useDeferredValue:function(e,t){var a=Ze();return Re===null?$i(a,e,t):id(a,Re.memoizedState,e,t)},useTransition:function(){var e=Xi(ma)[0],t=Ze().memoizedState;return[typeof e=="boolean"?e:_n(e),t]},useSyncExternalStore:ko,useId:dd,useHostTransitionStatus:Wi,useFormState:Wo,useActionState:Wo,useOptimistic:function(e,t){var a=Ze();return Re!==null?Go(a,Re,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Gi,useCacheRefresh:md};xd.useEffectEvent=ed;function er(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:j({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var tr={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=wt(),s=Oa(n);s.payload=t,a!=null&&(s.callback=a),t=za(e,s,n),t!==null&&(bt(t,e,n),An(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=wt(),s=Oa(n);s.tag=1,s.payload=t,a!=null&&(s.callback=a),t=za(e,s,n),t!==null&&(bt(t,e,n),An(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=wt(),n=Oa(a);n.tag=2,t!=null&&(n.callback=t),t=za(e,n,a),t!==null&&(bt(t,e,a),An(t,e,a))}};function yd(e,t,a,n,s,c,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,c,r):t.prototype&&t.prototype.isPureReactComponent?!jn(a,n)||!jn(s,c):!0}function vd(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&tr.enqueueReplaceState(t,t.state,null)}function gl(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=j({},a));for(var s in e)a[s]===void 0&&(a[s]=e[s])}return a}function bd(e){Ss(e)}function jd(e){console.error(e)}function Nd(e){Ss(e)}function Vs(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function Sd(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function ar(e,t,a){return a=Oa(a),a.tag=3,a.payload={element:null},a.callback=function(){Vs(e,t)},a}function Cd(e){return e=Oa(e),e.tag=3,e}function Ed(e,t,a,n){var s=a.type.getDerivedStateFromError;if(typeof s=="function"){var c=n.value;e.payload=function(){return s(c)},e.callback=function(){Sd(t,a,n)}}var r=a.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Sd(t,a,n),typeof s!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var f=n.stack;this.componentDidCatch(n.value,{componentStack:f!==null?f:""})})}function vp(e,t,a,n,s){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&ql(t,a,s,!0),a=Dt.current,a!==null){switch(a.tag){case 31:case 13:return Ht===null?nc():a.alternate===null&&Ke===0&&(Ke=3),a.flags&=-257,a.flags|=65536,a.lanes=s,n===_s?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),Tr(e,n,s)),!1;case 22:return a.flags|=65536,n===_s?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),Tr(e,n,s)),!1}throw Error(u(435,a.tag))}return Tr(e,n,s),nc(),!1}if(Te)return t=Dt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==ji&&(e=Error(u(422),{cause:n}),Cn(Rt(e,a)))):(n!==ji&&(t=Error(u(423),{cause:n}),Cn(Rt(t,a))),e=e.current.alternate,e.flags|=65536,s&=-s,e.lanes|=s,n=Rt(n,a),s=ar(e.stateNode,n,s),zi(e,s),Ke!==4&&(Ke=2)),!1;var c=Error(u(520),{cause:n});if(c=Rt(c,a),Qn===null?Qn=[c]:Qn.push(c),Ke!==4&&(Ke=2),t===null)return!0;n=Rt(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=s&-s,a.lanes|=e,e=ar(a.stateNode,n,e),zi(a,e),!1;case 1:if(t=a.type,c=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Ha===null||!Ha.has(c))))return a.flags|=65536,s&=-s,a.lanes|=s,s=Cd(s),Ed(s,e,a,n),zi(a,s),!1}a=a.return}while(a!==null);return!1}var lr=Error(u(461)),We=!1;function ct(e,t,a,n){t.child=e===null?Ao(t,null,a,n):hl(t,e.child,a,n)}function Dd(e,t,a,n,s){a=a.render;var c=t.ref;if("ref"in n){var r={};for(var f in n)f!=="ref"&&(r[f]=n[f])}else r=n;return ol(t),n=Hi(e,t,a,r,c,s),f=Li(),e!==null&&!We?(qi(e,t,s),fa(e,t,s)):(Te&&f&&vi(t),t.flags|=1,ct(e,t,n,s),t.child)}function Td(e,t,a,n,s){if(e===null){var c=a.type;return typeof c=="function"&&!gi(c)&&c.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=c,Md(e,t,c,n,s)):(e=Ts(a.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!dr(e,s)){var r=c.memoizedProps;if(a=a.compare,a=a!==null?a:jn,a(r,n)&&e.ref===t.ref)return fa(e,t,s)}return t.flags|=1,e=ia(c,n),e.ref=t.ref,e.return=t,t.child=e}function Md(e,t,a,n,s){if(e!==null){var c=e.memoizedProps;if(jn(c,n)&&e.ref===t.ref)if(We=!1,t.pendingProps=n=c,dr(e,s))(e.flags&131072)!==0&&(We=!0);else return t.lanes=e.lanes,fa(e,t,s)}return nr(e,t,a,n,s)}function Ad(e,t,a,n){var s=n.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|a:a,e!==null){for(n=t.child=e.child,s=0;n!==null;)s=s|n.lanes|n.childLanes,n=n.sibling;n=s&~c}else n=0,t.child=null;return wd(e,t,c,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Os(t,c!==null?c.cachePool:null),c!==null?zo(t,c):Ri(),_o(t);else return n=t.lanes=536870912,wd(e,t,c!==null?c.baseLanes|a:a,a,n)}else c!==null?(Os(t,c.cachePool),zo(t,c),Ra(),t.memoizedState=null):(e!==null&&Os(t,null),Ri(),Ra());return ct(e,t,s,a),t.child}function kn(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function wd(e,t,a,n,s){var c=Mi();return c=c===null?null:{parent:$e._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&Os(t,null),Ri(),_o(t),e!==null&&ql(e,t,n,!0),t.childLanes=s,null}function Zs(e,t){return t=$s({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Od(e,t,a){return hl(t,e.child,null,a),e=Zs(t,t.pendingProps),e.flags|=2,Tt(t),t.memoizedState=null,e}function bp(e,t,a){var n=t.pendingProps,s=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Te){if(n.mode==="hidden")return e=Zs(t,n),t.lanes=536870912,kn(null,e);if(ki(t),(e=He)?(e=Qm(e,Ut),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Da!==null?{id:$t,overflow:Ft}:null,retryLane:536870912,hydrationErrors:null},a=ho(e),a.return=t,t.child=a,nt=t,He=null)):e=null,e===null)throw Ma(t);return t.lanes=536870912,null}return Zs(t,n)}var c=e.memoizedState;if(c!==null){var r=c.dehydrated;if(ki(t),s)if(t.flags&256)t.flags&=-257,t=Od(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(u(558));else if(We||ql(e,t,a,!1),s=(a&e.childLanes)!==0,We||s){if(n=Ue,n!==null&&(r=bu(n,a),r!==0&&r!==c.retryLane))throw c.retryLane=r,cl(e,r),bt(n,e,r),lr;nc(),t=Od(e,t,a)}else e=c.treeContext,He=Lt(r.nextSibling),nt=t,Te=!0,Ta=null,Ut=!1,e!==null&&xo(t,e),t=Zs(t,n),t.flags|=4096;return t}return e=ia(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Js(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(u(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function nr(e,t,a,n,s){return ol(t),a=Hi(e,t,a,n,void 0,s),n=Li(),e!==null&&!We?(qi(e,t,s),fa(e,t,s)):(Te&&n&&vi(t),t.flags|=1,ct(e,t,a,s),t.child)}function zd(e,t,a,n,s,c){return ol(t),t.updateQueue=null,a=Bo(t,n,a,s),Ro(e),n=Li(),e!==null&&!We?(qi(e,t,c),fa(e,t,c)):(Te&&n&&vi(t),t.flags|=1,ct(e,t,a,c),t.child)}function _d(e,t,a,n,s){if(ol(t),t.stateNode===null){var c=kl,r=a.contextType;typeof r=="object"&&r!==null&&(c=st(r)),c=new a(n,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=tr,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=n,c.state=t.memoizedState,c.refs={},wi(t),r=a.contextType,c.context=typeof r=="object"&&r!==null?st(r):kl,c.state=t.memoizedState,r=a.getDerivedStateFromProps,typeof r=="function"&&(er(t,a,r,n),c.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(r=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),r!==c.state&&tr.enqueueReplaceState(c,c.state,null),On(t,n,c,s),wn(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){c=t.stateNode;var f=t.memoizedProps,D=gl(a,f);c.props=D;var U=c.context,Q=a.contextType;r=kl,typeof Q=="object"&&Q!==null&&(r=st(Q));var J=a.getDerivedStateFromProps;Q=typeof J=="function"||typeof c.getSnapshotBeforeUpdate=="function",f=t.pendingProps!==f,Q||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f||U!==r)&&vd(t,c,n,r),wa=!1;var L=t.memoizedState;c.state=L,On(t,n,c,s),wn(),U=t.memoizedState,f||L!==U||wa?(typeof J=="function"&&(er(t,a,J,n),U=t.memoizedState),(D=wa||yd(t,a,D,n,L,U,r))?(Q||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=U),c.props=n,c.state=U,c.context=r,n=D):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{c=t.stateNode,Oi(e,t),r=t.memoizedProps,Q=gl(a,r),c.props=Q,J=t.pendingProps,L=c.context,U=a.contextType,D=kl,typeof U=="object"&&U!==null&&(D=st(U)),f=a.getDerivedStateFromProps,(U=typeof f=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(r!==J||L!==D)&&vd(t,c,n,D),wa=!1,L=t.memoizedState,c.state=L,On(t,n,c,s),wn();var Y=t.memoizedState;r!==J||L!==Y||wa||e!==null&&e.dependencies!==null&&As(e.dependencies)?(typeof f=="function"&&(er(t,a,f,n),Y=t.memoizedState),(Q=wa||yd(t,a,Q,n,L,Y,D)||e!==null&&e.dependencies!==null&&As(e.dependencies))?(U||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(n,Y,D),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(n,Y,D)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||r===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=Y),c.props=n,c.state=Y,c.context=D,n=Q):(typeof c.componentDidUpdate!="function"||r===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),n=!1)}return c=n,Js(e,t),n=(t.flags&128)!==0,c||n?(c=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&n?(t.child=hl(t,e.child,null,s),t.child=hl(t,null,a,s)):ct(e,t,a,s),t.memoizedState=c.state,e=t.child):e=fa(e,t,s),e}function Rd(e,t,a,n){return rl(),t.flags|=256,ct(e,t,a,n),t.child}var sr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cr(e){return{baseLanes:e,cachePool:So()}}function ir(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=At),e}function Bd(e,t,a){var n=t.pendingProps,s=!1,c=(t.flags&128)!==0,r;if((r=c)||(r=e!==null&&e.memoizedState===null?!1:(Ve.current&2)!==0),r&&(s=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(Te){if(s?_a(t):Ra(),(e=He)?(e=Qm(e,Ut),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Da!==null?{id:$t,overflow:Ft}:null,retryLane:536870912,hydrationErrors:null},a=ho(e),a.return=t,t.child=a,nt=t,He=null)):e=null,e===null)throw Ma(t);return Qr(e)?t.lanes=32:t.lanes=536870912,null}var f=n.children;return n=n.fallback,s?(Ra(),s=t.mode,f=$s({mode:"hidden",children:f},s),n=il(n,s,a,null),f.return=t,n.return=t,f.sibling=n,t.child=f,n=t.child,n.memoizedState=cr(a),n.childLanes=ir(e,r,a),t.memoizedState=sr,kn(null,n)):(_a(t),rr(t,f))}var D=e.memoizedState;if(D!==null&&(f=D.dehydrated,f!==null)){if(c)t.flags&256?(_a(t),t.flags&=-257,t=ur(e,t,a)):t.memoizedState!==null?(Ra(),t.child=e.child,t.flags|=128,t=null):(Ra(),f=n.fallback,s=t.mode,n=$s({mode:"visible",children:n.children},s),f=il(f,s,a,null),f.flags|=2,n.return=t,f.return=t,n.sibling=f,t.child=n,hl(t,e.child,null,a),n=t.child,n.memoizedState=cr(a),n.childLanes=ir(e,r,a),t.memoizedState=sr,t=kn(null,n));else if(_a(t),Qr(f)){if(r=f.nextSibling&&f.nextSibling.dataset,r)var U=r.dgst;r=U,n=Error(u(419)),n.stack="",n.digest=r,Cn({value:n,source:null,stack:null}),t=ur(e,t,a)}else if(We||ql(e,t,a,!1),r=(a&e.childLanes)!==0,We||r){if(r=Ue,r!==null&&(n=bu(r,a),n!==0&&n!==D.retryLane))throw D.retryLane=n,cl(e,n),bt(r,e,n),lr;Gr(f)||nc(),t=ur(e,t,a)}else Gr(f)?(t.flags|=192,t.child=e.child,t=null):(e=D.treeContext,He=Lt(f.nextSibling),nt=t,Te=!0,Ta=null,Ut=!1,e!==null&&xo(t,e),t=rr(t,n.children),t.flags|=4096);return t}return s?(Ra(),f=n.fallback,s=t.mode,D=e.child,U=D.sibling,n=ia(D,{mode:"hidden",children:n.children}),n.subtreeFlags=D.subtreeFlags&65011712,U!==null?f=ia(U,f):(f=il(f,s,a,null),f.flags|=2),f.return=t,n.return=t,n.sibling=f,t.child=n,kn(null,n),n=t.child,f=e.child.memoizedState,f===null?f=cr(a):(s=f.cachePool,s!==null?(D=$e._currentValue,s=s.parent!==D?{parent:D,pool:D}:s):s=So(),f={baseLanes:f.baseLanes|a,cachePool:s}),n.memoizedState=f,n.childLanes=ir(e,r,a),t.memoizedState=sr,kn(e.child,n)):(_a(t),a=e.child,e=a.sibling,a=ia(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a)}function rr(e,t){return t=$s({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function $s(e,t){return e=Et(22,e,null,t),e.lanes=0,e}function ur(e,t,a){return hl(t,e.child,null,a),e=rr(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function kd(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ci(e.return,t,a)}function or(e,t,a,n,s,c){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:s,treeForkCount:c}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=a,r.tailMode=s,r.treeForkCount=c)}function Ud(e,t,a){var n=t.pendingProps,s=n.revealOrder,c=n.tail;n=n.children;var r=Ve.current,f=(r&2)!==0;if(f?(r=r&1|2,t.flags|=128):r&=1,K(Ve,r),ct(e,t,n,a),n=Te?Sn:0,!f&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kd(e,a,t);else if(e.tag===19)kd(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(a=t.child,s=null;a!==null;)e=a.alternate,e!==null&&Us(e)===null&&(s=a),a=a.sibling;a=s,a===null?(s=t.child,t.child=null):(s=a.sibling,a.sibling=null),or(t,!1,s,a,c,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Us(e)===null){t.child=s;break}e=s.sibling,s.sibling=a,a=s,s=e}or(t,!0,a,null,c,n);break;case"together":or(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function fa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ua|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ql(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,a=ia(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ia(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function dr(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&As(e)))}function jp(e,t,a){switch(t.tag){case 3:re(t,t.stateNode.containerInfo),Aa(t,$e,e.memoizedState.cache),rl();break;case 27:case 5:pe(t);break;case 4:re(t,t.stateNode.containerInfo);break;case 10:Aa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ki(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(_a(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Bd(e,t,a):(_a(t),e=fa(e,t,a),e!==null?e.sibling:null);_a(t);break;case 19:var s=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(ql(e,t,a,!1),n=(a&t.childLanes)!==0),s){if(n)return Ud(e,t,a);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),K(Ve,Ve.current),n)break;return null;case 22:return t.lanes=0,Ad(e,t,a,t.pendingProps);case 24:Aa(t,$e,e.memoizedState.cache)}return fa(e,t,a)}function Hd(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)We=!0;else{if(!dr(e,a)&&(t.flags&128)===0)return We=!1,jp(e,t,a);We=(e.flags&131072)!==0}else We=!1,Te&&(t.flags&1048576)!==0&&go(t,Sn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=ml(t.elementType),t.type=e,typeof e=="function")gi(e)?(n=gl(e,n),t.tag=1,t=_d(null,t,e,n,a)):(t.tag=0,t=nr(null,t,e,n,a));else{if(e!=null){var s=e.$$typeof;if(s===_){t.tag=11,t=Dd(null,t,e,n,a);break e}else if(s===P){t.tag=14,t=Td(null,t,e,n,a);break e}}throw t=Ne(e)||e,Error(u(306,t,""))}}return t;case 0:return nr(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,s=gl(n,t.pendingProps),_d(e,t,n,s,a);case 3:e:{if(re(t,t.stateNode.containerInfo),e===null)throw Error(u(387));n=t.pendingProps;var c=t.memoizedState;s=c.element,Oi(e,t),On(t,n,null,a);var r=t.memoizedState;if(n=r.cache,Aa(t,$e,n),n!==c.cache&&Ei(t,[$e],a,!0),wn(),n=r.element,c.isDehydrated)if(c={element:n,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=Rd(e,t,n,a);break e}else if(n!==s){s=Rt(Error(u(424)),t),Cn(s),t=Rd(e,t,n,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,He=Lt(e.firstChild),nt=t,Te=!0,Ta=null,Ut=!0,a=Ao(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(rl(),n===s){t=fa(e,t,a);break e}ct(e,t,n,a)}t=t.child}return t;case 26:return Js(e,t),e===null?(a=$m(t.type,null,t.pendingProps,null))?t.memoizedState=a:Te||(a=t.type,e=t.pendingProps,n=dc(F.current).createElement(a),n[lt]=t,n[ht]=e,it(n,a,e),tt(n),t.stateNode=n):t.memoizedState=$m(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return pe(t),e===null&&Te&&(n=t.stateNode=Vm(t.type,t.pendingProps,F.current),nt=t,Ut=!0,s=He,Ga(t.type)?(Xr=s,He=Lt(n.firstChild)):He=s),ct(e,t,t.pendingProps.children,a),Js(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Te&&((s=n=He)&&(n=Wp(n,t.type,t.pendingProps,Ut),n!==null?(t.stateNode=n,nt=t,He=Lt(n.firstChild),Ut=!1,s=!0):s=!1),s||Ma(t)),pe(t),s=t.type,c=t.pendingProps,r=e!==null?e.memoizedProps:null,n=c.children,Lr(s,c)?n=null:r!==null&&Lr(s,r)&&(t.flags|=32),t.memoizedState!==null&&(s=Hi(e,t,mp,null,null,a),Wn._currentValue=s),Js(e,t),ct(e,t,n,a),t.child;case 6:return e===null&&Te&&((e=a=He)&&(a=Ip(a,t.pendingProps,Ut),a!==null?(t.stateNode=a,nt=t,He=null,e=!0):e=!1),e||Ma(t)),null;case 13:return Bd(e,t,a);case 4:return re(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=hl(t,null,n,a):ct(e,t,n,a),t.child;case 11:return Dd(e,t,t.type,t.pendingProps,a);case 7:return ct(e,t,t.pendingProps,a),t.child;case 8:return ct(e,t,t.pendingProps.children,a),t.child;case 12:return ct(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,Aa(t,t.type,n.value),ct(e,t,n.children,a),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,ol(t),s=st(s),n=n(s),t.flags|=1,ct(e,t,n,a),t.child;case 14:return Td(e,t,t.type,t.pendingProps,a);case 15:return Md(e,t,t.type,t.pendingProps,a);case 19:return Ud(e,t,a);case 31:return bp(e,t,a);case 22:return Ad(e,t,a,t.pendingProps);case 24:return ol(t),n=st($e),e===null?(s=Mi(),s===null&&(s=Ue,c=Di(),s.pooledCache=c,c.refCount++,c!==null&&(s.pooledCacheLanes|=a),s=c),t.memoizedState={parent:n,cache:s},wi(t),Aa(t,$e,s)):((e.lanes&a)!==0&&(Oi(e,t),On(t,null,null,a),wn()),s=e.memoizedState,c=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),Aa(t,$e,n)):(n=c.cache,Aa(t,$e,n),n!==s.cache&&Ei(t,[$e],a,!0))),ct(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function ha(e){e.flags|=4}function mr(e,t,a,n,s){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(s&335544128)===s)if(e.stateNode.complete)e.flags|=8192;else if(dm())e.flags|=8192;else throw fl=_s,Ai}else e.flags&=-16777217}function Ld(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ef(t))if(dm())e.flags|=8192;else throw fl=_s,Ai}function Fs(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?xu():536870912,e.lanes|=t,Il|=t)}function Un(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Le(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var s=e.child;s!==null;)a|=s.lanes|s.childLanes,n|=s.subtreeFlags&65011712,n|=s.flags&65011712,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)a|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function Np(e,t,a){var n=t.pendingProps;switch(bi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(t),null;case 1:return Le(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),oa($e),he(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ll(t)?ha(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ni())),Le(t),null;case 26:var s=t.type,c=t.memoizedState;return e===null?(ha(t),c!==null?(Le(t),Ld(t,c)):(Le(t),mr(t,s,null,n,a))):c?c!==e.memoizedState?(ha(t),Le(t),Ld(t,c)):(Le(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&ha(t),Le(t),mr(t,s,e,n,a)),null;case 27:if(xe(t),a=F.current,s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ha(t);else{if(!n){if(t.stateNode===null)throw Error(u(166));return Le(t),null}e=M.current,Ll(t)?yo(t):(e=Vm(s,n,a),t.stateNode=e,ha(t))}return Le(t),null;case 5:if(xe(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ha(t);else{if(!n){if(t.stateNode===null)throw Error(u(166));return Le(t),null}if(c=M.current,Ll(t))yo(t);else{var r=dc(F.current);switch(c){case 1:c=r.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:c=r.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":c=r.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":c=r.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":c=r.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof n.is=="string"?r.createElement("select",{is:n.is}):r.createElement("select"),n.multiple?c.multiple=!0:n.size&&(c.size=n.size);break;default:c=typeof n.is=="string"?r.createElement(s,{is:n.is}):r.createElement(s)}}c[lt]=t,c[ht]=n;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)c.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=c;e:switch(it(c,s,n),s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ha(t)}}return Le(t),mr(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&ha(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(u(166));if(e=F.current,Ll(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,s=nt,s!==null)switch(s.tag){case 27:case 5:n=s.memoizedProps}e[lt]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||Bm(e.nodeValue,a)),e||Ma(t,!0)}else e=dc(e).createTextNode(n),e[lt]=t,t.stateNode=e}return Le(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=Ll(t),a!==null){if(e===null){if(!n)throw Error(u(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[lt]=t}else rl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Le(t),e=!1}else a=Ni(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Tt(t),t):(Tt(t),null);if((t.flags&128)!==0)throw Error(u(558))}return Le(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(s=Ll(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(u(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(u(317));s[lt]=t}else rl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Le(t),s=!1}else s=Ni(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Tt(t),t):(Tt(t),null)}return Tt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,s=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(s=n.alternate.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==s&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Fs(t,t.updateQueue),Le(t),null);case 4:return he(),e===null&&Rr(t.stateNode.containerInfo),Le(t),null;case 10:return oa(t.type),Le(t),null;case 19:if(de(Ve),n=t.memoizedState,n===null)return Le(t),null;if(s=(t.flags&128)!==0,c=n.rendering,c===null)if(s)Un(n,!1);else{if(Ke!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=Us(e),c!==null){for(t.flags|=128,Un(n,!1),e=c.updateQueue,t.updateQueue=e,Fs(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)fo(a,e),a=a.sibling;return K(Ve,Ve.current&1|2),Te&&ra(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&Je()>tc&&(t.flags|=128,s=!0,Un(n,!1),t.lanes=4194304)}else{if(!s)if(e=Us(c),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Fs(t,e),Un(n,!0),n.tail===null&&n.tailMode==="hidden"&&!c.alternate&&!Te)return Le(t),null}else 2*Je()-n.renderingStartTime>tc&&a!==536870912&&(t.flags|=128,s=!0,Un(n,!1),t.lanes=4194304);n.isBackwards?(c.sibling=t.child,t.child=c):(e=n.last,e!==null?e.sibling=c:t.child=c,n.last=c)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=Je(),e.sibling=null,a=Ve.current,K(Ve,s?a&1|2:a&1),Te&&ra(t,n.treeForkCount),e):(Le(t),null);case 22:case 23:return Tt(t),Bi(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(Le(t),t.subtreeFlags&6&&(t.flags|=8192)):Le(t),a=t.updateQueue,a!==null&&Fs(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&de(dl),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),oa($e),Le(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function Sp(e,t){switch(bi(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return oa($e),he(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return xe(t),null;case 31:if(t.memoizedState!==null){if(Tt(t),t.alternate===null)throw Error(u(340));rl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Tt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));rl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return de(Ve),null;case 4:return he(),null;case 10:return oa(t.type),null;case 22:case 23:return Tt(t),Bi(),e!==null&&de(dl),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return oa($e),null;case 25:return null;default:return null}}function qd(e,t){switch(bi(t),t.tag){case 3:oa($e),he();break;case 26:case 27:case 5:xe(t);break;case 4:he();break;case 31:t.memoizedState!==null&&Tt(t);break;case 13:Tt(t);break;case 19:de(Ve);break;case 10:oa(t.type);break;case 22:case 23:Tt(t),Bi(),e!==null&&de(dl);break;case 24:oa($e)}}function Hn(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var s=n.next;a=s;do{if((a.tag&e)===e){n=void 0;var c=a.create,r=a.inst;n=c(),r.destroy=n}a=a.next}while(a!==s)}}catch(f){_e(t,t.return,f)}}function Ba(e,t,a){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var c=s.next;n=c;do{if((n.tag&e)===e){var r=n.inst,f=r.destroy;if(f!==void 0){r.destroy=void 0,s=t;var D=a,U=f;try{U()}catch(Q){_e(s,D,Q)}}}n=n.next}while(n!==c)}}catch(Q){_e(t,t.return,Q)}}function Yd(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Oo(t,a)}catch(n){_e(e,e.return,n)}}}function Gd(e,t,a){a.props=gl(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){_e(e,t,n)}}function Ln(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(s){_e(e,t,s)}}function Wt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(s){_e(e,t,s)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(s){_e(e,t,s)}else a.current=null}function Qd(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(s){_e(e,e.return,s)}}function fr(e,t,a){try{var n=e.stateNode;Kp(n,e.type,a,t),n[ht]=t}catch(s){_e(e,e.return,s)}}function Xd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ga(e.type)||e.tag===4}function hr(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ga(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pr(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=sa));else if(n!==4&&(n===27&&Ga(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(pr(e,t,a),e=e.sibling;e!==null;)pr(e,t,a),e=e.sibling}function Ws(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&Ga(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ws(e,t,a),e=e.sibling;e!==null;)Ws(e,t,a),e=e.sibling}function Kd(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);it(t,n,a),t[lt]=e,t[ht]=a}catch(c){_e(e,e.return,c)}}var pa=!1,Ie=!1,gr=!1,Vd=typeof WeakSet=="function"?WeakSet:Set,at=null;function Cp(e,t){if(e=e.containerInfo,Ur=yc,e=lo(e),ui(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var s=n.anchorOffset,c=n.focusNode;n=n.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var r=0,f=-1,D=-1,U=0,Q=0,J=e,L=null;t:for(;;){for(var Y;J!==a||s!==0&&J.nodeType!==3||(f=r+s),J!==c||n!==0&&J.nodeType!==3||(D=r+n),J.nodeType===3&&(r+=J.nodeValue.length),(Y=J.firstChild)!==null;)L=J,J=Y;for(;;){if(J===e)break t;if(L===a&&++U===s&&(f=r),L===c&&++Q===n&&(D=r),(Y=J.nextSibling)!==null)break;J=L,L=J.parentNode}J=Y}a=f===-1||D===-1?null:{start:f,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hr={focusedElem:e,selectionRange:a},yc=!1,at=t;at!==null;)if(t=at,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,at=e;else for(;at!==null;){switch(t=at,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)s=e[a],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,a=t,s=c.memoizedProps,c=c.memoizedState,n=a.stateNode;try{var se=gl(a.type,s);e=n.getSnapshotBeforeUpdate(se,c),n.__reactInternalSnapshotBeforeUpdate=e}catch(fe){_e(a,a.return,fe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Yr(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Yr(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,at=e;break}at=t.return}}function Zd(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:xa(e,a),n&4&&Hn(5,a);break;case 1:if(xa(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(r){_e(a,a.return,r)}else{var s=gl(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){_e(a,a.return,r)}}n&64&&Yd(a),n&512&&Ln(a,a.return);break;case 3:if(xa(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Oo(e,t)}catch(r){_e(a,a.return,r)}}break;case 27:t===null&&n&4&&Kd(a);case 26:case 5:xa(e,a),t===null&&n&4&&Qd(a),n&512&&Ln(a,a.return);break;case 12:xa(e,a);break;case 31:xa(e,a),n&4&&Fd(e,a);break;case 13:xa(e,a),n&4&&Wd(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=_p.bind(null,a),Pp(e,a))));break;case 22:if(n=a.memoizedState!==null||pa,!n){t=t!==null&&t.memoizedState!==null||Ie,s=pa;var c=Ie;pa=n,(Ie=t)&&!c?ya(e,a,(a.subtreeFlags&8772)!==0):xa(e,a),pa=s,Ie=c}break;case 30:break;default:xa(e,a)}}function Jd(e){var t=e.alternate;t!==null&&(e.alternate=null,Jd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Vc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var qe=null,gt=!1;function ga(e,t,a){for(a=a.child;a!==null;)$d(e,t,a),a=a.sibling}function $d(e,t,a){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(Pa,a)}catch{}switch(a.tag){case 26:Ie||Wt(a,t),ga(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ie||Wt(a,t);var n=qe,s=gt;Ga(a.type)&&(qe=a.stateNode,gt=!1),ga(e,t,a),Jn(a.stateNode),qe=n,gt=s;break;case 5:Ie||Wt(a,t);case 6:if(n=qe,s=gt,qe=null,ga(e,t,a),qe=n,gt=s,qe!==null)if(gt)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(a.stateNode)}catch(c){_e(a,t,c)}else try{qe.removeChild(a.stateNode)}catch(c){_e(a,t,c)}break;case 18:qe!==null&&(gt?(e=qe,Ym(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),cn(e)):Ym(qe,a.stateNode));break;case 4:n=qe,s=gt,qe=a.stateNode.containerInfo,gt=!0,ga(e,t,a),qe=n,gt=s;break;case 0:case 11:case 14:case 15:Ba(2,a,t),Ie||Ba(4,a,t),ga(e,t,a);break;case 1:Ie||(Wt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Gd(a,t,n)),ga(e,t,a);break;case 21:ga(e,t,a);break;case 22:Ie=(n=Ie)||a.memoizedState!==null,ga(e,t,a),Ie=n;break;default:ga(e,t,a)}}function Fd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{cn(e)}catch(a){_e(t,t.return,a)}}}function Wd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{cn(e)}catch(a){_e(t,t.return,a)}}function Ep(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Vd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Vd),t;default:throw Error(u(435,e.tag))}}function Is(e,t){var a=Ep(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var s=Rp.bind(null,e,n);n.then(s,s)}})}function xt(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var s=a[n],c=e,r=t,f=r;e:for(;f!==null;){switch(f.tag){case 27:if(Ga(f.type)){qe=f.stateNode,gt=!1;break e}break;case 5:qe=f.stateNode,gt=!1;break e;case 3:case 4:qe=f.stateNode.containerInfo,gt=!0;break e}f=f.return}if(qe===null)throw Error(u(160));$d(c,r,s),qe=null,gt=!1,c=s.alternate,c!==null&&(c.return=null),s.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Id(t,e),t=t.sibling}var Xt=null;function Id(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xt(t,e),yt(e),n&4&&(Ba(3,e,e.return),Hn(3,e),Ba(5,e,e.return));break;case 1:xt(t,e),yt(e),n&512&&(Ie||a===null||Wt(a,a.return)),n&64&&pa&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var s=Xt;if(xt(t,e),yt(e),n&512&&(Ie||a===null||Wt(a,a.return)),n&4){var c=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":c=s.getElementsByTagName("title")[0],(!c||c[mn]||c[lt]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=s.createElement(n),s.head.insertBefore(c,s.querySelector("head > title"))),it(c,n,a),c[lt]=e,tt(c),n=c;break e;case"link":var r=Im("link","href",s).get(n+(a.href||""));if(r){for(var f=0;f<r.length;f++)if(c=r[f],c.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&c.getAttribute("rel")===(a.rel==null?null:a.rel)&&c.getAttribute("title")===(a.title==null?null:a.title)&&c.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){r.splice(f,1);break t}}c=s.createElement(n),it(c,n,a),s.head.appendChild(c);break;case"meta":if(r=Im("meta","content",s).get(n+(a.content||""))){for(f=0;f<r.length;f++)if(c=r[f],c.getAttribute("content")===(a.content==null?null:""+a.content)&&c.getAttribute("name")===(a.name==null?null:a.name)&&c.getAttribute("property")===(a.property==null?null:a.property)&&c.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&c.getAttribute("charset")===(a.charSet==null?null:a.charSet)){r.splice(f,1);break t}}c=s.createElement(n),it(c,n,a),s.head.appendChild(c);break;default:throw Error(u(468,n))}c[lt]=e,tt(c),n=c}e.stateNode=n}else Pm(s,e.type,e.stateNode);else e.stateNode=Wm(s,n,e.memoizedProps);else c!==n?(c===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):c.count--,n===null?Pm(s,e.type,e.stateNode):Wm(s,n,e.memoizedProps)):n===null&&e.stateNode!==null&&fr(e,e.memoizedProps,a.memoizedProps)}break;case 27:xt(t,e),yt(e),n&512&&(Ie||a===null||Wt(a,a.return)),a!==null&&n&4&&fr(e,e.memoizedProps,a.memoizedProps);break;case 5:if(xt(t,e),yt(e),n&512&&(Ie||a===null||Wt(a,a.return)),e.flags&32){s=e.stateNode;try{Al(s,"")}catch(se){_e(e,e.return,se)}}n&4&&e.stateNode!=null&&(s=e.memoizedProps,fr(e,s,a!==null?a.memoizedProps:s)),n&1024&&(gr=!0);break;case 6:if(xt(t,e),yt(e),n&4){if(e.stateNode===null)throw Error(u(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(se){_e(e,e.return,se)}}break;case 3:if(hc=null,s=Xt,Xt=mc(t.containerInfo),xt(t,e),Xt=s,yt(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{cn(t.containerInfo)}catch(se){_e(e,e.return,se)}gr&&(gr=!1,Pd(e));break;case 4:n=Xt,Xt=mc(e.stateNode.containerInfo),xt(t,e),yt(e),Xt=n;break;case 12:xt(t,e),yt(e);break;case 31:xt(t,e),yt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Is(e,n)));break;case 13:xt(t,e),yt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ec=Je()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Is(e,n)));break;case 22:s=e.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,U=pa,Q=Ie;if(pa=U||s,Ie=Q||D,xt(t,e),Ie=Q,pa=U,yt(e),n&8192)e:for(t=e.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(a===null||D||pa||Ie||xl(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){D=a=t;try{if(c=D.stateNode,s)r=c.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{f=D.stateNode;var J=D.memoizedProps.style,L=J!=null&&J.hasOwnProperty("display")?J.display:null;f.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(se){_e(D,D.return,se)}}}else if(t.tag===6){if(a===null){D=t;try{D.stateNode.nodeValue=s?"":D.memoizedProps}catch(se){_e(D,D.return,se)}}}else if(t.tag===18){if(a===null){D=t;try{var Y=D.stateNode;s?Gm(Y,!0):Gm(D.stateNode,!1)}catch(se){_e(D,D.return,se)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Is(e,a))));break;case 19:xt(t,e),yt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Is(e,n)));break;case 30:break;case 21:break;default:xt(t,e),yt(e)}}function yt(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(Xd(n)){a=n;break}n=n.return}if(a==null)throw Error(u(160));switch(a.tag){case 27:var s=a.stateNode,c=hr(e);Ws(e,c,s);break;case 5:var r=a.stateNode;a.flags&32&&(Al(r,""),a.flags&=-33);var f=hr(e);Ws(e,f,r);break;case 3:case 4:var D=a.stateNode.containerInfo,U=hr(e);pr(e,U,D);break;default:throw Error(u(161))}}catch(Q){_e(e,e.return,Q)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Pd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Pd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function xa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Zd(e,t.alternate,t),t=t.sibling}function xl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ba(4,t,t.return),xl(t);break;case 1:Wt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Gd(t,t.return,a),xl(t);break;case 27:Jn(t.stateNode);case 26:case 5:Wt(t,t.return),xl(t);break;case 22:t.memoizedState===null&&xl(t);break;case 30:xl(t);break;default:xl(t)}e=e.sibling}}function ya(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,s=e,c=t,r=c.flags;switch(c.tag){case 0:case 11:case 15:ya(s,c,a),Hn(4,c);break;case 1:if(ya(s,c,a),n=c,s=n.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(U){_e(n,n.return,U)}if(n=c,s=n.updateQueue,s!==null){var f=n.stateNode;try{var D=s.shared.hiddenCallbacks;if(D!==null)for(s.shared.hiddenCallbacks=null,s=0;s<D.length;s++)wo(D[s],f)}catch(U){_e(n,n.return,U)}}a&&r&64&&Yd(c),Ln(c,c.return);break;case 27:Kd(c);case 26:case 5:ya(s,c,a),a&&n===null&&r&4&&Qd(c),Ln(c,c.return);break;case 12:ya(s,c,a);break;case 31:ya(s,c,a),a&&r&4&&Fd(s,c);break;case 13:ya(s,c,a),a&&r&4&&Wd(s,c);break;case 22:c.memoizedState===null&&ya(s,c,a),Ln(c,c.return);break;case 30:break;default:ya(s,c,a)}t=t.sibling}}function xr(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&En(a))}function yr(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&En(e))}function Kt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)em(e,t,a,n),t=t.sibling}function em(e,t,a,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Kt(e,t,a,n),s&2048&&Hn(9,t);break;case 1:Kt(e,t,a,n);break;case 3:Kt(e,t,a,n),s&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&En(e)));break;case 12:if(s&2048){Kt(e,t,a,n),e=t.stateNode;try{var c=t.memoizedProps,r=c.id,f=c.onPostCommit;typeof f=="function"&&f(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(D){_e(t,t.return,D)}}else Kt(e,t,a,n);break;case 31:Kt(e,t,a,n);break;case 13:Kt(e,t,a,n);break;case 23:break;case 22:c=t.stateNode,r=t.alternate,t.memoizedState!==null?c._visibility&2?Kt(e,t,a,n):qn(e,t):c._visibility&2?Kt(e,t,a,n):(c._visibility|=2,$l(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),s&2048&&xr(r,t);break;case 24:Kt(e,t,a,n),s&2048&&yr(t.alternate,t);break;default:Kt(e,t,a,n)}}function $l(e,t,a,n,s){for(s=s&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,r=t,f=a,D=n,U=r.flags;switch(r.tag){case 0:case 11:case 15:$l(c,r,f,D,s),Hn(8,r);break;case 23:break;case 22:var Q=r.stateNode;r.memoizedState!==null?Q._visibility&2?$l(c,r,f,D,s):qn(c,r):(Q._visibility|=2,$l(c,r,f,D,s)),s&&U&2048&&xr(r.alternate,r);break;case 24:$l(c,r,f,D,s),s&&U&2048&&yr(r.alternate,r);break;default:$l(c,r,f,D,s)}t=t.sibling}}function qn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,s=n.flags;switch(n.tag){case 22:qn(a,n),s&2048&&xr(n.alternate,n);break;case 24:qn(a,n),s&2048&&yr(n.alternate,n);break;default:qn(a,n)}t=t.sibling}}var Yn=8192;function Fl(e,t,a){if(e.subtreeFlags&Yn)for(e=e.child;e!==null;)tm(e,t,a),e=e.sibling}function tm(e,t,a){switch(e.tag){case 26:Fl(e,t,a),e.flags&Yn&&e.memoizedState!==null&&dg(a,Xt,e.memoizedState,e.memoizedProps);break;case 5:Fl(e,t,a);break;case 3:case 4:var n=Xt;Xt=mc(e.stateNode.containerInfo),Fl(e,t,a),Xt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Yn,Yn=16777216,Fl(e,t,a),Yn=n):Fl(e,t,a));break;default:Fl(e,t,a)}}function am(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Gn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];at=n,nm(n,e)}am(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)lm(e),e=e.sibling}function lm(e){switch(e.tag){case 0:case 11:case 15:Gn(e),e.flags&2048&&Ba(9,e,e.return);break;case 3:Gn(e);break;case 12:Gn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ps(e)):Gn(e);break;default:Gn(e)}}function Ps(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];at=n,nm(n,e)}am(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ba(8,t,t.return),Ps(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Ps(t));break;default:Ps(t)}e=e.sibling}}function nm(e,t){for(;at!==null;){var a=at;switch(a.tag){case 0:case 11:case 15:Ba(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:En(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,at=n;else e:for(a=e;at!==null;){n=at;var s=n.sibling,c=n.return;if(Jd(n),n===a){at=null;break e}if(s!==null){s.return=c,at=s;break e}at=c}}}var Dp={getCacheForType:function(e){var t=st($e),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return st($e).controller.signal}},Tp=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Ue=null,Se=null,Ee=0,ze=0,Mt=null,ka=!1,Wl=!1,vr=!1,va=0,Ke=0,Ua=0,yl=0,br=0,At=0,Il=0,Qn=null,vt=null,jr=!1,ec=0,sm=0,tc=1/0,ac=null,Ha=null,Pe=0,La=null,Pl=null,ba=0,Nr=0,Sr=null,cm=null,Xn=0,Cr=null;function wt(){return(Oe&2)!==0&&Ee!==0?Ee&-Ee:H.T!==null?wr():ju()}function im(){if(At===0)if((Ee&536870912)===0||Te){var e=os;os<<=1,(os&3932160)===0&&(os=262144),At=e}else At=536870912;return e=Dt.current,e!==null&&(e.flags|=32),At}function bt(e,t,a){(e===Ue&&(ze===2||ze===9)||e.cancelPendingCommit!==null)&&(en(e,0),qa(e,Ee,At,!1)),dn(e,a),((Oe&2)===0||e!==Ue)&&(e===Ue&&((Oe&2)===0&&(yl|=a),Ke===4&&qa(e,Ee,At,!1)),It(e))}function rm(e,t,a){if((Oe&6)!==0)throw Error(u(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||on(e,t),s=n?wp(e,t):Dr(e,t,!0),c=n;do{if(s===0){Wl&&!n&&qa(e,t,0,!1);break}else{if(a=e.current.alternate,c&&!Mp(a)){s=Dr(e,t,!1),c=!1;continue}if(s===2){if(c=t,e.errorRecoveryDisabledLanes&c)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;e:{var f=e;s=Qn;var D=f.current.memoizedState.isDehydrated;if(D&&(en(f,r).flags|=256),r=Dr(f,r,!1),r!==2){if(vr&&!D){f.errorRecoveryDisabledLanes|=c,yl|=c,s=4;break e}c=vt,vt=s,c!==null&&(vt===null?vt=c:vt.push.apply(vt,c))}s=r}if(c=!1,s!==2)continue}}if(s===1){en(e,0),qa(e,t,0,!0);break}e:{switch(n=e,c=s,c){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:qa(n,t,At,!ka);break e;case 2:vt=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(s=ec+300-Je(),10<s)){if(qa(n,t,At,!ka),ms(n,0,!0)!==0)break e;ba=t,n.timeoutHandle=Lm(um.bind(null,n,a,vt,ac,jr,t,At,yl,Il,ka,c,"Throttled",-0,0),s);break e}um(n,a,vt,ac,jr,t,At,yl,Il,ka,c,null,-0,0)}}break}while(!0);It(e)}function um(e,t,a,n,s,c,r,f,D,U,Q,J,L,Y){if(e.timeoutHandle=-1,J=t.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sa},tm(t,c,J);var se=(c&62914560)===c?ec-Je():(c&4194048)===c?sm-Je():0;if(se=mg(J,se),se!==null){ba=c,e.cancelPendingCommit=se(xm.bind(null,e,t,c,a,n,s,r,f,D,Q,J,null,L,Y)),qa(e,c,r,!U);return}}xm(e,t,c,a,n,s,r,f,D)}function Mp(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var s=a[n],c=s.getSnapshot;s=s.value;try{if(!Ct(c(),s))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qa(e,t,a,n){t&=~br,t&=~yl,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var c=31-W(s),r=1<<c;n[c]=-1,s&=~r}a!==0&&yu(e,a,t)}function lc(){return(Oe&6)===0?(Kn(0),!1):!0}function Er(){if(Se!==null){if(ze===0)var e=Se.return;else e=Se,ua=ul=null,Yi(e),Xl=null,Tn=0,e=Se;for(;e!==null;)qd(e.alternate,e),e=e.return;Se=null}}function en(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Jp(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ba=0,Er(),Ue=e,Se=a=ia(e.current,null),Ee=t,ze=0,Mt=null,ka=!1,Wl=on(e,t),vr=!1,Il=At=br=yl=Ua=Ke=0,vt=Qn=null,jr=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var s=31-W(n),c=1<<s;t|=e[s],n&=~c}return va=t,Cs(),a}function om(e,t){ye=null,H.H=Bn,t===Ql||t===zs?(t=Do(),ze=3):t===Ai?(t=Do(),ze=4):ze=t===lr?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Mt=t,Se===null&&(Ke=1,Vs(e,Rt(t,e.current)))}function dm(){var e=Dt.current;return e===null?!0:(Ee&4194048)===Ee?Ht===null:(Ee&62914560)===Ee||(Ee&536870912)!==0?e===Ht:!1}function mm(){var e=H.H;return H.H=Bn,e===null?Bn:e}function fm(){var e=H.A;return H.A=Dp,e}function nc(){Ke=4,ka||(Ee&4194048)!==Ee&&Dt.current!==null||(Wl=!0),(Ua&134217727)===0&&(yl&134217727)===0||Ue===null||qa(Ue,Ee,At,!1)}function Dr(e,t,a){var n=Oe;Oe|=2;var s=mm(),c=fm();(Ue!==e||Ee!==t)&&(ac=null,en(e,t)),t=!1;var r=Ke;e:do try{if(ze!==0&&Se!==null){var f=Se,D=Mt;switch(ze){case 8:Er(),r=6;break e;case 3:case 2:case 9:case 6:Dt.current===null&&(t=!0);var U=ze;if(ze=0,Mt=null,tn(e,f,D,U),a&&Wl){r=0;break e}break;default:U=ze,ze=0,Mt=null,tn(e,f,D,U)}}Ap(),r=Ke;break}catch(Q){om(e,Q)}while(!0);return t&&e.shellSuspendCounter++,ua=ul=null,Oe=n,H.H=s,H.A=c,Se===null&&(Ue=null,Ee=0,Cs()),r}function Ap(){for(;Se!==null;)hm(Se)}function wp(e,t){var a=Oe;Oe|=2;var n=mm(),s=fm();Ue!==e||Ee!==t?(ac=null,tc=Je()+500,en(e,t)):Wl=on(e,t);e:do try{if(ze!==0&&Se!==null){t=Se;var c=Mt;t:switch(ze){case 1:ze=0,Mt=null,tn(e,t,c,1);break;case 2:case 9:if(Co(c)){ze=0,Mt=null,pm(t);break}t=function(){ze!==2&&ze!==9||Ue!==e||(ze=7),It(e)},c.then(t,t);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:Co(c)?(ze=0,Mt=null,pm(t)):(ze=0,Mt=null,tn(e,t,c,7));break;case 5:var r=null;switch(Se.tag){case 26:r=Se.memoizedState;case 5:case 27:var f=Se;if(r?ef(r):f.stateNode.complete){ze=0,Mt=null;var D=f.sibling;if(D!==null)Se=D;else{var U=f.return;U!==null?(Se=U,sc(U)):Se=null}break t}}ze=0,Mt=null,tn(e,t,c,5);break;case 6:ze=0,Mt=null,tn(e,t,c,6);break;case 8:Er(),Ke=6;break e;default:throw Error(u(462))}}Op();break}catch(Q){om(e,Q)}while(!0);return ua=ul=null,H.H=n,H.A=s,Oe=a,Se!==null?0:(Ue=null,Ee=0,Cs(),Ke)}function Op(){for(;Se!==null&&!St();)hm(Se)}function hm(e){var t=Hd(e.alternate,e,va);e.memoizedProps=e.pendingProps,t===null?sc(e):Se=t}function pm(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=zd(a,t,t.pendingProps,t.type,void 0,Ee);break;case 11:t=zd(a,t,t.pendingProps,t.type.render,t.ref,Ee);break;case 5:Yi(t);default:qd(a,t),t=Se=fo(t,va),t=Hd(a,t,va)}e.memoizedProps=e.pendingProps,t===null?sc(e):Se=t}function tn(e,t,a,n){ua=ul=null,Yi(t),Xl=null,Tn=0;var s=t.return;try{if(vp(e,s,t,a,Ee)){Ke=1,Vs(e,Rt(a,e.current)),Se=null;return}}catch(c){if(s!==null)throw Se=s,c;Ke=1,Vs(e,Rt(a,e.current)),Se=null;return}t.flags&32768?(Te||n===1?e=!0:Wl||(Ee&536870912)!==0?e=!1:(ka=e=!0,(n===2||n===9||n===3||n===6)&&(n=Dt.current,n!==null&&n.tag===13&&(n.flags|=16384))),gm(t,e)):sc(t)}function sc(e){var t=e;do{if((t.flags&32768)!==0){gm(t,ka);return}e=t.return;var a=Np(t.alternate,t,va);if(a!==null){Se=a;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Ke===0&&(Ke=5)}function gm(e,t){do{var a=Sp(e.alternate,e);if(a!==null){a.flags&=32767,Se=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Se=e;return}Se=e=a}while(e!==null);Ke=6,Se=null}function xm(e,t,a,n,s,c,r,f,D){e.cancelPendingCommit=null;do cc();while(Pe!==0);if((Oe&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(c=t.lanes|t.childLanes,c|=hi,oh(e,a,c,r,f,D),e===Ue&&(Se=Ue=null,Ee=0),Pl=t,La=e,ba=a,Nr=c,Sr=s,cm=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Bp(jl,function(){return Nm(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=H.T,H.T=null,s=z.p,z.p=2,r=Oe,Oe|=4;try{Cp(e,t,a)}finally{Oe=r,z.p=s,H.T=n}}Pe=1,ym(),vm(),bm()}}function ym(){if(Pe===1){Pe=0;var e=La,t=Pl,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var n=z.p;z.p=2;var s=Oe;Oe|=4;try{Id(t,e);var c=Hr,r=lo(e.containerInfo),f=c.focusedElem,D=c.selectionRange;if(r!==f&&f&&f.ownerDocument&&ao(f.ownerDocument.documentElement,f)){if(D!==null&&ui(f)){var U=D.start,Q=D.end;if(Q===void 0&&(Q=U),"selectionStart"in f)f.selectionStart=U,f.selectionEnd=Math.min(Q,f.value.length);else{var J=f.ownerDocument||document,L=J&&J.defaultView||window;if(L.getSelection){var Y=L.getSelection(),se=f.textContent.length,fe=Math.min(D.start,se),ke=D.end===void 0?fe:Math.min(D.end,se);!Y.extend&&fe>ke&&(r=ke,ke=fe,fe=r);var B=to(f,fe),O=to(f,ke);if(B&&O&&(Y.rangeCount!==1||Y.anchorNode!==B.node||Y.anchorOffset!==B.offset||Y.focusNode!==O.node||Y.focusOffset!==O.offset)){var k=J.createRange();k.setStart(B.node,B.offset),Y.removeAllRanges(),fe>ke?(Y.addRange(k),Y.extend(O.node,O.offset)):(k.setEnd(O.node,O.offset),Y.addRange(k))}}}}for(J=[],Y=f;Y=Y.parentNode;)Y.nodeType===1&&J.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<J.length;f++){var V=J[f];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}yc=!!Ur,Hr=Ur=null}finally{Oe=s,z.p=n,H.T=a}}e.current=t,Pe=2}}function vm(){if(Pe===2){Pe=0;var e=La,t=Pl,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var n=z.p;z.p=2;var s=Oe;Oe|=4;try{Zd(e,t.alternate,t)}finally{Oe=s,z.p=n,H.T=a}}Pe=3}}function bm(){if(Pe===4||Pe===3){Pe=0,la();var e=La,t=Pl,a=ba,n=cm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Pe=5:(Pe=0,Pl=La=null,jm(e,e.pendingLanes));var s=e.pendingLanes;if(s===0&&(Ha=null),Xc(a),t=t.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(Pa,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=H.T,s=z.p,z.p=2,H.T=null;try{for(var c=e.onRecoverableError,r=0;r<n.length;r++){var f=n[r];c(f.value,{componentStack:f.stack})}}finally{H.T=t,z.p=s}}(ba&3)!==0&&cc(),It(e),s=e.pendingLanes,(a&261930)!==0&&(s&42)!==0?e===Cr?Xn++:(Xn=0,Cr=e):Xn=0,Kn(0)}}function jm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,En(t)))}function cc(){return ym(),vm(),bm(),Nm()}function Nm(){if(Pe!==5)return!1;var e=La,t=Nr;Nr=0;var a=Xc(ba),n=H.T,s=z.p;try{z.p=32>a?32:a,H.T=null,a=Sr,Sr=null;var c=La,r=ba;if(Pe=0,Pl=La=null,ba=0,(Oe&6)!==0)throw Error(u(331));var f=Oe;if(Oe|=4,lm(c.current),em(c,c.current,r,a),Oe=f,Kn(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(Pa,c)}catch{}return!0}finally{z.p=s,H.T=n,jm(e,t)}}function Sm(e,t,a){t=Rt(a,t),t=ar(e.stateNode,t,2),e=za(e,t,2),e!==null&&(dn(e,2),It(e))}function _e(e,t,a){if(e.tag===3)Sm(e,e,a);else for(;t!==null;){if(t.tag===3){Sm(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ha===null||!Ha.has(n))){e=Rt(a,e),a=Cd(2),n=za(t,a,2),n!==null&&(Ed(a,n,t,e),dn(n,2),It(n));break}}t=t.return}}function Tr(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new Tp;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(a)||(vr=!0,s.add(a),e=zp.bind(null,e,t,a),t.then(e,e))}function zp(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ue===e&&(Ee&a)===a&&(Ke===4||Ke===3&&(Ee&62914560)===Ee&&300>Je()-ec?(Oe&2)===0&&en(e,0):br|=a,Il===Ee&&(Il=0)),It(e)}function Cm(e,t){t===0&&(t=xu()),e=cl(e,t),e!==null&&(dn(e,t),It(e))}function _p(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Cm(e,a)}function Rp(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(a=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(u(314))}n!==null&&n.delete(t),Cm(e,a)}function Bp(e,t){return Ia(e,t)}var ic=null,an=null,Mr=!1,rc=!1,Ar=!1,Ya=0;function It(e){e!==an&&e.next===null&&(an===null?ic=an=e:an=an.next=e),rc=!0,Mr||(Mr=!0,Up())}function Kn(e,t){if(!Ar&&rc){Ar=!0;do for(var a=!1,n=ic;n!==null;){if(e!==0){var s=n.pendingLanes;if(s===0)var c=0;else{var r=n.suspendedLanes,f=n.pingedLanes;c=(1<<31-W(42|e)+1)-1,c&=s&~(r&~f),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(a=!0,Mm(n,c))}else c=Ee,c=ms(n,n===Ue?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(c&3)===0||on(n,c)||(a=!0,Mm(n,c));n=n.next}while(a);Ar=!1}}function kp(){Em()}function Em(){rc=Mr=!1;var e=0;Ya!==0&&Zp()&&(e=Ya);for(var t=Je(),a=null,n=ic;n!==null;){var s=n.next,c=Dm(n,t);c===0?(n.next=null,a===null?ic=s:a.next=s,s===null&&(an=a)):(a=n,(e!==0||(c&3)!==0)&&(rc=!0)),n=s}Pe!==0&&Pe!==5||Kn(e),Ya!==0&&(Ya=0)}function Dm(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var r=31-W(c),f=1<<r,D=s[r];D===-1?((f&a)===0||(f&n)!==0)&&(s[r]=uh(f,t)):D<=t&&(e.expiredLanes|=f),c&=~f}if(t=Ue,a=Ee,a=ms(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(ze===2||ze===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Yt(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||on(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&Yt(n),Xc(a)){case 2:case 8:a=rs;break;case 32:a=jl;break;case 268435456:a=us;break;default:a=jl}return n=Tm.bind(null,e),a=Ia(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&Yt(n),e.callbackPriority=2,e.callbackNode=null,2}function Tm(e,t){if(Pe!==0&&Pe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(cc()&&e.callbackNode!==a)return null;var n=Ee;return n=ms(e,e===Ue?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(rm(e,n,t),Dm(e,Je()),e.callbackNode!=null&&e.callbackNode===a?Tm.bind(null,e):null)}function Mm(e,t){if(cc())return null;rm(e,t,!0)}function Up(){$p(function(){(Oe&6)!==0?Ia(is,kp):Em()})}function wr(){if(Ya===0){var e=Yl;e===0&&(e=el,el<<=1,(el&261888)===0&&(el=256)),Ya=e}return Ya}function Am(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:gs(""+e)}function wm(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Hp(e,t,a,n,s){if(t==="submit"&&a&&a.stateNode===s){var c=Am((s[ht]||null).action),r=n.submitter;r&&(t=(t=r[ht]||null)?Am(t.formAction):r.getAttribute("formAction"),t!==null&&(c=t,r=null));var f=new bs("action","action",null,n,s);e.push({event:f,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ya!==0){var D=r?wm(s,r):new FormData(s);Fi(a,{pending:!0,data:D,method:s.method,action:c},null,D)}}else typeof c=="function"&&(f.preventDefault(),D=r?wm(s,r):new FormData(s),Fi(a,{pending:!0,data:D,method:s.method,action:c},c,D))},currentTarget:s}]})}}for(var Or=0;Or<fi.length;Or++){var zr=fi[Or],Lp=zr.toLowerCase(),qp=zr[0].toUpperCase()+zr.slice(1);Qt(Lp,"on"+qp)}Qt(co,"onAnimationEnd"),Qt(io,"onAnimationIteration"),Qt(ro,"onAnimationStart"),Qt("dblclick","onDoubleClick"),Qt("focusin","onFocus"),Qt("focusout","onBlur"),Qt(ap,"onTransitionRun"),Qt(lp,"onTransitionStart"),Qt(np,"onTransitionCancel"),Qt(uo,"onTransitionEnd"),Tl("onMouseEnter",["mouseout","mouseover"]),Tl("onMouseLeave",["mouseout","mouseover"]),Tl("onPointerEnter",["pointerout","pointerover"]),Tl("onPointerLeave",["pointerout","pointerover"]),al("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),al("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),al("onBeforeInput",["compositionend","keypress","textInput","paste"]),al("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),al("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),al("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vn));function Om(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],s=n.event;n=n.listeners;e:{var c=void 0;if(t)for(var r=n.length-1;0<=r;r--){var f=n[r],D=f.instance,U=f.currentTarget;if(f=f.listener,D!==c&&s.isPropagationStopped())break e;c=f,s.currentTarget=U;try{c(s)}catch(Q){Ss(Q)}s.currentTarget=null,c=D}else for(r=0;r<n.length;r++){if(f=n[r],D=f.instance,U=f.currentTarget,f=f.listener,D!==c&&s.isPropagationStopped())break e;c=f,s.currentTarget=U;try{c(s)}catch(Q){Ss(Q)}s.currentTarget=null,c=D}}}}function Ce(e,t){var a=t[Kc];a===void 0&&(a=t[Kc]=new Set);var n=e+"__bubble";a.has(n)||(zm(t,e,2,!1),a.add(n))}function _r(e,t,a){var n=0;t&&(n|=4),zm(a,e,n,t)}var uc="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){if(!e[uc]){e[uc]=!0,Cu.forEach(function(a){a!=="selectionchange"&&(Yp.has(a)||_r(a,!1,e),_r(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uc]||(t[uc]=!0,_r("selectionchange",!1,t))}}function zm(e,t,a,n){switch(rf(t)){case 2:var s=pg;break;case 8:s=gg;break;default:s=$r}a=s.bind(null,t,a,e),s=void 0,!ei||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,a,{capture:!0,passive:s}):e.addEventListener(t,a,!0):s!==void 0?e.addEventListener(t,a,{passive:s}):e.addEventListener(t,a,!1)}function Br(e,t,a,n,s){var c=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var r=n.tag;if(r===3||r===4){var f=n.stateNode.containerInfo;if(f===s)break;if(r===4)for(r=n.return;r!==null;){var D=r.tag;if((D===3||D===4)&&r.stateNode.containerInfo===s)return;r=r.return}for(;f!==null;){if(r=Cl(f),r===null)return;if(D=r.tag,D===5||D===6||D===26||D===27){n=c=r;continue e}f=f.parentNode}}n=n.return}ku(function(){var U=c,Q=Ic(a),J=[];e:{var L=oo.get(e);if(L!==void 0){var Y=bs,se=e;switch(e){case"keypress":if(ys(a)===0)break e;case"keydown":case"keyup":Y=Rh;break;case"focusin":se="focus",Y=ni;break;case"focusout":se="blur",Y=ni;break;case"beforeblur":case"afterblur":Y=ni;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Nh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Uh;break;case co:case io:case ro:Y=Eh;break;case uo:Y=Lh;break;case"scroll":case"scrollend":Y=bh;break;case"wheel":Y=Yh;break;case"copy":case"cut":case"paste":Y=Th;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Yu;break;case"toggle":case"beforetoggle":Y=Qh}var fe=(t&4)!==0,ke=!fe&&(e==="scroll"||e==="scrollend"),B=fe?L!==null?L+"Capture":null:L;fe=[];for(var O=U,k;O!==null;){var V=O;if(k=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||k===null||B===null||(V=hn(O,B),V!=null&&fe.push(Zn(O,V,k))),ke)break;O=O.return}0<fe.length&&(L=new Y(L,se,null,a,Q),J.push({event:L,listeners:fe}))}}if((t&7)===0){e:{if(L=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",L&&a!==Wc&&(se=a.relatedTarget||a.fromElement)&&(Cl(se)||se[Sl]))break e;if((Y||L)&&(L=Q.window===Q?Q:(L=Q.ownerDocument)?L.defaultView||L.parentWindow:window,Y?(se=a.relatedTarget||a.toElement,Y=U,se=se?Cl(se):null,se!==null&&(ke=x(se),fe=se.tag,se!==ke||fe!==5&&fe!==27&&fe!==6)&&(se=null)):(Y=null,se=U),Y!==se)){if(fe=Lu,V="onMouseLeave",B="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(fe=Yu,V="onPointerLeave",B="onPointerEnter",O="pointer"),ke=Y==null?L:fn(Y),k=se==null?L:fn(se),L=new fe(V,O+"leave",Y,a,Q),L.target=ke,L.relatedTarget=k,V=null,Cl(Q)===U&&(fe=new fe(B,O+"enter",se,a,Q),fe.target=k,fe.relatedTarget=ke,V=fe),ke=V,Y&&se)t:{for(fe=Gp,B=Y,O=se,k=0,V=B;V;V=fe(V))k++;V=0;for(var me=O;me;me=fe(me))V++;for(;0<k-V;)B=fe(B),k--;for(;0<V-k;)O=fe(O),V--;for(;k--;){if(B===O||O!==null&&B===O.alternate){fe=B;break t}B=fe(B),O=fe(O)}fe=null}else fe=null;Y!==null&&_m(J,L,Y,fe,!1),se!==null&&ke!==null&&_m(J,ke,se,fe,!0)}}e:{if(L=U?fn(U):window,Y=L.nodeName&&L.nodeName.toLowerCase(),Y==="select"||Y==="input"&&L.type==="file")var Ae=$u;else if(Zu(L))if(Fu)Ae=Ph;else{Ae=Wh;var ue=Fh}else Y=L.nodeName,!Y||Y.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?U&&Fc(U.elementType)&&(Ae=$u):Ae=Ih;if(Ae&&(Ae=Ae(e,U))){Ju(J,Ae,a,Q);break e}ue&&ue(e,L,U),e==="focusout"&&U&&L.type==="number"&&U.memoizedProps.value!=null&&$c(L,"number",L.value)}switch(ue=U?fn(U):window,e){case"focusin":(Zu(ue)||ue.contentEditable==="true")&&(_l=ue,oi=U,Nn=null);break;case"focusout":Nn=oi=_l=null;break;case"mousedown":di=!0;break;case"contextmenu":case"mouseup":case"dragend":di=!1,no(J,a,Q);break;case"selectionchange":if(tp)break;case"keydown":case"keyup":no(J,a,Q)}var ve;if(ci)e:{switch(e){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else zl?Ku(e,a)&&(De="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(Gu&&a.locale!=="ko"&&(zl||De!=="onCompositionStart"?De==="onCompositionEnd"&&zl&&(ve=Uu()):(Ea=Q,ti="value"in Ea?Ea.value:Ea.textContent,zl=!0)),ue=oc(U,De),0<ue.length&&(De=new qu(De,e,null,a,Q),J.push({event:De,listeners:ue}),ve?De.data=ve:(ve=Vu(a),ve!==null&&(De.data=ve)))),(ve=Kh?Vh(e,a):Zh(e,a))&&(De=oc(U,"onBeforeInput"),0<De.length&&(ue=new qu("onBeforeInput","beforeinput",null,a,Q),J.push({event:ue,listeners:De}),ue.data=ve)),Hp(J,e,U,a,Q)}Om(J,t)})}function Zn(e,t,a){return{instance:e,listener:t,currentTarget:a}}function oc(e,t){for(var a=t+"Capture",n=[];e!==null;){var s=e,c=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||c===null||(s=hn(e,a),s!=null&&n.unshift(Zn(e,s,c)),s=hn(e,t),s!=null&&n.push(Zn(e,s,c))),e.tag===3)return n;e=e.return}return[]}function Gp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function _m(e,t,a,n,s){for(var c=t._reactName,r=[];a!==null&&a!==n;){var f=a,D=f.alternate,U=f.stateNode;if(f=f.tag,D!==null&&D===n)break;f!==5&&f!==26&&f!==27||U===null||(D=U,s?(U=hn(a,c),U!=null&&r.unshift(Zn(a,U,D))):s||(U=hn(a,c),U!=null&&r.push(Zn(a,U,D)))),a=a.return}r.length!==0&&e.push({event:t,listeners:r})}var Qp=/\r\n?/g,Xp=/\u0000|\uFFFD/g;function Rm(e){return(typeof e=="string"?e:""+e).replace(Qp,`
`).replace(Xp,"")}function Bm(e,t){return t=Rm(t),Rm(e)===t}function Be(e,t,a,n,s,c){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Al(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Al(e,""+n);break;case"className":hs(e,"class",n);break;case"tabIndex":hs(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(e,a,n);break;case"style":Ru(e,n,c);break;case"data":if(t!=="object"){hs(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=gs(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(a==="formAction"?(t!=="input"&&Be(e,t,"name",s.name,s,null),Be(e,t,"formEncType",s.formEncType,s,null),Be(e,t,"formMethod",s.formMethod,s,null),Be(e,t,"formTarget",s.formTarget,s,null)):(Be(e,t,"encType",s.encType,s,null),Be(e,t,"method",s.method,s,null),Be(e,t,"target",s.target,s,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=gs(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=sa);break;case"onScroll":n!=null&&Ce("scroll",e);break;case"onScrollEnd":n!=null&&Ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(a=n.__html,a!=null){if(s.children!=null)throw Error(u(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=gs(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":Ce("beforetoggle",e),Ce("toggle",e),fs(e,"popover",n);break;case"xlinkActuate":na(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":na(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":na(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":na(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":na(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":na(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":na(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":na(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":na(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":fs(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=yh.get(a)||a,fs(e,a,n))}}function kr(e,t,a,n,s,c){switch(a){case"style":Ru(e,n,c);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(a=n.__html,a!=null){if(s.children!=null)throw Error(u(60));e.innerHTML=a}}break;case"children":typeof n=="string"?Al(e,n):(typeof n=="number"||typeof n=="bigint")&&Al(e,""+n);break;case"onScroll":n!=null&&Ce("scroll",e);break;case"onScrollEnd":n!=null&&Ce("scrollend",e);break;case"onClick":n!=null&&(e.onclick=sa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Eu.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(s=a.endsWith("Capture"),t=a.slice(2,s?a.length-7:void 0),c=e[ht]||null,c=c!=null?c[a]:null,typeof c=="function"&&e.removeEventListener(t,c,s),typeof n=="function")){typeof c!="function"&&c!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,s);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):fs(e,a,n)}}}function it(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",e),Ce("load",e);var n=!1,s=!1,c;for(c in a)if(a.hasOwnProperty(c)){var r=a[c];if(r!=null)switch(c){case"src":n=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Be(e,t,c,r,a,null)}}s&&Be(e,t,"srcSet",a.srcSet,a,null),n&&Be(e,t,"src",a.src,a,null);return;case"input":Ce("invalid",e);var f=c=r=s=null,D=null,U=null;for(n in a)if(a.hasOwnProperty(n)){var Q=a[n];if(Q!=null)switch(n){case"name":s=Q;break;case"type":r=Q;break;case"checked":D=Q;break;case"defaultChecked":U=Q;break;case"value":c=Q;break;case"defaultValue":f=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(u(137,t));break;default:Be(e,t,n,Q,a,null)}}wu(e,c,f,D,U,r,s,!1);return;case"select":Ce("invalid",e),n=r=c=null;for(s in a)if(a.hasOwnProperty(s)&&(f=a[s],f!=null))switch(s){case"value":c=f;break;case"defaultValue":r=f;break;case"multiple":n=f;default:Be(e,t,s,f,a,null)}t=c,a=r,e.multiple=!!n,t!=null?Ml(e,!!n,t,!1):a!=null&&Ml(e,!!n,a,!0);return;case"textarea":Ce("invalid",e),c=s=n=null;for(r in a)if(a.hasOwnProperty(r)&&(f=a[r],f!=null))switch(r){case"value":n=f;break;case"defaultValue":s=f;break;case"children":c=f;break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(u(91));break;default:Be(e,t,r,f,a,null)}zu(e,n,s,c);return;case"option":for(D in a)a.hasOwnProperty(D)&&(n=a[D],n!=null)&&(D==="selected"?e.selected=n&&typeof n!="function"&&typeof n!="symbol":Be(e,t,D,n,a,null));return;case"dialog":Ce("beforetoggle",e),Ce("toggle",e),Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":Ce("load",e);break;case"video":case"audio":for(n=0;n<Vn.length;n++)Ce(Vn[n],e);break;case"image":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"embed":case"source":case"link":Ce("error",e),Ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in a)if(a.hasOwnProperty(U)&&(n=a[U],n!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Be(e,t,U,n,a,null)}return;default:if(Fc(t)){for(Q in a)a.hasOwnProperty(Q)&&(n=a[Q],n!==void 0&&kr(e,t,Q,n,a,void 0));return}}for(f in a)a.hasOwnProperty(f)&&(n=a[f],n!=null&&Be(e,t,f,n,a,null))}function Kp(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,c=null,r=null,f=null,D=null,U=null,Q=null;for(Y in a){var J=a[Y];if(a.hasOwnProperty(Y)&&J!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=J;default:n.hasOwnProperty(Y)||Be(e,t,Y,null,n,J)}}for(var L in n){var Y=n[L];if(J=a[L],n.hasOwnProperty(L)&&(Y!=null||J!=null))switch(L){case"type":c=Y;break;case"name":s=Y;break;case"checked":U=Y;break;case"defaultChecked":Q=Y;break;case"value":r=Y;break;case"defaultValue":f=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(u(137,t));break;default:Y!==J&&Be(e,t,L,Y,n,J)}}Jc(e,r,f,D,U,Q,c,s);return;case"select":Y=r=f=L=null;for(c in a)if(D=a[c],a.hasOwnProperty(c)&&D!=null)switch(c){case"value":break;case"multiple":Y=D;default:n.hasOwnProperty(c)||Be(e,t,c,null,n,D)}for(s in n)if(c=n[s],D=a[s],n.hasOwnProperty(s)&&(c!=null||D!=null))switch(s){case"value":L=c;break;case"defaultValue":f=c;break;case"multiple":r=c;default:c!==D&&Be(e,t,s,c,n,D)}t=f,a=r,n=Y,L!=null?Ml(e,!!a,L,!1):!!n!=!!a&&(t!=null?Ml(e,!!a,t,!0):Ml(e,!!a,a?[]:"",!1));return;case"textarea":Y=L=null;for(f in a)if(s=a[f],a.hasOwnProperty(f)&&s!=null&&!n.hasOwnProperty(f))switch(f){case"value":break;case"children":break;default:Be(e,t,f,null,n,s)}for(r in n)if(s=n[r],c=a[r],n.hasOwnProperty(r)&&(s!=null||c!=null))switch(r){case"value":L=s;break;case"defaultValue":Y=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(u(91));break;default:s!==c&&Be(e,t,r,s,n,c)}Ou(e,L,Y);return;case"option":for(var se in a)L=a[se],a.hasOwnProperty(se)&&L!=null&&!n.hasOwnProperty(se)&&(se==="selected"?e.selected=!1:Be(e,t,se,null,n,L));for(D in n)L=n[D],Y=a[D],n.hasOwnProperty(D)&&L!==Y&&(L!=null||Y!=null)&&(D==="selected"?e.selected=L&&typeof L!="function"&&typeof L!="symbol":Be(e,t,D,L,n,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in a)L=a[fe],a.hasOwnProperty(fe)&&L!=null&&!n.hasOwnProperty(fe)&&Be(e,t,fe,null,n,L);for(U in n)if(L=n[U],Y=a[U],n.hasOwnProperty(U)&&L!==Y&&(L!=null||Y!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(u(137,t));break;default:Be(e,t,U,L,n,Y)}return;default:if(Fc(t)){for(var ke in a)L=a[ke],a.hasOwnProperty(ke)&&L!==void 0&&!n.hasOwnProperty(ke)&&kr(e,t,ke,void 0,n,L);for(Q in n)L=n[Q],Y=a[Q],!n.hasOwnProperty(Q)||L===Y||L===void 0&&Y===void 0||kr(e,t,Q,L,n,Y);return}}for(var B in a)L=a[B],a.hasOwnProperty(B)&&L!=null&&!n.hasOwnProperty(B)&&Be(e,t,B,null,n,L);for(J in n)L=n[J],Y=a[J],!n.hasOwnProperty(J)||L===Y||L==null&&Y==null||Be(e,t,J,L,n,Y)}function km(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vp(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var s=a[n],c=s.transferSize,r=s.initiatorType,f=s.duration;if(c&&f&&km(r)){for(r=0,f=s.responseEnd,n+=1;n<a.length;n++){var D=a[n],U=D.startTime;if(U>f)break;var Q=D.transferSize,J=D.initiatorType;Q&&km(J)&&(D=D.responseEnd,r+=Q*(D<f?1:(f-U)/(D-U)))}if(--n,t+=8*(c+r)/(s.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ur=null,Hr=null;function dc(e){return e.nodeType===9?e:e.ownerDocument}function Um(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Lr(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qr=null;function Zp(){var e=window.event;return e&&e.type==="popstate"?e===qr?!1:(qr=e,!0):(qr=null,!1)}var Lm=typeof setTimeout=="function"?setTimeout:void 0,Jp=typeof clearTimeout=="function"?clearTimeout:void 0,qm=typeof Promise=="function"?Promise:void 0,$p=typeof queueMicrotask=="function"?queueMicrotask:typeof qm<"u"?function(e){return qm.resolve(null).then(e).catch(Fp)}:Lm;function Fp(e){setTimeout(function(){throw e})}function Ga(e){return e==="head"}function Ym(e,t){var a=t,n=0;do{var s=a.nextSibling;if(e.removeChild(a),s&&s.nodeType===8)if(a=s.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(s),cn(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")Jn(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Jn(a);for(var c=a.firstChild;c;){var r=c.nextSibling,f=c.nodeName;c[mn]||f==="SCRIPT"||f==="STYLE"||f==="LINK"&&c.rel.toLowerCase()==="stylesheet"||a.removeChild(c),c=r}}else a==="body"&&Jn(e.ownerDocument.body);a=s}while(a);cn(t)}function Gm(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function Yr(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Yr(a),Vc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Wp(e,t,a,n){for(;e.nodeType===1;){var s=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[mn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==s.rel||e.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||e.getAttribute("title")!==(s.title==null?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(s.src==null?null:s.src)||e.getAttribute("type")!==(s.type==null?null:s.type)||e.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=s.name==null?null:""+s.name;if(s.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=Lt(e.nextSibling),e===null)break}return null}function Ip(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Lt(e.nextSibling),e===null))return null;return e}function Qm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Lt(e.nextSibling),e===null))return null;return e}function Gr(e){return e.data==="$?"||e.data==="$~"}function Qr(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Pp(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Lt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Xr=null;function Xm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Lt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Km(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Vm(e,t,a){switch(t=dc(a),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function Jn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Vc(e)}var qt=new Map,Zm=new Set;function mc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ja=z.d;z.d={f:eg,r:tg,D:ag,C:lg,L:ng,m:sg,X:ig,S:cg,M:rg};function eg(){var e=ja.f(),t=lc();return e||t}function tg(e){var t=El(e);t!==null&&t.tag===5&&t.type==="form"?od(t):ja.r(e)}var ln=typeof document>"u"?null:document;function Jm(e,t,a){var n=ln;if(n&&typeof t=="string"&&t){var s=zt(t);s='link[rel="'+e+'"][href="'+s+'"]',typeof a=="string"&&(s+='[crossorigin="'+a+'"]'),Zm.has(s)||(Zm.add(s),e={rel:e,crossOrigin:a,href:t},n.querySelector(s)===null&&(t=n.createElement("link"),it(t,"link",e),tt(t),n.head.appendChild(t)))}}function ag(e){ja.D(e),Jm("dns-prefetch",e,null)}function lg(e,t){ja.C(e,t),Jm("preconnect",e,t)}function ng(e,t,a){ja.L(e,t,a);var n=ln;if(n&&e&&t){var s='link[rel="preload"][as="'+zt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(s+='[imagesrcset="'+zt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(s+='[imagesizes="'+zt(a.imageSizes)+'"]')):s+='[href="'+zt(e)+'"]';var c=s;switch(t){case"style":c=nn(e);break;case"script":c=sn(e)}qt.has(c)||(e=j({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),qt.set(c,e),n.querySelector(s)!==null||t==="style"&&n.querySelector($n(c))||t==="script"&&n.querySelector(Fn(c))||(t=n.createElement("link"),it(t,"link",e),tt(t),n.head.appendChild(t)))}}function sg(e,t){ja.m(e,t);var a=ln;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+zt(n)+'"][href="'+zt(e)+'"]',c=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=sn(e)}if(!qt.has(c)&&(e=j({rel:"modulepreload",href:e},t),qt.set(c,e),a.querySelector(s)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fn(c)))return}n=a.createElement("link"),it(n,"link",e),tt(n),a.head.appendChild(n)}}}function cg(e,t,a){ja.S(e,t,a);var n=ln;if(n&&e){var s=Dl(n).hoistableStyles,c=nn(e);t=t||"default";var r=s.get(c);if(!r){var f={loading:0,preload:null};if(r=n.querySelector($n(c)))f.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":t},a),(a=qt.get(c))&&Kr(e,a);var D=r=n.createElement("link");tt(D),it(D,"link",e),D._p=new Promise(function(U,Q){D.onload=U,D.onerror=Q}),D.addEventListener("load",function(){f.loading|=1}),D.addEventListener("error",function(){f.loading|=2}),f.loading|=4,fc(r,t,n)}r={type:"stylesheet",instance:r,count:1,state:f},s.set(c,r)}}}function ig(e,t){ja.X(e,t);var a=ln;if(a&&e){var n=Dl(a).hoistableScripts,s=sn(e),c=n.get(s);c||(c=a.querySelector(Fn(s)),c||(e=j({src:e,async:!0},t),(t=qt.get(s))&&Vr(e,t),c=a.createElement("script"),tt(c),it(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(s,c))}}function rg(e,t){ja.M(e,t);var a=ln;if(a&&e){var n=Dl(a).hoistableScripts,s=sn(e),c=n.get(s);c||(c=a.querySelector(Fn(s)),c||(e=j({src:e,async:!0,type:"module"},t),(t=qt.get(s))&&Vr(e,t),c=a.createElement("script"),tt(c),it(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},n.set(s,c))}}function $m(e,t,a,n){var s=(s=F.current)?mc(s):null;if(!s)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=nn(a.href),a=Dl(s).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=nn(a.href);var c=Dl(s).hoistableStyles,r=c.get(e);if(r||(s=s.ownerDocument||s,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,r),(c=s.querySelector($n(e)))&&!c._p&&(r.instance=c,r.state.loading=5),qt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},qt.set(e,a),c||ug(s,e,a,r.state))),t&&n===null)throw Error(u(528,""));return r}if(t&&n!==null)throw Error(u(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=sn(a),a=Dl(s).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function nn(e){return'href="'+zt(e)+'"'}function $n(e){return'link[rel="stylesheet"]['+e+"]"}function Fm(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function ug(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),it(t,"link",a),tt(t),e.head.appendChild(t))}function sn(e){return'[src="'+zt(e)+'"]'}function Fn(e){return"script[async]"+e}function Wm(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+zt(a.href)+'"]');if(n)return t.instance=n,tt(n),n;var s=j({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),tt(n),it(n,"style",s),fc(n,a.precedence,e),t.instance=n;case"stylesheet":s=nn(a.href);var c=e.querySelector($n(s));if(c)return t.state.loading|=4,t.instance=c,tt(c),c;n=Fm(a),(s=qt.get(s))&&Kr(n,s),c=(e.ownerDocument||e).createElement("link"),tt(c);var r=c;return r._p=new Promise(function(f,D){r.onload=f,r.onerror=D}),it(c,"link",n),t.state.loading|=4,fc(c,a.precedence,e),t.instance=c;case"script":return c=sn(a.src),(s=e.querySelector(Fn(c)))?(t.instance=s,tt(s),s):(n=a,(s=qt.get(c))&&(n=j({},a),Vr(n,s)),e=e.ownerDocument||e,s=e.createElement("script"),tt(s),it(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,fc(n,a.precedence,e));return t.instance}function fc(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,c=s,r=0;r<n.length;r++){var f=n[r];if(f.dataset.precedence===t)c=f;else if(c!==s)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Kr(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Vr(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var hc=null;function Im(e,t,a){if(hc===null){var n=new Map,s=hc=new Map;s.set(a,n)}else s=hc,n=s.get(a),n||(n=new Map,s.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),s=0;s<a.length;s++){var c=a[s];if(!(c[mn]||c[lt]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var r=c.getAttribute(t)||"";r=e+r;var f=n.get(r);f?f.push(c):n.set(r,[c])}}return n}function Pm(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function og(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ef(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function dg(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var s=nn(n.href),c=t.querySelector($n(s));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=pc.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=c,tt(c);return}c=t.ownerDocument||t,n=Fm(n),(s=qt.get(s))&&Kr(n,s),c=c.createElement("link"),tt(c);var r=c;r._p=new Promise(function(f,D){r.onload=f,r.onerror=D}),it(c,"link",n),a.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=pc.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Zr=0;function mg(e,t){return e.stylesheets&&e.count===0&&xc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&xc(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&Zr===0&&(Zr=62500*Vp());var s=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&xc(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>Zr?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(s)}}:null}function pc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var gc=null;function xc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,gc=new Map,t.forEach(fg,e),gc=null,pc.call(e))}function fg(e,t){if(!(t.state.loading&4)){var a=gc.get(e);if(a)var n=a.get(null);else{a=new Map,gc.set(e,a);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<s.length;c++){var r=s[c];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(a.set(r.dataset.precedence,r),n=r)}n&&a.set(null,n)}s=t.instance,r=s.getAttribute("data-precedence"),c=a.get(r)||n,c===n&&a.set(null,s),a.set(r,s),this.count++,n=pc.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),c?c.parentNode.insertBefore(s,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(s,e.firstChild)),t.state.loading|=4}}var Wn={$$typeof:E,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function hg(e,t,a,n,s,c,r,f,D){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gc(0),this.hiddenUpdates=Gc(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=c,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function tf(e,t,a,n,s,c,r,f,D,U,Q,J){return e=new hg(e,t,a,r,D,U,Q,J,f),t=1,c===!0&&(t|=24),c=Et(3,null,null,t),e.current=c,c.stateNode=e,t=Di(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:n,isDehydrated:a,cache:t},wi(c),e}function af(e){return e?(e=kl,e):kl}function lf(e,t,a,n,s,c){s=af(s),n.context===null?n.context=s:n.pendingContext=s,n=Oa(t),n.payload={element:a},c=c===void 0?null:c,c!==null&&(n.callback=c),a=za(e,n,t),a!==null&&(bt(a,e,t),An(a,e,t))}function nf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Jr(e,t){nf(e,t),(e=e.alternate)&&nf(e,t)}function sf(e){if(e.tag===13||e.tag===31){var t=cl(e,67108864);t!==null&&bt(t,e,67108864),Jr(e,67108864)}}function cf(e){if(e.tag===13||e.tag===31){var t=wt();t=Qc(t);var a=cl(e,t);a!==null&&bt(a,e,t),Jr(e,t)}}var yc=!0;function pg(e,t,a,n){var s=H.T;H.T=null;var c=z.p;try{z.p=2,$r(e,t,a,n)}finally{z.p=c,H.T=s}}function gg(e,t,a,n){var s=H.T;H.T=null;var c=z.p;try{z.p=8,$r(e,t,a,n)}finally{z.p=c,H.T=s}}function $r(e,t,a,n){if(yc){var s=Fr(n);if(s===null)Br(e,t,n,vc,a),uf(e,n);else if(yg(s,e,t,a,n))n.stopPropagation();else if(uf(e,n),t&4&&-1<xg.indexOf(e)){for(;s!==null;){var c=El(s);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var r=tl(c.pendingLanes);if(r!==0){var f=c;for(f.pendingLanes|=2,f.entangledLanes|=2;r;){var D=1<<31-W(r);f.entanglements[1]|=D,r&=~D}It(c),(Oe&6)===0&&(tc=Je()+500,Kn(0))}}break;case 31:case 13:f=cl(c,2),f!==null&&bt(f,c,2),lc(),Jr(c,2)}if(c=Fr(n),c===null&&Br(e,t,n,vc,a),c===s)break;s=c}s!==null&&n.stopPropagation()}else Br(e,t,n,null,a)}}function Fr(e){return e=Ic(e),Wr(e)}var vc=null;function Wr(e){if(vc=null,e=Cl(e),e!==null){var t=x(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=S(t),e!==null)return e;e=null}else if(a===31){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return vc=e,null}function rf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cs()){case is:return 2;case rs:return 8;case jl:case qc:return 32;case us:return 268435456;default:return 32}default:return 32}}var Ir=!1,Qa=null,Xa=null,Ka=null,In=new Map,Pn=new Map,Va=[],xg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uf(e,t){switch(e){case"focusin":case"focusout":Qa=null;break;case"dragenter":case"dragleave":Xa=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":In.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(t.pointerId)}}function es(e,t,a,n,s,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:c,targetContainers:[s]},t!==null&&(t=El(t),t!==null&&sf(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function yg(e,t,a,n,s){switch(t){case"focusin":return Qa=es(Qa,e,t,a,n,s),!0;case"dragenter":return Xa=es(Xa,e,t,a,n,s),!0;case"mouseover":return Ka=es(Ka,e,t,a,n,s),!0;case"pointerover":var c=s.pointerId;return In.set(c,es(In.get(c)||null,e,t,a,n,s)),!0;case"gotpointercapture":return c=s.pointerId,Pn.set(c,es(Pn.get(c)||null,e,t,a,n,s)),!0}return!1}function of(e){var t=Cl(e.target);if(t!==null){var a=x(t);if(a!==null){if(t=a.tag,t===13){if(t=S(a),t!==null){e.blockedOn=t,Nu(e.priority,function(){cf(a)});return}}else if(t===31){if(t=h(a),t!==null){e.blockedOn=t,Nu(e.priority,function(){cf(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Fr(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);Wc=n,a.target.dispatchEvent(n),Wc=null}else return t=El(a),t!==null&&sf(t),e.blockedOn=a,!1;t.shift()}return!0}function df(e,t,a){bc(e)&&a.delete(t)}function vg(){Ir=!1,Qa!==null&&bc(Qa)&&(Qa=null),Xa!==null&&bc(Xa)&&(Xa=null),Ka!==null&&bc(Ka)&&(Ka=null),In.forEach(df),Pn.forEach(df)}function jc(e,t){e.blockedOn===t&&(e.blockedOn=null,Ir||(Ir=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,vg)))}var Nc=null;function mf(e){Nc!==e&&(Nc=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Nc===e&&(Nc=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],s=e[t+2];if(typeof n!="function"){if(Wr(n||a)===null)continue;break}var c=El(a);c!==null&&(e.splice(t,3),t-=3,Fi(c,{pending:!0,data:s,method:a.method,action:n},n,s))}}))}function cn(e){function t(D){return jc(D,e)}Qa!==null&&jc(Qa,e),Xa!==null&&jc(Xa,e),Ka!==null&&jc(Ka,e),In.forEach(t),Pn.forEach(t);for(var a=0;a<Va.length;a++){var n=Va[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Va.length&&(a=Va[0],a.blockedOn===null);)of(a),a.blockedOn===null&&Va.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var s=a[n],c=a[n+1],r=s[ht]||null;if(typeof c=="function")r||mf(a);else if(r){var f=null;if(c&&c.hasAttribute("formAction")){if(s=c,r=c[ht]||null)f=r.formAction;else if(Wr(s)!==null)continue}else f=r.action;typeof f=="function"?a[n+1]=f:(a.splice(n,3),n-=3),mf(a)}}}function ff(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(r){return s=r})},focusReset:"manual",scroll:"manual"})}function t(){s!==null&&(s(),s=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),s!==null&&(s(),s=null)}}}function Pr(e){this._internalRoot=e}Sc.prototype.render=Pr.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var a=t.current,n=wt();lf(a,n,e,t,null,null)},Sc.prototype.unmount=Pr.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lf(e.current,2,null,e,null,null),lc(),t[Sl]=null}};function Sc(e){this._internalRoot=e}Sc.prototype.unstable_scheduleHydration=function(e){if(e){var t=ju();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Va.length&&t!==0&&t<Va[a].priority;a++);Va.splice(a,0,e),a===0&&of(e)}};var hf=o.version;if(hf!=="19.2.3")throw Error(u(527,hf,"19.2.3"));z.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=C(t),e=e!==null?w(e):null,e=e===null?null:e.stateNode,e};var bg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cc.isDisabled&&Cc.supportsFiber)try{Pa=Cc.inject(bg),dt=Cc}catch{}}return ts.createRoot=function(e,t){if(!p(e))throw Error(u(299));var a=!1,n="",s=bd,c=jd,r=Nd;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=tf(e,1,!1,null,null,a,n,null,s,c,r,ff),e[Sl]=t.current,Rr(e),new Pr(t)},ts.hydrateRoot=function(e,t,a){if(!p(e))throw Error(u(299));var n=!1,s="",c=bd,r=jd,f=Nd,D=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(s=a.identifierPrefix),a.onUncaughtError!==void 0&&(c=a.onUncaughtError),a.onCaughtError!==void 0&&(r=a.onCaughtError),a.onRecoverableError!==void 0&&(f=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),t=tf(e,1,!0,t,a??null,n,s,D,c,r,f,ff),t.context=af(null),a=t.current,n=wt(),n=Qc(n),s=Oa(n),s.callback=null,za(a,s,n),a=n,t.current.lanes=a,dn(t,a),It(t),e[Sl]=t.current,Rr(e),new Sc(t)},ts.version="19.2.3",ts}var jf;function Jg(){if(jf)return eu.exports;jf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(o){console.error(o)}}return i(),eu.exports=Zg(),eu.exports}var $g=Jg();const ru={isDevelopment:!1,enabledLevels:["error"]};function Ec(i){return ru.enabledLevels.includes(i)}function Fg(){return new Date().toISOString()}function rn(i,o,d){return`${Fg()} [${i.toUpperCase()}] ${o}`}const oe={debug(i,...o){Ec("debug")&&console.log(rn("debug",i),...o)},info(i,...o){Ec("info")&&console.info(rn("info",i),...o)},warn(i,...o){Ec("warn")&&console.warn(rn("warn",i),...o)},error(i,o,...d){Ec("error")&&(o instanceof Error?console.error(rn("error",i),o.message,...d):o!==void 0?console.error(rn("error",i),o,...d):console.error(rn("error",i),...d))},group(i,o){},setEnabledLevels(i){ru.enabledLevels=i},getConfig(){return{...ru}}},zc={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},Na=!!(zc.apiKey&&zc.projectId&&zc.apiKey!=="undefined");let Dc=null,vl=null,ce=null,uu=null,ou=null;if(Na)try{Dc=Dg(zc),vl=Tg(Dc),ce=Mg(Dc),uu=Ag(Dc),ou=new wg}catch(i){oe.error("Firebase  :",i)}const Wg={uid:"demo-user-1",email:"demo@example.com",displayName:" ",photoURL:null},Vf=m.createContext(null);function Ig({children:i}){const[o,d]=m.useState(()=>typeof window<"u"?localStorage.getItem("demoMode")==="true":!1),u=()=>{localStorage.setItem("demoMode","true"),d(!0)},p=()=>{localStorage.removeItem("demoMode"),Object.keys(localStorage).forEach(x=>{x.startsWith("demo_")&&localStorage.removeItem(x)}),d(!1)};return l.jsx(Vf.Provider,{value:{isDemoMode:o,demoUser:o?Wg:null,enableDemoMode:u,disableDemoMode:p},children:i})}function kc(){const i=m.useContext(Vf);if(!i)throw new Error("useDemo must be used within a DemoProvider");return i}const Zf=m.createContext(null);function Pg({children:i}){const[o,d]=m.useState(null),[u,p]=m.useState(!0);m.useEffect(()=>{if(!Na||!vl){p(!1);return}const h=Og(vl,async N=>{if(N){const C=ex(N);d(C),ce&&await tx(ce,N)}else d(null);p(!1)});return()=>h()},[]);const x=async()=>{if(!Na||!vl||!ou)throw new Error("Firebase  ");try{p(!0),await _g(vl,ou)}catch(h){throw oe.error("Google  :",h),h}finally{p(!1)}},S=async()=>{if(!vl)throw new Error("Firebase  ");try{await zg(vl)}catch(h){throw oe.error(" :",h),h}};return l.jsx(Zf.Provider,{value:{user:o,loading:u,signInWithGoogle:x,signOut:S},children:i})}function ss(){const i=m.useContext(Zf);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i}function ex(i){return{uid:i.uid,email:i.email,displayName:i.displayName,photoURL:i.photoURL}}async function tx(i,o){try{const d=Ye(i,"users",o.uid);(await wc(d)).exists()?await _c(d,{email:o.email,displayName:o.displayName,photoURL:o.photoURL},{merge:!0}):await _c(d,{email:o.email,displayName:o.displayName,photoURL:o.photoURL,createdAt:$a()})}catch(d){oe.error("   :",d)}}const rt={food:{label:"",icon:""},transport:{label:"",icon:""},accommodation:{label:"",icon:""},activity:{label:"",icon:""},shopping:{label:"",icon:""},other:{label:"",icon:""}},Vt=[{code:"KRW",name:" ",symbol:"",rate:1},{code:"USD",name:" ",symbol:"$",rate:1350},{code:"EUR",name:"",symbol:"",rate:1450},{code:"JPY",name:" ",symbol:"",rate:9},{code:"CNY",name:" ",symbol:"",rate:185},{code:"THB",name:" ",symbol:"",rate:38},{code:"VND",name:" ",symbol:"",rate:.054},{code:"PHP",name:" ",symbol:"",rate:24}],Zt=["#667eea","#f093fb","#4facfe","#43e97b","#fa709a","#fee140","#30cfd0","#a8edea"],lu=()=>Math.random().toString(36).substring(2,11),hu=()=>{const i="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let o="";for(let d=0;d<6;d++)o+=i.charAt(Math.floor(Math.random()*i.length));return o},Jf=m.createContext(null);function ax({children:i}){const{user:o}=ss(),[d,u]=m.useState([]),[p,x]=m.useState(null),[S,h]=m.useState([]),[N,C]=m.useState(!0);m.useEffect(()=>{if(!o){u([]),x(null),C(!1);return}if(!Na||!ce){C(!1);return}C(!0);const E=(async()=>{try{const _=Pt(ce,"trips"),G=Rc(_,cu("createdAt","desc"));return ls(G,async P=>{const X=P.docs.map(async ie=>{const ne=Ye(ce,"trips",ie.id,"members",o.uid);return(await wc(ne)).exists()?{id:ie.id,...ie.data()}:null}),I=(await Promise.all(X)).filter(ie=>ie!==null);u(I),C(!1)})}catch(_){oe.error("   :",_),C(!1)}})();return()=>{E?.then(_=>_?.())}},[o]),m.useEffect(()=>{if(!p){h([]);return}if(!(!Na||!ce))try{const R=Pt(ce,"trips",p.id,"members"),E=ls(R,_=>{const G=_.docs.map((ee,P)=>({odId:ee.id,...ee.data(),color:Zt[P%Zt.length]}));h(G)},_=>{oe.error("   :",_)});return()=>E()}catch(R){oe.error("   :",R)}},[p]);const w=async(R,E,_)=>{if(!o)throw new Error(" ");if(!ce)throw new Error("Firebase  ");const G=hu(),ee=await Oc(Pt(ce,"trips"),{name:R,inviteCode:G,ownerId:o.uid,currencies:Vt,createdAt:$a(),startDate:E||null,endDate:_||null,archived:!1});return await _c(Ye(ce,"trips",ee.id,"members",o.uid),{displayName:o.displayName||"",photoURL:o.photoURL,role:"owner",joinedAt:$a()}),{id:ee.id,name:R,inviteCode:G,ownerId:o.uid,currencies:Vt,createdAt:$a(),startDate:E,endDate:_,archived:!1}},j=async R=>{if(!o)throw new Error(" ");if(!ce)throw new Error("Firebase  ");const E=R.toUpperCase().trim(),_=Pt(ce,"trips"),G=Rc(_,Rg("inviteCode","==",E)),ee=await Bg(G);if(ee.empty)return null;const P=ee.docs[0],X=P.id,ae=Ye(ce,"trips",X,"members",o.uid);return(await wc(ae)).exists()||await _c(ae,{displayName:o.displayName||"",photoURL:o.photoURL,role:"member",joinedAt:$a()}),{id:X,...P.data()}},b=async R=>{if(!o)throw new Error(" ");if(!ce)throw new Error("Firebase  ");await ns(Ye(ce,"trips",R,"members",o.uid)),p?.id===R&&x(null)},v=async R=>{if(!o)throw new Error(" ");if(!ce)throw new Error("Firebase  ");await ns(Ye(ce,"trips",R)),p?.id===R&&x(null)},T=async R=>{if(!o)throw new Error(" ");if(!ce)throw new Error("Firebase  ");const E=Ye(ce,"trips",R);await jt(E,{archived:!0}),p?.id===R&&x(null)},g=async R=>{if(!o)throw new Error(" ");if(!ce)throw new Error("Firebase  ");const E=Ye(ce,"trips",R);await jt(E,{archived:!1})},y=async(R,E)=>{if(!o)throw new Error(" ");if(!ce)throw new Error("Firebase  ");const _=Ye(ce,"trips",R),G=await wc(_);if(!G.exists())throw new Error("    ");const ee=G.data(),P=await w(E,void 0,void 0);if(ee.currencies){const X=Ye(ce,"trips",P.id);await jt(X,{currencies:ee.currencies})}return P},A=async(R,E,_)=>{if(!o)throw new Error(" ");if(!ce)throw new Error("Firebase  ");const G=Ye(ce,"trips",R);await jt(G,{startDate:E||null,endDate:_||null})};return l.jsx(Jf.Provider,{value:{trips:d,currentTrip:p,members:S,loading:N,setCurrentTrip:x,createTrip:w,joinTrip:j,leaveTrip:b,deleteTrip:v,archiveTrip:T,unarchiveTrip:g,duplicateTrip:y,updateTripDates:A},children:i})}function Uc(){const i=m.useContext(Jf);if(!i)throw new Error("useTrip must be used within a TripProvider");return i}const $f=m.createContext(null);function Nf(){return typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function lx({children:i}){const[o,d]=m.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"system"),[u,p]=m.useState(()=>o==="system"?Nf():o);m.useEffect(()=>{const h=document.documentElement,N=o==="system"?Nf():o;p(N),h.setAttribute("data-theme",N),localStorage.setItem("theme",o)},[o]),m.useEffect(()=>{if(o!=="system")return;const h=window.matchMedia("(prefers-color-scheme: dark)"),N=C=>{p(C.matches?"dark":"light"),document.documentElement.setAttribute("data-theme",C.matches?"dark":"light")};return h.addEventListener("change",N),()=>h.removeEventListener("change",N)},[o]);const x=h=>{d(h)},S=()=>{d(h=>h==="light"?"dark":h==="dark"?"light":u==="light"?"dark":"light")};return l.jsx($f.Provider,{value:{theme:o,effectiveTheme:u,setTheme:x,toggleTheme:S},children:i})}function Ff(){const i=m.useContext($f);if(!i)throw new Error("useTheme must be used within a ThemeProvider");return i}const Wf=m.createContext(null),Sf={ko:{"common.save":"","common.cancel":"","common.delete":"","common.edit":"","common.add":"","common.close":"","common.confirm":"","common.search":"","common.filter":"","common.total":"","common.loading":" ...","tabs.participants":"","tabs.expenses":"","tabs.settlement":"","participants.title":" ","participants.add":" ","participants.placeholder":" ","participants.empty":"  ","participants.count":" {count}","expenses.title":" ","expenses.add":" ","expenses.empty":"  ","expenses.total":" ","expenses.paidBy":"","expenses.sharedBy":"","expenses.date":"","expenses.amount":"","expenses.category":"","expenses.description":"","category.food":"","category.transport":"","category.accommodation":"","category.activity":"","category.shopping":"","category.other":"","settlement.title":" ","settlement.complete":" ","settlement.pending":" ","settlement.transfer":"{from} {to} {amount} ","settings.title":"","settings.theme":"","settings.language":"","settings.notifications":"","settings.about":""},en:{"common.save":"Save","common.cancel":"Cancel","common.delete":"Delete","common.edit":"Edit","common.add":"Add","common.close":"Close","common.confirm":"Confirm","common.search":"Search","common.filter":"Filter","common.total":"Total","common.loading":"Loading...","tabs.participants":"Participants","tabs.expenses":"Expenses","tabs.settlement":"Settlement","participants.title":"Manage Participants","participants.add":"Add Participant","participants.placeholder":"Enter name","participants.empty":"No participants yet","participants.count":"{count} participants","expenses.title":"Expense List","expenses.add":"Add Expense","expenses.empty":"No expenses yet","expenses.total":"Total Expenses","expenses.paidBy":"Paid by","expenses.sharedBy":"Shared by","expenses.date":"Date","expenses.amount":"Amount","expenses.category":"Category","expenses.description":"Description","category.food":"Food","category.transport":"Transport","category.accommodation":"Accommodation","category.activity":"Activity","category.shopping":"Shopping","category.other":"Other","settlement.title":"Settlement Status","settlement.complete":"Completed","settlement.pending":"Pending","settlement.transfer":"{from}  {to}: {amount}","settings.title":"Settings","settings.theme":"Theme","settings.language":"Language","settings.notifications":"Notifications","settings.about":"About"},ja:{"common.save":"","common.cancel":"","common.delete":"","common.edit":"","common.add":"","common.close":"","common.confirm":"","common.search":"","common.filter":"","common.total":"","common.loading":"...","tabs.participants":"","tabs.expenses":"","tabs.settlement":"","participants.title":"","participants.add":"","participants.placeholder":"","participants.empty":"","participants.count":"{count}","expenses.title":"","expenses.add":"","expenses.empty":"","expenses.total":"","expenses.paidBy":"","expenses.sharedBy":"","expenses.date":"","expenses.amount":"","expenses.category":"","expenses.description":"","category.food":"","category.transport":"","category.accommodation":"","category.activity":"","category.shopping":"","category.other":"","settlement.title":"","settlement.complete":"","settlement.pending":"","settlement.transfer":"{from}{to}: {amount}","settings.title":"","settings.theme":"","settings.language":"","settings.notifications":"","settings.about":""},zh:{"common.save":"","common.cancel":"","common.delete":"","common.edit":"","common.add":"","common.close":"","common.confirm":"","common.search":"","common.filter":"","common.total":"","common.loading":"...","tabs.participants":"","tabs.expenses":"","tabs.settlement":"","participants.title":"","participants.add":"","participants.placeholder":"","participants.empty":"","participants.count":"{count}","expenses.title":"","expenses.add":"","expenses.empty":"","expenses.total":"","expenses.paidBy":"","expenses.sharedBy":"","expenses.date":"","expenses.amount":"","expenses.category":"","expenses.description":"","category.food":"","category.transport":"","category.accommodation":"","category.activity":"","category.shopping":"","category.other":"","settlement.title":"","settlement.complete":"","settlement.pending":"","settlement.transfer":"{from}{to}: {amount}","settings.title":"","settings.theme":"","settings.language":"","settings.notifications":"","settings.about":""}},Cf="app_locale";function nx({children:i}){const[o,d]=m.useState(()=>{const x=localStorage.getItem(Cf);if(x&&["ko","en","ja","zh"].includes(x))return x;const S=navigator.language.split("-")[0];return["ko","en","ja","zh"].includes(S)?S:"ko"}),u=m.useCallback(x=>{d(x),localStorage.setItem(Cf,x),document.documentElement.lang=x},[]);m.useEffect(()=>{document.documentElement.lang=o},[o]);const p=m.useCallback((x,S)=>{let h=Sf[o][x]||Sf.en[x]||x;return S&&Object.entries(S).forEach(([N,C])=>{h=h.replace(`{${N}}`,String(C))}),h},[o]);return l.jsx(Wf.Provider,{value:{locale:o,setLocale:u,t:p},children:i})}function sx(){const i=m.useContext(Wf);if(!i)throw new Error("useI18n must be used within I18nProvider");return i}const cx={ko:"",en:"English",ja:"",zh:""},ea={DEMO_TRIPS:"demo_trips",TEMPLATES:"expense_templates",RECURRING_EXPENSES:"recurring_expenses",SCHEDULED_EXPENSES:"scheduled_expenses"};function pu(i,o){if(o===0||!Number.isFinite(o))return 0;const d=i/o;return Number.isFinite(d)?d:0}const ix=()=>{const{currentTrip:i,members:o}=Uc(),{user:d}=ss(),[u,p]=m.useState([]),[x,S]=m.useState(Vt),[h,N]=m.useState(!0),[C,w]=m.useState(new Map),[j,b]=m.useState(new Map),v=m.useMemo(()=>o.map((K,M)=>({id:K.odId,name:K.displayName,color:Zt[M%Zt.length],odId:K.odId})),[o]);m.useEffect(()=>{if(!i){p([]),N(!1);return}if(!Na||!ce){N(!1);return}N(!0);const K=Pt(ce,"trips",i.id,"expenses"),M=Rc(K,cu("date","desc")),q=ls(M,F=>{const le=F.docs.map(re=>({id:re.id,...re.data()}));p(le),N(!1)});return i.currencies&&S(i.currencies),()=>q()},[i]);const T=m.useRef(new Map);m.useEffect(()=>{if(!i){T.current.forEach(M=>M()),T.current.clear();return}if(!Na||!ce)return;const K=new Set(u.map(M=>M.id));T.current.forEach((M,q)=>{K.has(q)||(M(),T.current.delete(q),w(F=>{const le=new Map(F);return le.delete(q),le}))});for(const M of u){if(T.current.has(M.id))continue;const q=Pt(ce,"trips",i.id,"expenses",M.id,"comments"),F=Rc(q,cu("createdAt","asc")),le=ls(F,re=>{const he=re.docs.map(pe=>({id:pe.id,...pe.data()}));w(pe=>{const xe=new Map(pe);return xe.set(M.id,he),xe})},re=>{oe.error(`   (${M.id}):`,re)});T.current.set(M.id,le)}return()=>{T.current.forEach(M=>M()),T.current.clear()}},[i,u]),m.useEffect(()=>{if(!i||!Na||!ce)return;const K=Pt(ce,"trips",i.id,"settlements"),M=ls(K,q=>{const F=new Map;q.docs.forEach(le=>{F.set(le.id,le.data().completed===!0)}),b(F)});return()=>M()},[i]);const g=m.useCallback(async K=>{if(!i||!ce)throw new Error(" ");try{const M=Pt(ce,"trips",i.id,"members"),q={displayName:K,role:"member",joinedAt:$a(),color:Zt[o.length%Zt.length]};await Oc(M,q)}catch(M){throw oe.error("  :",M),new Error("    ")}},[i,o.length]),y=m.useCallback(async(K,M)=>{if(!i||!ce)throw new Error(" ");try{if(M){const F=u.filter(le=>le.paidBy===K||le.sharedBy.includes(K));for(const le of F){const re={};if(le.paidBy===K&&(re.paidBy=M),le.sharedBy.includes(K)&&(re.sharedBy=le.sharedBy.map(he=>he===K?M:he)),Object.keys(re).length>0){const he=Ye(ce,"trips",i.id,"expenses",le.id);await jt(he,re)}}}const q=Ye(ce,"trips",i.id,"members",K);await ns(q)}catch(q){throw oe.error("  :",q),new Error("    ")}},[i,u]),A=m.useCallback(async(K,M)=>{if(!i||!ce)return;const q=Ye(ce,"trips",i.id,"members",K);await jt(q,M)},[i]),R=m.useCallback(async K=>{if(!i||!d||!ce)throw new Error(" ");try{const M=Pt(ce,"trips",i.id,"expenses");await Oc(M,{...K,createdBy:d.uid,createdAt:$a()})}catch(M){throw oe.error("  :",M),new Error("    ")}},[i,d]),E=m.useCallback(async K=>{if(!i||!ce)throw new Error(" ");try{const M=Ye(ce,"trips",i.id,"expenses",K);await ns(M)}catch(M){throw oe.error("  :",M),new Error("    ")}},[i]),_=m.useCallback(async(K,M)=>{if(!i||!ce)throw new Error(" ");try{const q=Ye(ce,"trips",i.id,"expenses",K);await jt(q,M)}catch(q){throw oe.error("  :",q),new Error("    ")}},[i]),G=m.useCallback(async(K,M,q)=>{if(!i||!d||!ce)throw new Error(" ");const F=u.find(le=>le.id===K);if(F)try{const le=F.editHistory||[];for(const[he,pe]of Object.entries(M))he!=="editHistory"&&le.push({id:Math.random().toString(36).substr(2,9),timestamp:new Date().toISOString(),userId:d.uid,userName:d.displayName||"",field:he,oldValue:F[he],newValue:pe,reason:q});const re=Ye(ce,"trips",i.id,"expenses",K);await jt(re,{...M,editHistory:le})}catch(le){throw oe.error(" () :",le),new Error("    ")}},[i,d,u]),ee=m.useCallback(async K=>{if(!i||!ce)throw new Error(" ");try{const M=K.map(async(q,F)=>{const le=Ye(ce,"trips",i.id,"expenses",q);return jt(le,{order:F})});await Promise.all(M)}catch(M){throw oe.error("   :",M),new Error("     ")}},[i]),P=m.useCallback(async K=>{if(!i||!d||!uu)throw new Error(" ");const M=Date.now(),q=`${i.id}/${d.uid}/${M}_${K.name}`,F=kg(uu,`receipts/${q}`);return await Ug(F,K),await Hg(F)},[i,d]),X=m.useCallback(async(K,M)=>{if(!i||!d||!ce)return;const q=Pt(ce,"trips",i.id,"expenses",K,"comments");await Oc(q,{expenseId:K,userId:d.uid,userName:d.displayName||"",userPhoto:d.photoURL,content:M,createdAt:$a()})},[i,d]),ae=m.useCallback(async(K,M)=>{if(!i||!ce)return;const q=Ye(ce,"trips",i.id,"expenses",K,"comments",M);await ns(q)},[i]),I=m.useCallback(async K=>{if(!i||!d)return;const M=u.find(F=>F.id===K);if(!M)return;const q=M.approvedBy||[];q.includes(d.uid)||await _(K,{approvedBy:[...q,d.uid],approved:!0})},[i,d,u,_]),ie=m.useCallback(async K=>{if(!i||!d)return;const M=u.find(le=>le.id===K);if(!M)return;const F=(M.approvedBy||[]).filter(le=>le!==d.uid);await _(K,{approvedBy:F,approved:F.length>0})},[i,d,u,_]),ne=m.useCallback(async(K,M)=>{if(!i||!ce)return;const q=`${K}_${M}`,F=Ye(ce,"trips",i.id,"settlements",q);await jt(F,{completed:!0,completedAt:new Date().toISOString()}).catch(async()=>{const{setDoc:le}=await gf(async()=>{const{setDoc:re}=await import("./firebase-BLlXytI7.js").then(he=>he.x);return{setDoc:re}},[],import.meta.url);await le(F,{from:K,to:M,completed:!0,completedAt:new Date().toISOString()})})},[i]),je=m.useCallback(async(K,M)=>{if(!i||!ce)return;const q=`${K}_${M}`,F=Ye(ce,"trips",i.id,"settlements",q);await jt(F,{completed:!1,completedAt:null}).catch(()=>{})},[i]),Ne=m.useCallback(async(K,M,q,F)=>{if(!i||!d||!ce)return;const le=`${K}_${M}`,re=Ye(ce,"trips",i.id,"settlements",le);try{const{getDoc:he,setDoc:pe}=await gf(async()=>{const{getDoc:Nt,setDoc:Ge}=await import("./firebase-BLlXytI7.js").then(ot=>ot.x);return{getDoc:Nt,setDoc:Ge}},[],import.meta.url),xe=await he(re),Qe={id:Math.random().toString(36).substr(2,9),amount:q,paidAt:new Date().toISOString(),note:F,recordedBy:d.uid,recordedByName:d.displayName||""};if(xe.exists()){const Ge=xe.data().partialPayments||[],ot=Ge.reduce((ta,aa)=>ta+aa.amount,0)+q;await jt(re,{partialPayments:[...Ge,Qe],totalPaid:ot})}else await pe(re,{from:K,to:M,completed:!1,partialPayments:[Qe],totalPaid:q})}catch(he){throw oe.error("  :",he),new Error("     ")}},[i,d]),Z=m.useCallback(async(K,M)=>{if(!i||!ce)return;const q=x.map(le=>le.code===K?{...le,rate:M}:le),F=Ye(ce,"trips",i.id);await jt(F,{currencies:q}),S(q)},[i,x]),H=m.useCallback(async K=>{if(!i||!ce)return;const M=Ye(ce,"trips",i.id);await jt(M,{settlementDeadline:K})},[i]),z=m.useCallback((K,M)=>{const q=x.find(F=>F.code===M);return q?K*q.rate:K},[x]),$=m.useCallback(K=>{let M=0,q=0;for(const F of u){const le=z(F.amount,F.currency);if(F.paidBy===K&&(M+=le),F.sharedBy.includes(K)){if(F.splitMode==="custom"&&F.customRatios){const re=F.customRatios.find(he=>he.personId===K);if(re){q+=le*(re.ratio/100);continue}}q+=pu(le,F.sharedBy.length)}}return{paid:M,shouldPay:q}},[u,z]),te=m.useCallback(()=>{const K={};for(const M of u){const q=z(M.amount,M.currency),F=M.category||"other";K[F]=(K[F]||0)+q}return K},[u,z]),ge=m.useCallback(()=>{const K={};for(const M of u){const q=z(M.amount,M.currency),F=M.date.split("T")[0];K[F]=(K[F]||0)+q}return K},[u,z]),Me=m.useCallback(()=>{const K={};for(const M of u){const q=z(M.amount,M.currency);K[M.paidBy]=(K[M.paidBy]||0)+q}return K},[u,z]),de=m.useCallback((K=1)=>{const M=new Map;for(const pe of v){const{paid:xe,shouldPay:Qe}=$(pe.id);M.set(pe.id,xe-Qe)}const q=[],F=[];for(const[pe,xe]of M)xe>1?q.push({id:pe,amount:xe}):xe<-1&&F.push({id:pe,amount:-xe});q.sort((pe,xe)=>xe.amount-pe.amount),F.sort((pe,xe)=>xe.amount-pe.amount);const le=[];let re=0,he=0;for(;re<q.length&&he<F.length;){const pe=q[re],xe=F[he],Qe=Math.min(pe.amount,xe.amount);if(Qe>1){const Nt=`${xe.id}_${pe.id}`;let Ge=Math.round(Qe);K>1&&(Ge=Math.round(Qe/K)*K),le.push({from:xe.id,to:pe.id,amount:Ge,roundedAmount:K>1?Ge:void 0,completed:j.get(Nt)||!1})}pe.amount-=Qe,xe.amount-=Qe,pe.amount<1&&re++,xe.amount<1&&he++}return le},[v,$,j]);return{persons:v,expenses:u,currencies:x,loading:h,comments:C,settlementStatus:j,addPerson:g,removePerson:y,updatePerson:A,addExpense:R,removeExpense:E,updateExpense:_,updateExpenseWithHistory:G,reorderExpenses:ee,uploadReceipt:P,addComment:X,removeComment:ae,approveExpense:I,unapproveExpense:ie,markSettlementComplete:ne,markSettlementIncomplete:je,partialPay:Ne,updateCurrencyRate:Z,calculateSettlements:de,convertToKRW:z,getTotalByPerson:$,getExpensesByCategory:te,getExpensesByDate:ge,getExpensesByPerson:Me,updateDeadline:H}},ft={trips:null,persons:new Map,expenses:new Map,lastModified:0};function ut(i,o){ft.lastModified=Date.now(),i==="trips"?ft.trips=null:o&&ft[i].delete(o)}function rx(){if(ft.trips!==null)return ft.trips;const i=localStorage.getItem(ea.DEMO_TRIPS);if(i)try{const u=JSON.parse(i);return ft.trips=u,u}catch(u){oe.error("Failed to parse demo trips from localStorage:",u)}const d=[{id:"demo-trip-1",name:"   ()",inviteCode:"DEMO01",ownerId:"demo-user-1",currencies:Vt,createdAt:{seconds:Date.now()/1e3,nanoseconds:0},startDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],endDate:new Date(Date.now()+336*60*60*1e3).toISOString().split("T")[0],archived:!1}];return localStorage.setItem(ea.DEMO_TRIPS,JSON.stringify(d)),ft.trips=d,d}function Sa(){return rx()}function ux(i,o,d){const u=Sa(),p={id:`demo-trip-${Date.now()}`,name:i,inviteCode:hu(),ownerId:"demo-user-1",currencies:Vt,createdAt:{seconds:Date.now()/1e3,nanoseconds:0},startDate:o,endDate:d,archived:!1};return u.push(p),localStorage.setItem(ea.DEMO_TRIPS,JSON.stringify(u)),ut("trips"),p}function ox(i){const o=Sa().filter(d=>d.id!==i);localStorage.setItem(ea.DEMO_TRIPS,JSON.stringify(o)),ut("trips"),localStorage.removeItem(`demo_persons_${i}`),localStorage.removeItem(`demo_expenses_${i}`),ut("persons",i),ut("expenses",i)}function dx(i){const o=Sa().map(d=>d.id===i?{...d,archived:!0}:d);localStorage.setItem(ea.DEMO_TRIPS,JSON.stringify(o)),ut("trips")}function mx(i,o){const d=Sa(),u=d.find(x=>x.id===i);if(!u)throw new Error("    ");const p={...u,id:`demo-trip-${Date.now()}`,name:o,inviteCode:hu(),createdAt:{seconds:Date.now()/1e3,nanoseconds:0},startDate:void 0,endDate:void 0,archived:!1};return d.push(p),localStorage.setItem(ea.DEMO_TRIPS,JSON.stringify(d)),p}function Hc(i){if(ft.persons.has(i))return ft.persons.get(i);const o=`demo_persons_${i}`,d=localStorage.getItem(o);if(d)try{const u=JSON.parse(d);return ft.persons.set(i,u),u}catch(u){oe.error("Failed to parse demo persons from localStorage:",u)}if(i==="demo-trip-1"){const u=[{id:"p1",name:"",color:Zt[0]},{id:"p2",name:"",color:Zt[1]},{id:"p3",name:"",color:Zt[2]}];return localStorage.setItem(o,JSON.stringify(u)),ft.persons.set(i,u),u}return[]}function fx(i,o){const d=Hc(i),u={id:`p-${Date.now()}`,name:o,color:Zt[d.length%Zt.length]};return d.push(u),localStorage.setItem(`demo_persons_${i}`,JSON.stringify(d)),ut("persons",i),u}function hx(i,o,d){if(d){const x=Fa(i).map(S=>{const h={};return S.paidBy===o&&(h.paidBy=d),S.sharedBy.includes(o)&&(h.sharedBy=S.sharedBy.map(N=>N===o?d:N),S.customRatios&&(h.customRatios=S.customRatios.map(N=>N.personId===o?{...N,personId:d}:N))),Object.keys(h).length>0?{...S,...h}:S});localStorage.setItem(`demo_expenses_${i}`,JSON.stringify(x)),ut("expenses",i)}const u=Hc(i).filter(p=>p.id!==o);localStorage.setItem(`demo_persons_${i}`,JSON.stringify(u)),ut("persons",i)}function px(i,o,d){const u=Hc(i).map(p=>p.id===o?{...p,...d}:p);localStorage.setItem(`demo_persons_${i}`,JSON.stringify(u)),ut("persons",i)}function Fa(i){if(ft.expenses.has(i))return ft.expenses.get(i);const o=`demo_expenses_${i}`,d=localStorage.getItem(o);if(d)try{const u=JSON.parse(d);return ft.expenses.set(i,u),u}catch(u){oe.error("Failed to parse demo expenses from localStorage:",u)}if(i==="demo-trip-1"){const u=new Date,p=new Date(u);p.setDate(u.getDate()-5);const x=new Date(u);x.setDate(u.getDate()-4);const S=new Date(u);S.setDate(u.getDate()-3);const h=new Date(u);h.setDate(u.getDate()-2);const N=new Date(u);N.setDate(u.getDate()-1);const C=[{id:"e1",description:"  ",amount:3200,currency:"JPY",paidBy:"p1",sharedBy:["p1","p2","p3"],date:p.toISOString(),category:"transport",location:" "},{id:"e2",description:"  (3)",amount:45e3,currency:"JPY",paidBy:"p3",sharedBy:["p1","p2","p3"],date:p.toISOString(),category:"accommodation",location:"  "},{id:"e3",description:"  ",amount:12500,currency:"JPY",paidBy:"p2",sharedBy:["p1","p2","p3"],date:p.toISOString(),category:"food",location:" "},{id:"e4",description:" 1 x3",amount:2400,currency:"JPY",paidBy:"p1",sharedBy:["p1","p2","p3"],date:x.toISOString(),category:"transport"},{id:"e5",description:"  ",amount:1800,currency:"JPY",paidBy:"p2",sharedBy:["p1","p2","p3"],date:x.toISOString(),category:"food",location:""},{id:"e6",description:"  ",amount:6900,currency:"JPY",paidBy:"p3",sharedBy:["p1","p2","p3"],date:x.toISOString(),category:"activity",location:" "},{id:"e7",description:" ",amount:3600,currency:"JPY",paidBy:"p1",sharedBy:["p1","p2","p3"],date:x.toISOString(),category:"food",location:" "},{id:"e8",description:" ",amount:15e3,currency:"JPY",paidBy:"p2",sharedBy:["p1","p2","p3"],date:x.toISOString(),category:"food",location:" "},{id:"e9",description:" ",amount:28e3,currency:"JPY",paidBy:"p1",sharedBy:["p1"],date:S.toISOString(),category:"shopping",location:" "},{id:"e10",description:" ",amount:8500,currency:"JPY",paidBy:"p2",sharedBy:["p2"],date:S.toISOString(),category:"shopping",location:""},{id:"e11",description:" ",amount:5400,currency:"JPY",paidBy:"p3",sharedBy:["p1","p2","p3"],date:S.toISOString(),category:"food",location:" "},{id:"e12",description:"  ",amount:10500,currency:"JPY",paidBy:"p1",sharedBy:["p1","p2","p3"],date:S.toISOString(),category:"activity",location:""},{id:"e13",description:" 1 ",amount:26400,currency:"JPY",paidBy:"p2",sharedBy:["p1","p2","p3"],date:h.toISOString(),category:"activity",location:" "},{id:"e14",description:"  +",amount:8500,currency:"JPY",paidBy:"p3",sharedBy:["p1","p2","p3"],date:h.toISOString(),category:"food",location:" "},{id:"e15",description:" ",amount:12e3,currency:"JPY",paidBy:"p1",sharedBy:["p1","p2"],date:h.toISOString(),category:"shopping",location:" "},{id:"e16",description:" ",amount:1500,currency:"JPY",paidBy:"p2",sharedBy:["p1","p2","p3"],date:N.toISOString(),category:"food",location:""},{id:"e17",description:"   ()",amount:3200,currency:"JPY",paidBy:"p3",sharedBy:["p1","p2","p3"],date:N.toISOString(),category:"transport",location:" "},{id:"e18",description:"  ",amount:55,currency:"USD",paidBy:"p1",sharedBy:["p1"],date:N.toISOString(),category:"shopping",location:" "}];return localStorage.setItem(o,JSON.stringify(C)),ft.expenses.set(i,C),C}return[]}function gx(i,o){const d=Fa(i),u={...o,id:`e-${Date.now()}`};return d.push(u),localStorage.setItem(`demo_expenses_${i}`,JSON.stringify(d)),ut("expenses",i),u}function xx(i,o){const d=Fa(i).filter(u=>u.id!==o);localStorage.setItem(`demo_expenses_${i}`,JSON.stringify(d)),ut("expenses",i)}function Ef(i,o,d){const u=Fa(i).map(p=>p.id===o?{...p,...d}:p);localStorage.setItem(`demo_expenses_${i}`,JSON.stringify(u)),ut("expenses",i)}function yx(i){return Sa().find(u=>u.id===i)?.currencies||Vt}function vx(i,o,d){const u=Sa().map(p=>p.id===i?{...p,currencies:p.currencies.map(x=>x.code===o?{...x,rate:d}:x)}:p);localStorage.setItem(ea.DEMO_TRIPS,JSON.stringify(u)),ut("trips")}function gu(i,o){const d=`demo_comments_${i}_${o}`,u=localStorage.getItem(d);if(u)try{return JSON.parse(u)}catch(p){oe.error("Failed to parse demo comments:",p)}return[]}function bx(i,o,d,u=" "){const p=gu(i,o),x={id:`c-${Date.now()}`,expenseId:o,userId:"demo-user-1",userName:u,content:d,createdAt:new Date().toISOString()};return p.push(x),localStorage.setItem(`demo_comments_${i}_${o}`,JSON.stringify(p)),x}function jx(i,o,d){const u=gu(i,o).filter(p=>p.id!==d);localStorage.setItem(`demo_comments_${i}_${o}`,JSON.stringify(u))}function as(i,o,d){const u=`demo_settlement_status_${i}_${o}_${d}`,p=localStorage.getItem(u);if(p)try{return JSON.parse(p)}catch(h){oe.error("Failed to parse demo settlement status:",h)}const x=`demo_settlement_${i}_${o}_${d}`;return localStorage.getItem(x)==="completed"?{completed:!0}:null}function du(i,o,d,u){const p=`demo_settlement_status_${i}_${o}_${d}`;localStorage.setItem(p,JSON.stringify(u));const x=`demo_settlement_${i}_${o}_${d}`;u.completed?localStorage.setItem(x,"completed"):localStorage.removeItem(x)}function Nx(i,o,d,u,p){const x=as(i,o,d)||{completed:!1,partialPayments:[],totalPaid:0},S={id:`pp-${Date.now()}`,amount:u,paidAt:new Date().toISOString(),note:p,recordedBy:"demo-user-1",recordedByName:" "},h=[...x.partialPayments||[],S],N=h.reduce((C,w)=>C+w.amount,0);return du(i,o,d,{...x,partialPayments:h,totalPaid:N}),S}function Sx(i,o){const d=Fa(i),u=o.map((S,h)=>{const N=d.find(C=>C.id===S);return N?{...N,order:h}:null}).filter(Boolean),p=d.filter(S=>!o.includes(S.id)),x=[...u,...p];localStorage.setItem(`demo_expenses_${i}`,JSON.stringify(x)),ut("expenses",i)}function Cx(i,o,d="demo-user-1"){const u=Fa(i).map(p=>{if(p.id===o){const x=p.approvedBy||[];if(!x.includes(d))return{...p,approvedBy:[...x,d],approved:!0}}return p});localStorage.setItem(`demo_expenses_${i}`,JSON.stringify(u)),ut("expenses",i)}function Ex(i,o,d="demo-user-1"){const u=Fa(i).map(p=>{if(p.id===o){const x=(p.approvedBy||[]).filter(S=>S!==d);return{...p,approvedBy:x,approved:x.length>0}}return p});localStorage.setItem(`demo_expenses_${i}`,JSON.stringify(u)),ut("expenses",i)}const Df=new Map;function mu(){const[i,o]=m.useState(()=>{try{const M=localStorage.getItem("demo_current_trip");if(M)return Sa().find(F=>F.id===M)||null}catch(M){oe.error("Failed to load current trip:",M)}return null}),[d,u]=m.useState(0),p=m.useCallback(()=>{u(M=>M+1)},[]),x=m.useCallback(M=>{o(M),M?localStorage.setItem("demo_current_trip",M.id):localStorage.removeItem("demo_current_trip")},[]),S=m.useMemo(()=>Sa(),[d]),h=m.useMemo(()=>i?Hc(i.id):[],[i,d]),N=m.useMemo(()=>i?Fa(i.id):[],[i,d]),C=m.useMemo(()=>i?yx(i.id):[],[i,d]),w=m.useMemo(()=>{if(!i)return new Map;const M=new Map;return N.forEach(q=>{const le=gu(i.id,q.id).map(re=>({...re,createdAt:{seconds:new Date(re.createdAt).getTime()/1e3,nanoseconds:0}}));M.set(q.id,le)}),M},[i,N,d]),j=m.useMemo(()=>{if(!i)return new Map;const M=new Map;return h.forEach(q=>{h.forEach(F=>{if(q.id!==F.id){const le=as(i.id,q.id,F.id);le&&M.set(`${q.id}_${F.id}`,le.completed)}})}),M},[i,h,d]),b=m.useCallback(async(M,q,F)=>{const le=ux(M,q,F);return p(),le},[p]),v=m.useCallback(async M=>{ox(M),i?.id===M&&x(null),p()},[i,x,p]),T=m.useCallback(async M=>{dx(M),i?.id===M&&x(null),p()},[i,x,p]),g=m.useCallback(async(M,q)=>{const F=mx(M,q);return p(),F},[p]),y=m.useCallback(async M=>{i&&(fx(i.id,M),p())},[i,p]),A=m.useCallback(async(M,q)=>{i&&(hx(i.id,M,q),p())},[i,p]),R=m.useCallback(async(M,q)=>{i&&(px(i.id,M,q),p())},[i,p]),E=m.useCallback(async M=>{if(i){if(M.amount<=0)throw new Error(" 0  ");if(!M.sharedBy||M.sharedBy.length===0)throw new Error(" ");gx(i.id,M),p()}},[i,p]),_=m.useCallback(async M=>{i&&(xx(i.id,M),p())},[i,p]),G=m.useCallback(async(M,q)=>{i&&(Ef(i.id,M,q),p())},[i,p]),ee=m.useCallback(async(M,q,F)=>{if(!i)return;const le=N.find(he=>he.id===M);if(!le)return;const re=le.editHistory||[];for(const[he,pe]of Object.entries(q))he!=="editHistory"&&re.push({id:Math.random().toString(36).substr(2,9),timestamp:new Date().toISOString(),userId:"demo-user-1",userName:" ",field:he,oldValue:le[he],newValue:pe,reason:F});Ef(i.id,M,{...q,editHistory:re}),p()},[i,N,p]),P=m.useCallback(async M=>{i&&(Sx(i.id,M),p())},[i,p]),X=m.useCallback(async(M,q)=>{i&&(bx(i.id,M,q),p())},[i,p]),ae=m.useCallback(async(M,q)=>{i&&(jx(i.id,M,q),p())},[i,p]),I=m.useCallback(async M=>{i&&(Cx(i.id,M),p())},[i,p]),ie=m.useCallback(async M=>{i&&(Ex(i.id,M),p())},[i,p]),ne=m.useCallback(async(M,q)=>{i&&(vx(i.id,M,q),p())},[i,p]),je=m.useCallback(async M=>{const q=`${M.name}_${M.size}_${M.lastModified}`,F=Df.get(q);F&&URL.revokeObjectURL(F);const le=URL.createObjectURL(M);return Df.set(q,le),le},[]),Ne=m.useCallback((M,q)=>{const F=C.find(re=>re.code===q),le=M*(F?.rate||1);return Math.round(le*100)/100},[C]),Z=m.useCallback(M=>{const q=N.filter(le=>le.paidBy===M).reduce((le,re)=>le+Ne(re.amount,re.currency),0),F=N.reduce((le,re)=>{if(re.sharedBy.includes(M)){const he=Ne(re.amount,re.currency);if(re.splitMode==="custom"&&re.customRatios){const pe=re.customRatios.find(xe=>xe.personId===M);if(pe)return le+he*pe.ratio/100}return le+pu(he,re.sharedBy.length)}return le},0);return{paid:q,shouldPay:Math.round(F)}},[N,Ne]),H=m.useCallback(()=>{const M={};h.forEach(pe=>{const{paid:xe,shouldPay:Qe}=Z(pe.id);M[pe.id]=xe-Qe});const q=[],F=Object.entries(M).filter(([pe,xe])=>xe<0).sort((pe,xe)=>pe[1]-xe[1]),le=Object.entries(M).filter(([pe,xe])=>xe>0).sort((pe,xe)=>xe[1]-pe[1]);let re=0,he=0;for(;re<F.length&&he<le.length;){const[pe,xe]=F[re],[Qe,Nt]=le[he],Ge=Math.min(-xe,Nt);if(Ge>0){const ot=i?as(i.id,pe,Qe):null,ta=ot?.completed||!1,aa=ot?.partialPayments||[],bl=ot?.totalPaid||0;q.push({from:pe,to:Qe,amount:Math.round(Ge),completed:ta,completedAt:ot?.completedAt,partialPayments:aa,totalPaid:bl})}F[re]=[pe,xe+Ge],le[he]=[Qe,Nt-Ge],F[re][1]>=-.5&&re++,le[he][1]<=.5&&he++}return q},[i,h,Z]),z=m.useCallback(()=>{const M={};return N.forEach(q=>{const F=Ne(q.amount,q.currency);M[q.category]=(M[q.category]||0)+F}),M},[N,Ne]),$=m.useCallback(()=>{const M={};return N.forEach(q=>{const F=q.date.split("T")[0],le=Ne(q.amount,q.currency);M[F]=(M[F]||0)+le}),M},[N,Ne]),te=m.useCallback(()=>{const M={};return N.forEach(q=>{const F=Ne(q.amount,q.currency);M[q.paidBy]=(M[q.paidBy]||0)+F}),M},[N,Ne]),ge=m.useCallback(async(M,q)=>{if(!i)return;const F=as(i.id,M,q);du(i.id,M,q,{...F,completed:!0,completedAt:new Date().toISOString()}),p()},[i,p]),Me=m.useCallback(async(M,q)=>{if(!i)return;const F=as(i.id,M,q);du(i.id,M,q,{...F,completed:!1,completedAt:void 0}),p()},[i,p]),de=m.useCallback(async(M,q,F,le)=>{i&&(Nx(i.id,M,q,F,le),p())},[i,p]),K=m.useCallback(async M=>{if(!i)return;const q={...i,settlementDeadline:M};x(q);const le=Sa().map(re=>re.id===i.id?q:re);localStorage.setItem("demo_trips",JSON.stringify(le))},[i,x]);return{trips:S,currentTrip:i,persons:h,expenses:N,currencies:C,loading:!1,comments:w,settlementStatus:j,setCurrentTrip:x,createTrip:b,deleteTrip:v,archiveTrip:T,duplicateTrip:g,addPerson:y,removePerson:A,updatePerson:R,addExpense:E,removeExpense:_,updateExpense:G,updateExpenseWithHistory:ee,reorderExpenses:P,uploadReceipt:je,addComment:X,removeComment:ae,approveExpense:I,unapproveExpense:ie,updateCurrencyRate:ne,convertToKRW:Ne,getTotalByPerson:Z,calculateSettlements:H,getExpensesByCategory:z,getExpensesByDate:$,getExpensesByPerson:te,markSettlementComplete:ge,markSettlementIncomplete:Me,partialPay:de,updateDeadline:K}}function Dx(){const{signInWithGoogle:i,loading:o}=ss(),d=async()=>{try{await i()}catch(u){oe.error(" :",u)}};return l.jsxs("div",{className:"login-page",children:[l.jsxs("div",{className:"login-hero",children:[l.jsx("div",{className:"login-logo",children:""}),l.jsx("h1",{children:" "}),l.jsx("p",{className:"login-subtitle",children:"   "})]}),l.jsxs("div",{className:"login-card",children:[l.jsxs("div",{className:"login-features",children:[l.jsxs("div",{className:"feature-item",children:[l.jsx("span",{className:"feature-icon",children:""}),l.jsxs("div",{className:"feature-text",children:[l.jsx("h3",{children:" "}),l.jsx("p",{children:"   "})]})]}),l.jsxs("div",{className:"feature-item",children:[l.jsx("span",{className:"feature-icon",children:""}),l.jsxs("div",{className:"feature-text",children:[l.jsx("h3",{children:" "}),l.jsx("p",{children:"    "})]})]}),l.jsxs("div",{className:"feature-item",children:[l.jsx("span",{className:"feature-icon",children:""}),l.jsxs("div",{className:"feature-text",children:[l.jsx("h3",{children:" "}),l.jsx("p",{children:"    "})]})]})]}),l.jsxs("button",{className:"btn-google",onClick:d,disabled:o,children:[l.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),l.jsx("span",{children:o?" ...":"Google "})]}),l.jsx("p",{className:"login-terms",children:"     "})]})]})}const Tf="dark_mode_settings",nu={mode:"manual",scheduleStart:"20:00",scheduleEnd:"07:00"};function Lc({className:i="",showSettings:o=!1}){const{effectiveTheme:d,toggleTheme:u,setTheme:p}=Ff(),[x,S]=m.useState(!1),[h,N]=m.useState(()=>{const v=localStorage.getItem(Tf);if(v)try{return{...nu,...JSON.parse(v)}}catch{return nu}return nu}),C=m.useCallback(()=>{if(h.mode!=="scheduled")return;const v=new Date,T=v.getHours()*60+v.getMinutes(),[g,y]=h.scheduleStart.split(":").map(Number),[A,R]=h.scheduleEnd.split(":").map(Number),E=g*60+y,_=A*60+R;let G;E<_?G=T>=E&&T<_:G=T>=E||T<_,p(G?"dark":"light")},[h.mode,h.scheduleStart,h.scheduleEnd,p]);m.useEffect(()=>{if(h.mode==="scheduled"){C();const v=setInterval(C,6e4);return()=>clearInterval(v)}},[h.mode,C]),m.useEffect(()=>{if(h.mode==="system"){const v=window.matchMedia("(prefers-color-scheme: dark)"),T=g=>{p(g.matches?"dark":"light")};return p(v.matches?"dark":"light"),v.addEventListener("change",T),()=>v.removeEventListener("change",T)}},[h.mode,p]);const w=v=>{const T={...h,...v};N(T),localStorage.setItem(Tf,JSON.stringify(T))},j=v=>{w({mode:v})},b=()=>{h.mode==="manual"?u():S(!0)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`dark-mode-toggle-container ${i}`,children:[l.jsxs("button",{className:"dark-mode-toggle",onClick:b,title:h.mode==="manual"?d==="dark"?"  ":"  ":`  (${h.mode==="system"?"":""})`,children:[l.jsx("span",{className:"icon",children:d==="dark"?"":""}),h.mode!=="manual"&&l.jsx("span",{className:"auto-indicator",children:h.mode==="system"?"":""})]}),o&&l.jsx("button",{className:"settings-btn",onClick:()=>S(!0),title:" ",children:""})]}),x&&l.jsx("div",{className:"dark-mode-modal-overlay",onClick:()=>S(!1),children:l.jsxs("div",{className:"dark-mode-modal",onClick:v=>v.stopPropagation(),children:[l.jsx("h3",{children:"  "}),l.jsxs("div",{className:"mode-options",children:[l.jsxs("label",{className:`mode-option ${h.mode==="manual"?"active":""}`,children:[l.jsx("input",{type:"radio",name:"darkMode",checked:h.mode==="manual",onChange:()=>j("manual")}),l.jsx("span",{className:"mode-icon",children:""}),l.jsxs("div",{className:"mode-info",children:[l.jsx("span",{className:"mode-name",children:""}),l.jsx("span",{className:"mode-desc",children:"   "})]})]}),l.jsxs("label",{className:`mode-option ${h.mode==="system"?"active":""}`,children:[l.jsx("input",{type:"radio",name:"darkMode",checked:h.mode==="system",onChange:()=>j("system")}),l.jsx("span",{className:"mode-icon",children:""}),l.jsxs("div",{className:"mode-info",children:[l.jsx("span",{className:"mode-name",children:" "}),l.jsx("span",{className:"mode-desc",children:"OS    "})]})]}),l.jsxs("label",{className:`mode-option ${h.mode==="scheduled"?"active":""}`,children:[l.jsx("input",{type:"radio",name:"darkMode",checked:h.mode==="scheduled",onChange:()=>j("scheduled")}),l.jsx("span",{className:"mode-icon",children:""}),l.jsxs("div",{className:"mode-info",children:[l.jsx("span",{className:"mode-name",children:" "}),l.jsx("span",{className:"mode-desc",children:"   "})]})]})]}),h.mode==="scheduled"&&l.jsxs("div",{className:"schedule-settings",children:[l.jsxs("div",{className:"schedule-row",children:[l.jsxs("label",{children:[l.jsx("span",{children:"  "}),l.jsx("input",{type:"time",value:h.scheduleStart,onChange:v=>w({scheduleStart:v.target.value})})]}),l.jsxs("label",{children:[l.jsx("span",{children:"  "}),l.jsx("input",{type:"time",value:h.scheduleEnd,onChange:v=>w({scheduleEnd:v.target.value})})]})]}),l.jsxs("p",{className:"schedule-hint",children:[" ",h.scheduleStart," ~ ",h.scheduleEnd,"  "]})]}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{className:"btn-primary",onClick:()=>S(!1),children:""})})]})})]})}function Tx(i,o){if(!i&&!o)return null;const d=new Date;if(d.setHours(0,0,0,0),i){const u=new Date(i);u.setHours(0,0,0,0);const p=Math.ceil((u.getTime()-d.getTime())/(1e3*60*60*24));if(p>0)return`D-${p}`;if(p===0)return"D-Day!"}if(o){const u=new Date(o);return u.setHours(0,0,0,0),Math.ceil((u.getTime()-d.getTime())/(1e3*60*60*24))>=0?" ":""}return null}function Mx(){const{user:i,signOut:o}=ss(),{trips:d,loading:u,setCurrentTrip:p,createTrip:x,joinTrip:S,archiveTrip:h,duplicateTrip:N}=Uc(),[C,w]=m.useState(!1),[j,b]=m.useState(!1),[v,T]=m.useState(""),[g,y]=m.useState(""),[A,R]=m.useState(""),[E,_]=m.useState(""),[G,ee]=m.useState(""),[P,X]=m.useState(!1),[ae,I]=m.useState(!1),ie=async()=>{if(v.trim()){X(!0),ee("");try{const te=await x(v.trim(),g||void 0,A||void 0);w(!1),T(""),y(""),R(""),p(te)}catch(te){ee("  "),oe.error("  :",te)}finally{X(!1)}}},ne=async()=>{if(E.trim()){X(!0),ee("");try{const te=await S(E.trim());te?(b(!1),_(""),p(te)):ee("   ")}catch(te){ee("  "),oe.error("  :",te)}finally{X(!1)}}},je=te=>{p(te)},Ne=async(te,ge)=>{te.stopPropagation(),confirm("  ?")&&await h?.(ge)},Z=async(te,ge)=>{te.stopPropagation();const Me=prompt("   :",`${ge.name} ()`);Me&&await N?.(ge.id,Me)},H=d.filter(te=>!te.archived),z=d.filter(te=>te.archived),$=ae?z:H;return u?l.jsx("div",{className:"trip-list-page",children:l.jsxs("div",{className:"loading-state",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:" ..."})]})}):l.jsxs("div",{className:"trip-list-page",children:[l.jsxs("header",{className:"trip-list-header",children:[l.jsxs("div",{className:"user-info",children:[i?.photoURL&&l.jsx("img",{src:i.photoURL,alt:"",className:"user-avatar"}),l.jsxs("div",{className:"user-text",children:[l.jsx("span",{className:"user-name",children:i?.displayName||""}),l.jsx("span",{className:"user-email",children:i?.email})]})]}),l.jsxs("div",{className:"header-actions",children:[l.jsx(Lc,{className:"standalone"}),l.jsx("button",{className:"btn-logout",onClick:o,children:""})]})]}),l.jsxs("main",{className:"trip-list-main",children:[l.jsx("h1",{children:"  "}),l.jsxs("div",{className:"action-buttons",children:[l.jsx("button",{className:"btn btn-primary",onClick:()=>w(!0),children:"+   "}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>b(!0),children:"   "})]}),z.length>0&&l.jsxs("div",{className:"archive-toggle",children:[l.jsxs("button",{className:`archive-toggle-btn ${ae?"":"active"}`,onClick:()=>I(!1),children:["  (",H.length,")"]}),l.jsxs("button",{className:`archive-toggle-btn ${ae?"active":""}`,onClick:()=>I(!0),children:[" (",z.length,")"]})]}),$.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("h2",{children:ae?"  ":"  "}),l.jsx("p",{children:ae?"":"     "})]}):l.jsx("ul",{className:"trip-list",children:$.map(te=>{const ge=Tx(te.startDate,te.endDate);return l.jsxs("li",{className:`trip-item ${te.archived?"archived":""}`,onClick:()=>je(te),children:[l.jsx("div",{className:"trip-icon",children:""}),l.jsxs("div",{className:"trip-info",children:[l.jsx("h3",{children:te.name}),l.jsxs("div",{className:"trip-meta",children:[l.jsxs("span",{className:"trip-code",children:[": ",te.inviteCode]}),te.startDate&&l.jsxs("span",{className:"trip-dates",children:[" ",te.startDate,te.endDate&&` ~ ${te.endDate}`]})]})]}),ge&&l.jsx("span",{className:`trip-dday ${ge==="D-Day!"?"today":""}`,children:ge}),l.jsxs("div",{className:"trip-actions",children:[l.jsx("button",{className:"trip-action-btn",onClick:Me=>Z(Me,te),title:"",children:""}),!te.archived&&l.jsx("button",{className:"trip-action-btn",onClick:Me=>Ne(Me,te.id),title:"",children:""})]}),l.jsx("div",{className:"trip-arrow",children:""})]},te.id)})})]}),C&&l.jsx("div",{className:"modal-overlay",onClick:()=>w(!1),children:l.jsxs("div",{className:"modal-content",onClick:te=>te.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:()=>w(!1),children:""})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",className:"input-field",placeholder:":   ",value:v,onChange:te=>T(te.target.value),autoFocus:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" ()"}),l.jsx("input",{type:"date",className:"input-field",value:g,onChange:te=>y(te.target.value)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" ()"}),l.jsx("input",{type:"date",className:"input-field",value:A,onChange:te=>R(te.target.value)})]})]}),G&&l.jsx("p",{className:"error-text",children:G})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>w(!1),children:""}),l.jsx("button",{className:"btn btn-primary",onClick:ie,disabled:!v.trim()||P,children:P?" ...":""})]})]})}),j&&l.jsx("div",{className:"modal-overlay",onClick:()=>b(!1),children:l.jsxs("div",{className:"modal-content",onClick:te=>te.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:()=>b(!1),children:""})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",className:"input-field invite-code-input",placeholder:": ABC123",value:E,onChange:te=>_(te.target.value.toUpperCase()),maxLength:6,autoFocus:!0})]}),G&&l.jsx("p",{className:"error-text",children:G})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>b(!1),children:""}),l.jsx("button",{className:"btn btn-primary",onClick:ne,disabled:E.length!==6||P,children:P?" ...":""})]})]})})]})}function Ax(i,o){if(!i&&!o)return null;const d=new Date;if(d.setHours(0,0,0,0),i){const u=new Date(i);u.setHours(0,0,0,0);const p=Math.ceil((u.getTime()-d.getTime())/(1e3*60*60*24));if(p>0)return`D-${p}`;if(p===0)return"D-Day!"}if(o){const u=new Date(o);return u.setHours(0,0,0,0),Math.ceil((u.getTime()-d.getTime())/(1e3*60*60*24))>=0?" ":""}return null}function wx({onSelectTrip:i}={}){const{disableDemoMode:o,demoUser:d}=kc(),u=mu(),[p,x]=m.useState(!1),[S,h]=m.useState(""),[N,C]=m.useState(""),[w,j]=m.useState(""),[b,v]=m.useState(!1),[T,g]=m.useState(!1),y=async()=>{if(S.trim()){v(!0);try{const P=await u.createTrip(S.trim(),N||void 0,w||void 0);x(!1),h(""),C(""),j(""),i?i(P):u.setCurrentTrip(P)}catch(P){oe.error("  :",P)}finally{v(!1)}}},A=P=>{i?i(P):u.setCurrentTrip(P)},R=async(P,X)=>{P.stopPropagation(),confirm("  ?")&&await u.archiveTrip(X)},E=async(P,X)=>{P.stopPropagation();const ae=prompt("   :",`${X.name} ()`);ae&&await u.duplicateTrip(X.id,ae)},_=u.trips.filter(P=>!P.archived),G=u.trips.filter(P=>P.archived),ee=T?G:_;return l.jsxs("div",{className:"trip-list-page",children:[l.jsxs("header",{className:"trip-list-header",children:[l.jsxs("div",{className:"user-info",children:[l.jsx("div",{className:"demo-avatar",children:""}),l.jsxs("div",{className:"user-text",children:[l.jsx("span",{className:"user-name",children:d?.displayName||" "}),l.jsx("span",{className:"user-email demo-mode-label",children:" "})]})]}),l.jsxs("div",{className:"header-actions",children:[l.jsx(Lc,{className:"standalone"}),l.jsx("button",{className:"btn-logout",onClick:o,children:" "})]})]}),l.jsxs("main",{className:"trip-list-main",children:[l.jsxs("h1",{children:["   ",l.jsx("span",{className:"demo-tag",children:""})]}),l.jsx("div",{className:"action-buttons",children:l.jsx("button",{className:"btn btn-primary",onClick:()=>x(!0),children:"+   "})}),G.length>0&&l.jsxs("div",{className:"archive-toggle",children:[l.jsxs("button",{className:`archive-toggle-btn ${T?"":"active"}`,onClick:()=>g(!1),children:["  (",_.length,")"]}),l.jsxs("button",{className:`archive-toggle-btn ${T?"active":""}`,onClick:()=>g(!0),children:[" (",G.length,")"]})]}),ee.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("h2",{children:T?"  ":"  "}),l.jsx("p",{children:T?"":"  !"})]}):l.jsx("ul",{className:"trip-list",children:ee.map(P=>{const X=Ax(P.startDate,P.endDate);return l.jsxs("li",{className:`trip-item ${P.archived?"archived":""}`,onClick:()=>A(P),children:[l.jsx("div",{className:"trip-icon",children:""}),l.jsxs("div",{className:"trip-info",children:[l.jsx("h3",{children:P.name}),l.jsx("div",{className:"trip-meta",children:P.startDate&&l.jsxs("span",{className:"trip-dates",children:[" ",P.startDate,P.endDate&&` ~ ${P.endDate}`]})})]}),X&&l.jsx("span",{className:`trip-dday ${X==="D-Day!"?"today":""}`,children:X}),l.jsxs("div",{className:"trip-actions",children:[l.jsx("button",{className:"trip-action-btn",onClick:ae=>E(ae,P),title:"",children:""}),!P.archived&&l.jsx("button",{className:"trip-action-btn",onClick:ae=>R(ae,P.id),title:"",children:""})]}),l.jsx("div",{className:"trip-arrow",children:""})]},P.id)})})]}),p&&l.jsx("div",{className:"modal-overlay",onClick:()=>x(!1),children:l.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:()=>x(!1),children:""})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",className:"input-field",placeholder:":   ",value:S,onChange:P=>h(P.target.value),autoFocus:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" ()"}),l.jsx("input",{type:"date",className:"input-field",value:N,onChange:P=>C(P.target.value)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" ()"}),l.jsx("input",{type:"date",className:"input-field",value:w,onChange:P=>j(P.target.value)})]})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>x(!1),children:""}),l.jsx("button",{className:"btn btn-primary",onClick:y,disabled:!S.trim()||b,children:b?" ...":""})]})]})})]})}function Ox({participantName:i,linkedExpenseCount:o,onConfirm:d,onCancel:u}){const[p,x]=m.useState(""),[S,h]=m.useState(o>0?"warning":"confirm"),N=p.trim()!==i.trim(),C=()=>{N||d()},w=j=>{j.key==="Enter"&&!N&&C(),j.key==="Escape"&&u()};return l.jsx("div",{className:"modal-overlay confirm-delete-overlay",onClick:u,children:l.jsxs("div",{className:"modal-content confirm-delete-modal",onClick:j=>j.stopPropagation(),onKeyDown:w,children:[l.jsxs("div",{className:"modal-header confirm-delete-header",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("h2",{children:" "}),l.jsx("button",{className:"btn-close",onClick:u,children:""})]}),l.jsx("div",{className:"modal-body confirm-delete-body",children:S==="warning"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"delete-warning",children:[l.jsxs("div",{className:"warning-title",children:[l.jsx("strong",{children:i}),"  ?"]}),l.jsxs("div",{className:"warning-impact",children:[l.jsx("div",{className:"impact-icon",children:""}),l.jsxs("div",{className:"impact-text",children:[l.jsx("strong",{children:"  !"}),l.jsxs("p",{children:["   ",l.jsxs("strong",{className:"danger-text",children:[o,""]}),"   ."]}),l.jsx("p",{className:"impact-detail",children:"           ."})]})]}),l.jsxs("div",{className:"warning-notice",children:[l.jsx("span",{className:"notice-icon",children:""}),l.jsx("span",{children:"      ."})]})]}),l.jsxs("div",{className:"confirm-delete-actions",children:[l.jsx("button",{className:"btn btn-secondary",onClick:u,children:""}),l.jsx("button",{className:"btn btn-danger",onClick:()=>h("confirm"),children:" "})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"confirm-input-section",children:[l.jsxs("p",{className:"confirm-instruction",children:["   ",l.jsxs("strong",{children:['"',i,'"']}),"() ."]}),l.jsx("input",{type:"text",className:"input-field confirm-input",placeholder:i,value:p,onChange:j=>x(j.target.value),autoFocus:!0}),p.length>0&&N&&l.jsx("p",{className:"confirm-error",children:"   ."})]}),l.jsxs("div",{className:"confirm-delete-actions",children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>{o>0?h("warning"):u(),x("")},children:""}),l.jsx("button",{className:`btn btn-danger ${N?"disabled":""}`,onClick:C,disabled:N,children:"  "})]})]})})]})})}function zx({deletingPerson:i,persons:o,expenses:d,onConfirm:u,onCancel:p}){const[x,S]=m.useState(null),[h,N]=m.useState("reassign"),C=m.useMemo(()=>d.filter(g=>g.paidBy===i.id||g.sharedBy.includes(i.id)),[d,i.id]),w=m.useMemo(()=>o.filter(g=>g.id!==i.id),[o,i.id]),j=C.filter(g=>g.paidBy===i.id).length,b=C.filter(g=>g.sharedBy.includes(i.id)).length,v=()=>{h==="reassign"&&x?u(x):h==="delete"&&u(null)},T=h==="delete"||h==="reassign"&&x;return l.jsx("div",{className:"reassign-modal-overlay",onClick:p,children:l.jsxs("div",{className:"reassign-modal",onClick:g=>g.stopPropagation(),children:[l.jsxs("div",{className:"reassign-modal-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:p,children:""})]}),l.jsxs("div",{className:"reassign-modal-content",children:[l.jsxs("div",{className:"person-info",children:[l.jsx("div",{className:"person-avatar",style:{backgroundColor:i.color},children:i.name.charAt(0)}),l.jsx("span",{className:"person-name",children:i.name})]}),C.length>0?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"expense-summary",children:[l.jsxs("p",{className:"warning-text",children:["   ",l.jsxs("strong",{children:[C.length,""]}),"   :"]}),l.jsxs("ul",{className:"expense-stats",children:[j>0&&l.jsxs("li",{children:["  : ",j,""]}),b>0&&l.jsxs("li",{children:["  : ",b,""]})]})]}),l.jsxs("div",{className:"reassign-options",children:[l.jsxs("label",{className:`option-card ${h==="reassign"?"selected":""}`,children:[l.jsx("input",{type:"radio",name:"reassignMode",checked:h==="reassign",onChange:()=>N("reassign")}),l.jsxs("div",{className:"option-content",children:[l.jsx("span",{className:"option-icon",children:""}),l.jsx("span",{className:"option-label",children:"  "}),l.jsx("span",{className:"option-desc",children:"  "})]})]}),l.jsxs("label",{className:`option-card danger ${h==="delete"?"selected":""}`,children:[l.jsx("input",{type:"radio",name:"reassignMode",checked:h==="delete",onChange:()=>N("delete")}),l.jsxs("div",{className:"option-content",children:[l.jsx("span",{className:"option-icon",children:""}),l.jsx("span",{className:"option-label",children:"  "}),l.jsx("span",{className:"option-desc",children:" "})]})]})]}),h==="reassign"&&l.jsxs("div",{className:"person-select",children:[l.jsx("label",{children:"  :"}),l.jsx("div",{className:"person-options",children:w.map(g=>l.jsxs("button",{className:`person-option ${x===g.id?"selected":""}`,onClick:()=>S(g.id),children:[l.jsx("span",{className:"mini-avatar",style:{backgroundColor:g.color},children:g.name.charAt(0)}),g.name]},g.id))}),w.length===0&&l.jsx("p",{className:"no-persons-warning",children:"     ."})]}),h==="delete"&&l.jsx("div",{className:"delete-warning",children:l.jsx("p",{children:"         ."})})]}):l.jsxs("div",{className:"no-linked-expenses",children:[l.jsx("p",{children:"     ."}),l.jsx("p",{children:"  ."})]})]}),l.jsxs("div",{className:"reassign-modal-footer",children:[l.jsx("button",{className:"btn btn-secondary",onClick:p,children:""}),l.jsx("button",{className:`btn ${h==="delete"?"btn-danger":"btn-primary"}`,onClick:v,disabled:C.length>0&&!T,children:C.length===0?"":h==="reassign"?"  ":" "})]})]})})}const _x=["","","KB","","","","IBK","NH","SC","","",""];function If({persons:i,expenses:o=[],onAddPerson:d,onRemovePerson:u,onUpdatePerson:p}){const[x,S]=m.useState(""),[h,N]=m.useState(null),[C,w]=m.useState(""),[j,b]=m.useState(null),[v,T]=m.useState(null),[g,y]=m.useState({bankName:"",accountNumber:"",accountHolder:""}),[A,R]=m.useState(null),[E,_]=m.useState(!1),G=m.useMemo(()=>{const z={};return i.forEach($=>{z[$.id]=o.filter(te=>te.paidBy===$.id||te.sharedBy.includes($.id)).length}),z},[i,o]),ee=()=>{x.trim()&&(d(x.trim()),S(""))},P=z=>{z.key==="Enter"&&ee()},X=z=>{if(G[z.id]>0){alert(`      .
   .`);return}N(z.id),w(z.name)},ae=()=>{h&&C.trim()&&p(h,{name:C.trim()}),N(null),w("")},I=z=>{G[z.id]>0?(R(z),_(!0)):(R(z),_(!1))},ie=()=>{A&&(u(A.id),R(null),_(!1))},ne=z=>{A&&(u(A.id,z||void 0),R(null),_(!1))},je=z=>{T(z.id),y({bankName:z.bankName||"",accountNumber:z.accountNumber||"",accountHolder:z.accountHolder||z.name})},Ne=z=>z?/^[\d-]{10,20}$/.test(z.replace(/\s/g,"")):!0,Z=()=>{if(v){if(g.accountNumber&&!Ne(g.accountNumber)){alert("   . (  , 10-20)");return}p(v,{bankName:g.bankName,accountNumber:g.accountNumber,accountHolder:g.accountHolder})}T(null),y({bankName:"",accountNumber:"",accountHolder:""})},H=z=>{b(j===z?null:z)};return l.jsxs("div",{className:"participant-tab",children:[l.jsxs("div",{className:"add-participant",children:[l.jsx("input",{type:"text",placeholder:"  ",value:x,onChange:z=>S(z.target.value),onKeyDown:P,className:"input-field"}),l.jsx("button",{onClick:ee,className:"btn btn-primary",children:""})]}),i.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("p",{children:"  "}),l.jsx("p",{className:"empty-hint",children:"  "})]}):l.jsx("ul",{className:"participant-list",children:i.map(z=>l.jsxs("li",{className:`participant-item ${j===z.id?"expanded":""}`,children:[l.jsxs("div",{className:"participant-main",onClick:()=>H(z.id),children:[l.jsx("div",{className:"participant-avatar",style:{backgroundColor:z.color},children:z.name.charAt(0)}),h===z.id?l.jsx("input",{type:"text",value:C,onChange:$=>w($.target.value),onBlur:ae,onKeyDown:$=>$.key==="Enter"&&ae(),className:"input-field edit-input",autoFocus:!0,onClick:$=>$.stopPropagation()}):l.jsxs("div",{className:"participant-info",children:[l.jsx("span",{className:"participant-name",children:z.name}),G[z.id]>0&&l.jsxs("span",{className:"participant-expense-badge",title:`${G[z.id]}  `,children:[" ",G[z.id]]}),z.bankName&&l.jsxs("span",{className:"participant-bank-badge",children:[" ",z.bankName]})]}),l.jsxs("div",{className:"participant-actions",onClick:$=>$.stopPropagation(),children:[l.jsx("button",{onClick:()=>X(z),className:`btn-icon ${G[z.id]>0?"disabled":""}`,title:G[z.id]>0?"   ":"",disabled:G[z.id]>0,children:""}),l.jsx("button",{onClick:()=>I(z),className:"btn-icon btn-danger",title:"",children:""})]}),l.jsx("span",{className:"expand-icon",children:j===z.id?"":""})]}),j===z.id&&l.jsx("div",{className:"participant-expanded",children:l.jsxs("div",{className:"bank-info-section",children:[l.jsx("h4",{children:"  "}),v===z.id?l.jsxs("div",{className:"bank-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsxs("select",{value:g.bankName,onChange:$=>y({...g,bankName:$.target.value}),className:"input-field",children:[l.jsx("option",{value:"",children:""}),_x.map($=>l.jsx("option",{value:$,children:$},$))]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",value:g.accountNumber,onChange:$=>y({...g,accountNumber:$.target.value}),placeholder:" ",className:"input-field"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",value:g.accountHolder,onChange:$=>y({...g,accountHolder:$.target.value}),placeholder:" ",className:"input-field"})]}),l.jsxs("div",{className:"bank-form-actions",children:[l.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>T(null),children:""}),l.jsx("button",{className:"btn btn-primary btn-sm",onClick:Z,children:""})]})]}):z.bankName&&z.accountNumber?l.jsxs("div",{className:"bank-display",children:[l.jsxs("div",{className:"bank-display-row",children:[l.jsx("span",{className:"bank-label",children:""}),l.jsx("span",{className:"bank-value",children:z.bankName})]}),l.jsxs("div",{className:"bank-display-row",children:[l.jsx("span",{className:"bank-label",children:""}),l.jsx("span",{className:"bank-value",children:z.accountNumber}),l.jsx("button",{className:"btn-icon btn-sm",onClick:()=>navigator.clipboard.writeText(z.accountNumber||""),title:"",children:""})]}),l.jsxs("div",{className:"bank-display-row",children:[l.jsx("span",{className:"bank-label",children:""}),l.jsx("span",{className:"bank-value",children:z.accountHolder||z.name})]}),l.jsx("button",{className:"btn btn-secondary btn-sm mt-1",onClick:()=>je(z),children:""})]}):l.jsxs("div",{className:"bank-empty",children:[l.jsx("p",{children:"  "}),l.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>je(z),children:"+  "})]})]})})]},z.id))}),l.jsxs("div",{className:"participant-count",children:[" ",i.length,""]}),A&&!E&&l.jsx(Ox,{participantName:A.name,linkedExpenseCount:0,onConfirm:ie,onCancel:()=>R(null)}),A&&E&&l.jsx(zx,{deletingPerson:A,persons:i,expenses:o,onConfirm:ne,onCancel:()=>{R(null),_(!1)}})]})}function Rx({expense:i,persons:o,currencies:d,onSave:u,onUploadReceipt:p,onClose:x}){const[S,h]=m.useState(i.description),[N,C]=m.useState(i.amount.toString()),[w,j]=m.useState(i.currency),[b,v]=m.useState(i.paidBy),[T,g]=m.useState(i.sharedBy),[y,A]=m.useState(i.category),[R,E]=m.useState(i.location||""),[_,G]=m.useState(i.receiptUrl||""),[ee,P]=m.useState(!1),[X,ae]=m.useState(!1),I=m.useRef(null),ie=async Z=>{if(Z.preventDefault(),!(!S.trim()||!N||!b||T.length===0)){ae(!0);try{await u(i.id,{description:S.trim(),amount:parseFloat(N),currency:w,paidBy:b,sharedBy:T,category:y,location:R.trim()||void 0,receiptUrl:_||void 0}),x()}catch(H){oe.error("  :",H),alert(" .")}finally{ae(!1)}}},ne=async Z=>{const H=Z.target.files?.[0];if(H){if(H.size>5*1024*1024){alert("  5MB  .");return}P(!0);try{const z=await p(H);G(z)}catch(z){oe.error("  :",z),alert(" .")}finally{P(!1)}}},je=Z=>{g(H=>H.includes(Z)?H.filter(z=>z!==Z):[...H,Z])},Ne=()=>{g(o.map(Z=>Z.id))};return l.jsx("div",{className:"expense-edit-modal",onClick:x,children:l.jsxs("div",{className:"expense-edit-content",onClick:Z=>Z.stopPropagation(),children:[l.jsxs("div",{className:"expense-edit-header",children:[l.jsx("h3",{children:" "}),l.jsx("button",{className:"btn-close",onClick:x,children:""})]}),l.jsxs("form",{onSubmit:ie,children:[l.jsxs("div",{className:"expense-edit-body",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",className:"input-field",value:S,onChange:Z=>h(Z.target.value),required:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"number",className:"input-field",value:N,onChange:Z=>C(Z.target.value),min:"0",step:"0.01",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("select",{className:"input-field",value:w,onChange:Z=>j(Z.target.value),children:d.map(Z=>l.jsxs("option",{value:Z.code,children:[Z.symbol," ",Z.code]},Z.code))})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("div",{className:"category-grid",children:Object.entries(rt).map(([Z,{label:H,icon:z}])=>l.jsxs("button",{type:"button",className:`category-btn ${y===Z?"active":""}`,onClick:()=>A(Z),children:[l.jsx("span",{children:z}),l.jsx("span",{children:H})]},Z))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsxs("select",{className:"input-field",value:b,onChange:Z=>v(Z.target.value),required:!0,children:[l.jsx("option",{value:"",children:""}),o.map(Z=>l.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("div",{className:"form-label-row",children:[l.jsx("label",{children:"  "}),l.jsx("button",{type:"button",className:"btn-text",onClick:Ne,children:" "})]}),l.jsx("div",{className:"shared-by-grid",children:o.map(Z=>l.jsxs("button",{type:"button",className:`shared-btn ${T.includes(Z.id)?"active":""}`,onClick:()=>je(Z.id),style:{"--person-color":Z.color},children:[l.jsx("span",{className:"shared-avatar",children:Z.name.charAt(0)}),l.jsx("span",{children:Z.name})]},Z.id))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" ()"}),l.jsx("input",{type:"text",className:"input-field",placeholder:":  ",value:R,onChange:Z=>E(Z.target.value)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" ()"}),l.jsxs("div",{className:"receipt-upload",children:[_&&l.jsxs("div",{className:"receipt-preview",children:[l.jsx("img",{src:_,alt:""}),l.jsx("button",{type:"button",className:"btn-remove",onClick:()=>G(""),children:""})]}),!_&&!ee&&l.jsxs("label",{className:"receipt-upload-btn",children:[l.jsx("input",{ref:I,type:"file",accept:"image/*",onChange:ne}),"  "]}),ee&&l.jsxs("div",{className:"upload-loading",children:[l.jsx("div",{className:"spinner"}),l.jsx("span",{children:" ..."})]})]})]})]}),l.jsxs("div",{className:"expense-edit-footer",children:[l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:x,children:""}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:X,children:X?" ...":""})]})]})]})})}const Bx=m.memo(function({persons:o,filters:d,onFilterChange:u,onClose:p}){const[x,S]=m.useState(d),[h,N]=m.useState(!1),C=(y,A)=>{const R={...x,[y]:A};S(R),u(R)},w=y=>{const A=x.categories.includes(y)?x.categories.filter(R=>R!==y):[...x.categories,y];C("categories",A)},j=y=>{const A=x.payers.includes(y)?x.payers.filter(R=>R!==y):[...x.payers,y];C("payers",A)},b=y=>{const A=x.currencies.includes(y)?x.currencies.filter(R=>R!==y):[...x.currencies,y];C("currencies",A)},v=()=>{const y={searchQuery:"",categories:[],payers:[],dateFrom:"",dateTo:"",amountMin:null,amountMax:null,currencies:[],hasReceipt:null};S(y),u(y)},T=x.searchQuery||x.categories.length>0||x.payers.length>0||x.dateFrom||x.dateTo||x.amountMin!==null||x.amountMax!==null||x.currencies.length>0||x.hasReceipt!==null,g=[x.searchQuery,x.categories.length>0,x.payers.length>0,x.dateFrom||x.dateTo,x.amountMin!==null||x.amountMax!==null,x.currencies.length>0,x.hasReceipt!==null].filter(Boolean).length;return l.jsxs("div",{className:"expense-filter",children:[l.jsxs("div",{className:"filter-header",children:[l.jsxs("h4",{children:[" ",g>0&&l.jsx("span",{className:"filter-count-badge",children:g})]}),T&&l.jsx("button",{className:"filter-clear",onClick:v,children:" "})]}),l.jsxs("div",{className:"filter-section",children:[l.jsx("label",{children:""}),l.jsx("div",{className:"filter-search-wrapper",children:l.jsx("input",{type:"text",className:"filter-search",placeholder:"   ...",value:x.searchQuery,onChange:y=>C("searchQuery",y.target.value)})})]}),l.jsxs("div",{className:"filter-section",children:[l.jsx("label",{children:""}),l.jsx("div",{className:"filter-categories",children:Object.entries(rt).map(([y,{label:A,icon:R}])=>l.jsxs("button",{className:`filter-category-btn ${x.categories.includes(y)?"active":""}`,onClick:()=>w(y),children:[l.jsx("span",{children:R}),l.jsx("span",{children:A})]},y))})]}),l.jsxs("div",{className:"filter-section",children:[l.jsx("label",{children:""}),l.jsx("div",{className:"filter-payers",children:o.map(y=>l.jsxs("button",{className:`filter-payer-btn ${x.payers.includes(y.id)?"active":""}`,onClick:()=>j(y.id),children:[l.jsx("span",{className:"avatar",style:{backgroundColor:y.color},children:y.name.charAt(0)}),l.jsx("span",{children:y.name})]},y.id))})]}),l.jsxs("div",{className:"filter-section",children:[l.jsx("label",{children:""}),l.jsxs("div",{className:"filter-date-range",children:[l.jsx("input",{type:"date",value:x.dateFrom,onChange:y=>C("dateFrom",y.target.value)}),l.jsx("span",{children:"~"}),l.jsx("input",{type:"date",value:x.dateTo,onChange:y=>C("dateTo",y.target.value)})]})]}),l.jsx("button",{className:"filter-advanced-toggle",onClick:()=>N(!h),children:h?"   ":"   "}),h&&l.jsxs("div",{className:"filter-advanced",children:[l.jsxs("div",{className:"filter-section",children:[l.jsx("label",{children:"  ()"}),l.jsxs("div",{className:"filter-amount-range",children:[l.jsx("input",{type:"number",placeholder:"",value:x.amountMin??"",onChange:y=>C("amountMin",y.target.value?parseInt(y.target.value):null)}),l.jsx("span",{children:"~"}),l.jsx("input",{type:"number",placeholder:"",value:x.amountMax??"",onChange:y=>C("amountMax",y.target.value?parseInt(y.target.value):null)})]}),l.jsx("div",{className:"filter-amount-presets",children:[1e4,5e4,1e5,5e5].map(y=>l.jsxs("button",{className:"filter-preset-btn",onClick:()=>C("amountMax",y),children:["~",y/1e4,""]},y))})]}),l.jsxs("div",{className:"filter-section",children:[l.jsx("label",{children:" "}),l.jsx("div",{className:"filter-currencies",children:Vt.map(y=>l.jsxs("button",{className:`filter-currency-btn ${x.currencies.includes(y.code)?"active":""}`,onClick:()=>b(y.code),children:[y.symbol," ",y.code]},y.code))})]}),l.jsxs("div",{className:"filter-section",children:[l.jsx("label",{children:""}),l.jsxs("div",{className:"filter-receipt-options",children:[l.jsx("button",{className:`filter-receipt-btn ${x.hasReceipt===null?"active":""}`,onClick:()=>C("hasReceipt",null),children:""}),l.jsx("button",{className:`filter-receipt-btn ${x.hasReceipt===!0?"active":""}`,onClick:()=>C("hasReceipt",!0),children:" "}),l.jsx("button",{className:`filter-receipt-btn ${x.hasReceipt===!1?"active":""}`,onClick:()=>C("hasReceipt",!1),children:""})]})]})]})]})}),kx={searchQuery:"",categories:[],payers:[],dateFrom:"",dateTo:"",amountMin:null,amountMax:null,currencies:[],hasReceipt:null};function Ux(i,o,d){return i.filter(u=>{if(o.searchQuery){const p=o.searchQuery.toLowerCase(),x=u.description.toLowerCase().includes(p),S=u.location?.toLowerCase().includes(p);if(!x&&!S)return!1}if(o.categories.length>0&&!o.categories.includes(u.category)||o.payers.length>0&&!o.payers.includes(u.paidBy)||o.dateFrom&&u.date.split("T")[0]<o.dateFrom||o.dateTo&&u.date.split("T")[0]>o.dateTo)return!1;if((o.amountMin!==null||o.amountMax!==null)&&u.amount!==void 0){const p=u.amount;if(o.amountMin!==null&&p<o.amountMin||o.amountMax!==null&&p>o.amountMax)return!1}if(o.currencies.length>0&&u.currency&&!o.currencies.includes(u.currency))return!1;if(o.hasReceipt!==null){const p=!!u.receiptUrl;if(o.hasReceipt!==p)return!1}return!0})}Uf.register(Hf,Lf,qf,Yf,Gf,Qf,Xf);const Tc=["rgba(102, 126, 234, 0.8)","rgba(240, 147, 251, 0.8)","rgba(79, 172, 254, 0.8)","rgba(67, 233, 123, 0.8)","rgba(250, 112, 154, 0.8)","rgba(254, 225, 64, 0.8)","rgba(48, 207, 208, 0.8)","rgba(168, 237, 234, 0.8)"],Hx=m.memo(function({expensesByCategory:o,expensesByDate:d,expensesByPerson:u,persons:p,totalExpenses:x}){const[S,h]=m.useState("category"),N=x>0,C={labels:Object.keys(o).map(g=>rt[g]?.label||g),datasets:[{data:Object.values(o),backgroundColor:Tc.slice(0,Object.keys(o).length),borderWidth:0}]},w=Object.keys(d).sort().slice(-7),j={labels:w.map(g=>{const y=new Date(g);return`${y.getMonth()+1}/${y.getDate()}`}),datasets:[{label:"",data:w.map(g=>d[g]||0),backgroundColor:"rgba(102, 126, 234, 0.8)",borderRadius:6}]},b={labels:Object.keys(u).map(g=>p.find(A=>A.id===g)?.name||"  "),datasets:[{data:Object.values(u),backgroundColor:Object.keys(u).map(g=>p.find(A=>A.id===g)?.color||Tc[0]),borderWidth:0}]},v={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(g){return`${g.raw.toLocaleString()}`}}}}},T={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(g){return`${g.raw.toLocaleString()}`}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(g){return typeof g=="number"&&g>=1e4?`${(g/1e4).toFixed(0)}`:typeof g=="number"?g.toLocaleString():g}}}}};return l.jsxs("div",{className:"expense-chart",children:[l.jsxs("div",{className:"chart-header",children:[l.jsx("h4",{children:"  "}),l.jsxs("div",{className:"chart-tabs",children:[l.jsx("button",{className:`chart-tab ${S==="category"?"active":""}`,onClick:()=>h("category"),children:""}),l.jsx("button",{className:`chart-tab ${S==="date"?"active":""}`,onClick:()=>h("date"),children:""}),l.jsx("button",{className:`chart-tab ${S==="person"?"active":""}`,onClick:()=>h("person"),children:""})]})]}),N?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"chart-container",children:[S==="category"&&l.jsx(xf,{data:C,options:v}),S==="date"&&l.jsx(Kf,{data:j,options:T}),S==="person"&&l.jsx(xf,{data:b,options:v})]}),(S==="category"||S==="person")&&l.jsxs("div",{className:"chart-legend",children:[S==="category"&&Object.entries(o).map(([g,y],A)=>l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-color",style:{backgroundColor:Tc[A]}}),l.jsxs("span",{children:[rt[g]?.label||g,": ",y.toLocaleString()]})]},g)),S==="person"&&Object.entries(u).map(([g,y])=>{const A=p.find(R=>R.id===g);return l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-color",style:{backgroundColor:A?.color||Tc[0]}}),l.jsxs("span",{children:[A?.name||"  ",": ",y.toLocaleString()]})]},g)})]}),l.jsxs("div",{className:"chart-total",children:[l.jsx("span",{className:"chart-total-label",children:" "}),l.jsxs("span",{className:"chart-total-value",children:["",x.toLocaleString()]})]})]}):l.jsxs("div",{className:"chart-empty",children:[l.jsx("div",{className:"chart-empty-icon",children:""}),l.jsx("p",{children:"  "})]})]})});function Lx({templates:i,persons:o,onSaveTemplate:d,onDeleteTemplate:u,onApplyTemplate:p,onClose:x}){const[S,h]=m.useState(!1),[N,C]=m.useState(""),[w,j]=m.useState({description:"",amount:0,currency:"KRW",category:"other"}),b=()=>{N.trim()&&(d(N.trim(),w),C(""),j({description:"",amount:0,currency:"KRW",category:"other"}),h(!1))},v=g=>g?rt[g]||{icon:"",label:g}:{icon:"",label:""},T=g=>g&&o.find(y=>y.id===g)?.name||"-";return l.jsx("div",{className:"templates-overlay",onClick:x,children:l.jsxs("div",{className:"templates-panel",onClick:g=>g.stopPropagation(),children:[l.jsxs("header",{className:"templates-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:x,children:""})]}),l.jsxs("div",{className:"templates-content",children:[l.jsx("div",{className:"templates-list",children:i.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("span",{className:"empty-icon",children:""}),l.jsx("p",{children:"  "}),l.jsx("p",{className:"empty-hint",children:"     "})]}):i.map(g=>{const y=v(g.expense.category);return l.jsxs("div",{className:"template-card",children:[l.jsxs("div",{className:"template-info",children:[l.jsxs("div",{className:"template-header-row",children:[l.jsx("span",{className:"template-icon",children:y.icon}),l.jsx("span",{className:"template-name",children:g.name})]}),l.jsxs("div",{className:"template-details",children:[g.expense.description&&l.jsxs("span",{className:"detail-item",children:[" ",g.expense.description]}),g.expense.amount&&l.jsxs("span",{className:"detail-item",children:[" ",g.expense.amount?.toLocaleString()]}),g.expense.paidBy&&l.jsxs("span",{className:"detail-item",children:[" ",T(g.expense.paidBy)]})]})]}),l.jsxs("div",{className:"template-actions",children:[l.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>p(g),children:""}),l.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>u(g.id),children:""})]})]},g.id)})}),S?l.jsxs("div",{className:"add-template-form",children:[l.jsx("h3",{children:"  "}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"text",className:"input-field",value:N,onChange:g=>C(g.target.value),placeholder:":  "})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",className:"input-field",value:w.description||"",onChange:g=>j(y=>({...y,description:g.target.value})),placeholder:" "})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group flex-1",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"number",className:"input-field",value:w.amount||"",onChange:g=>j(y=>({...y,amount:parseFloat(g.target.value)||0}))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("select",{className:"input-field",value:w.category||"other",onChange:g=>j(y=>({...y,category:g.target.value})),children:Object.entries(rt).map(([g,y])=>l.jsxs("option",{value:g,children:[y.icon," ",y.label]},g))})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>h(!1),children:""}),l.jsx("button",{className:"btn btn-primary",onClick:b,children:""})]})]}):l.jsx("button",{className:"btn btn-add-template",onClick:()=>h(!0),children:"   "})]})]})})}const qx={daily:"",weekly:"",monthly:""};function Yx({recurringExpenses:i,persons:o,onAdd:d,onDelete:u,onToggle:p,onClose:x}){const[S,h]=m.useState(!1),[N,C]=m.useState({name:"",description:"",amount:0,currency:"KRW",category:"other",paidBy:o[0]?.id||"",frequency:"daily",startDate:new Date().toISOString().split("T")[0],endDate:""}),w=()=>{!N.name.trim()||!N.paidBy||(d(N.name,{description:N.description,amount:N.amount,currency:N.currency,category:N.category,paidBy:N.paidBy,sharedBy:o.map(v=>v.id)},N.frequency,N.startDate,N.endDate||void 0),C({name:"",description:"",amount:0,currency:"KRW",category:"other",paidBy:o[0]?.id||"",frequency:"daily",startDate:new Date().toISOString().split("T")[0],endDate:""}),h(!1))},j=v=>rt[v]||{icon:"",label:v},b=v=>o.find(T=>T.id===v)?.name||"-";return l.jsx("div",{className:"recurring-overlay",onClick:x,children:l.jsxs("div",{className:"recurring-panel",onClick:v=>v.stopPropagation(),children:[l.jsxs("header",{className:"recurring-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:x,children:""})]}),l.jsxs("div",{className:"recurring-content",children:[l.jsxs("div",{className:"info-banner",children:[l.jsx("span",{className:"info-icon",children:""}),l.jsx("p",{children:"       ."})]}),l.jsx("div",{className:"recurring-list",children:i.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("span",{className:"empty-icon",children:""}),l.jsx("p",{children:"  "}),l.jsx("p",{className:"empty-hint",children:",     "})]}):i.map(v=>{const T=j(v.expense.category);return l.jsxs("div",{className:`recurring-card ${v.enabled?"":"disabled"}`,children:[l.jsx("div",{className:"recurring-toggle",children:l.jsx("button",{className:`toggle-btn ${v.enabled?"active":""}`,onClick:()=>p(v.id),children:v.enabled?"":""})}),l.jsxs("div",{className:"recurring-info",children:[l.jsxs("div",{className:"recurring-header-row",children:[l.jsx("span",{className:"recurring-icon",children:T.icon}),l.jsx("span",{className:"recurring-name",children:v.name}),l.jsx("span",{className:"recurring-frequency",children:qx[v.frequency]})]}),l.jsxs("div",{className:"recurring-details",children:[l.jsxs("span",{children:["",v.expense.amount?.toLocaleString()]}),l.jsx("span",{children:""}),l.jsx("span",{children:b(v.expense.paidBy)}),l.jsx("span",{children:""}),l.jsxs("span",{children:[v.startDate," ~"]})]}),v.lastApplied&&l.jsxs("div",{className:"last-applied",children:[" : ",v.lastApplied]})]}),l.jsx("button",{className:"btn-delete",onClick:()=>u(v.id),children:""})]},v.id)})}),S?l.jsxs("div",{className:"add-recurring-form",children:[l.jsx("h3",{children:"  "}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",className:"input-field",value:N.name,onChange:v=>C(T=>({...T,name:v.target.value})),placeholder:": "})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",className:"input-field",value:N.description,onChange:v=>C(T=>({...T,description:v.target.value})),placeholder:" "})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group flex-1",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"number",className:"input-field",value:N.amount||"",onChange:v=>C(T=>({...T,amount:parseFloat(v.target.value)||0}))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("select",{className:"input-field",value:N.category,onChange:v=>C(T=>({...T,category:v.target.value})),children:Object.entries(rt).map(([v,T])=>l.jsxs("option",{value:v,children:[T.icon," ",T.label]},v))})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group flex-1",children:[l.jsx("label",{children:""}),l.jsx("select",{className:"input-field",value:N.paidBy,onChange:v=>C(T=>({...T,paidBy:v.target.value})),children:o.map(v=>l.jsx("option",{value:v.id,children:v.name},v.id))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsxs("select",{className:"input-field",value:N.frequency,onChange:v=>C(T=>({...T,frequency:v.target.value})),children:[l.jsx("option",{value:"daily",children:""}),l.jsx("option",{value:"weekly",children:""}),l.jsx("option",{value:"monthly",children:""})]})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group flex-1",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"date",className:"input-field",value:N.startDate,onChange:v=>C(T=>({...T,startDate:v.target.value}))})]}),l.jsxs("div",{className:"form-group flex-1",children:[l.jsx("label",{children:" ()"}),l.jsx("input",{type:"date",className:"input-field",value:N.endDate,onChange:v=>C(T=>({...T,endDate:v.target.value}))})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>h(!1),children:""}),l.jsx("button",{className:"btn btn-primary",onClick:w,children:""})]})]}):l.jsx("button",{className:"btn btn-add-recurring",onClick:()=>h(!0),children:"    "})]})]})})}function Gx({scheduledExpenses:i,persons:o,onApply:d,onCancel:u,onDelete:p,onClose:x}){const S=b=>rt[b]||{icon:"",label:b},h=b=>o.find(v=>v.id===b)?.name||"-",N=b=>{switch(b){case"pending":return{label:" ",className:"pending",icon:""};case"applied":return{label:"",className:"applied",icon:""};case"cancelled":return{label:"",className:"cancelled",icon:""}}},C=new Date().toISOString().split("T")[0],w=i.filter(b=>b.status==="pending"),j=i.filter(b=>b.status!=="pending");return l.jsx("div",{className:"scheduled-overlay",onClick:x,children:l.jsxs("div",{className:"scheduled-panel",onClick:b=>b.stopPropagation(),children:[l.jsxs("header",{className:"scheduled-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:x,children:""})]}),l.jsxs("div",{className:"scheduled-content",children:[l.jsxs("section",{className:"scheduled-section",children:[l.jsxs("h3",{children:["  (",w.length,")"]}),w.length===0?l.jsx("div",{className:"empty-mini",children:"  "}):l.jsx("div",{className:"scheduled-list",children:w.map(b=>{const v=S(b.expense.category),T=b.scheduledDate<=C;return l.jsxs("div",{className:`scheduled-card ${T?"overdue":""}`,children:[l.jsx("div",{className:"scheduled-icon",children:v.icon}),l.jsxs("div",{className:"scheduled-info",children:[l.jsxs("div",{className:"scheduled-header-row",children:[l.jsx("span",{className:"scheduled-desc",children:b.expense.description}),l.jsxs("span",{className:"scheduled-amount",children:["",b.expense.amount.toLocaleString()]})]}),l.jsxs("div",{className:"scheduled-meta",children:[l.jsxs("span",{children:[" ",b.scheduledDate]}),l.jsx("span",{children:""}),l.jsxs("span",{children:[" ",h(b.expense.paidBy)]})]}),b.note&&l.jsxs("div",{className:"scheduled-note",children:[" ",b.note]}),T&&l.jsx("div",{className:"overdue-badge",children:"  "})]}),l.jsxs("div",{className:"scheduled-actions",children:[l.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>d(b.id),children:""}),l.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>u(b.id),children:""})]})]},b.id)})})]}),j.length>0&&l.jsxs("section",{className:"scheduled-section",children:[l.jsx("h3",{children:" "}),l.jsx("div",{className:"scheduled-list history",children:j.slice(0,10).map(b=>{const v=S(b.expense.category),T=N(b.status);return l.jsxs("div",{className:`scheduled-card history ${b.status}`,children:[l.jsx("div",{className:"scheduled-icon",children:v.icon}),l.jsxs("div",{className:"scheduled-info",children:[l.jsxs("div",{className:"scheduled-header-row",children:[l.jsx("span",{className:"scheduled-desc",children:b.expense.description}),l.jsxs("span",{className:`status-badge ${T.className}`,children:[T.icon," ",T.label]})]}),l.jsxs("div",{className:"scheduled-meta",children:[l.jsxs("span",{children:["",b.expense.amount.toLocaleString()]}),l.jsx("span",{children:""}),l.jsx("span",{children:b.scheduledDate})]})]}),l.jsx("button",{className:"btn-delete",onClick:()=>p(b.id),children:""})]},b.id)})})]})]})]})})}function Qx(){const i=m.useCallback((S,h,N,C="expenses")=>{const w=A=>h.find(R=>R.id===A)?.name||A,j=A=>N.find(R=>R.code===A)?.symbol||A,b=["","","","","","","","",""],v=S.map(A=>[A.date,`"${A.description.replace(/"/g,'""')}"`,A.amount.toString(),j(A.currency),w(A.paidBy),`"${A.sharedBy.map(w).join(", ")}"`,A.category,A.location||"",A.receiptMemo||""]),T=[b.join(","),...v.map(A=>A.join(","))].join(`
`),g="\uFEFF",y=new Blob([g+T],{type:"text/csv;charset=utf-8;"});Mc(y,`${C}_${new Date().toISOString().split("T")[0]}.csv`)},[]),o=m.useCallback((S,h="backup")=>{const N={...S,version:"1.0.0",exportedAt:new Date().toISOString()},C=new Blob([JSON.stringify(N,null,2)],{type:"application/json"});Mc(C,`${h}_${new Date().toISOString().split("T")[0]}.json`)},[]),d=m.useCallback(async(S,h,N,C=" ")=>{const w=new Bc;w.setFont("helvetica"),w.setFontSize(20),w.text(C,105,20,{align:"center"}),w.setFontSize(10),w.text(`Generated: ${new Date().toLocaleDateString("ko-KR")}`,105,28,{align:"center"}),w.setFontSize(14),w.text("Summary",20,45),w.setFontSize(10);const j=S.reduce((v,T)=>{const g=N.find(y=>y.code===T.currency);return v+T.amount*(g?.rate||1)},0);w.text(`Total Participants: ${h.length}`,20,55),w.text(`Total Expenses: ${S.length}`,20,62),w.text(`Total Amount: ${j.toLocaleString("ko-KR")} KRW`,20,69),w.setFontSize(14),w.text("Expense List",20,85);let b=95;w.setFontSize(9),w.setFont("helvetica","bold"),w.text("Date",20,b),w.text("Description",45,b),w.text("Amount",110,b),w.text("Paid By",145,b),b+=7,w.setFont("helvetica","normal"),S.slice(0,30).forEach(v=>{b>270&&(w.addPage(),b=20);const T=N.find(y=>y.code===v.currency),g=h.find(y=>y.id===v.paidBy);w.text(v.date,20,b),w.text(v.description.substring(0,25),45,b),w.text(`${T?.symbol||""}${v.amount.toLocaleString()}`,110,b),w.text(g?.name||"-",145,b),b+=6}),S.length>30&&w.text(`... and ${S.length-30} more expenses`,20,b+5),w.save(`${C}_report.pdf`)},[]),u=m.useCallback((S,h,N="")=>{const C=new Bc,w=b=>h.find(v=>v.id===b)?.name||b;C.setFontSize(20),C.text(`${N} - Settlement`,105,20,{align:"center"}),C.setFontSize(10),C.text(`Date: ${new Date().toLocaleDateString("ko-KR")}`,105,28,{align:"center"});let j=50;C.setFontSize(12),S.forEach((b,v)=>{const T=`${v+1}. ${w(b.from)}  ${w(b.to)}: ${b.amount.toLocaleString()}`;C.text(T,20,j),j+=10}),C.save(`${N}_settlement.pdf`)},[]),p=m.useCallback((S,h,N,C="")=>{const w=E=>h.find(_=>_.id===E)?.name||E,j=E=>N.find(_=>_.code===E)?.symbol||E,b=E=>N.find(_=>_.code===E)?.rate||1,v=["","","","","","","","","",""],T=S.map(E=>[E.date,E.description.replace(/\t/g," "),E.amount.toString(),j(E.currency),Math.round(E.amount*b(E.currency)).toString(),w(E.paidBy),E.sharedBy.map(w).join(", "),E.category,(E.tags||[]).join(", "),E.location||""]),g=[v.join(","),...T.map(E=>E.map(_=>`"${_.replace(/"/g,'""')}"`).join(","))].join(`
`),y="\uFEFF",A=new Blob([y+g],{type:"text/csv;charset=utf-8;"}),R=`${C}_${new Date().toISOString().split("T")[0]}.csv`;Mc(A,R),setTimeout(()=>{confirm("  Google Sheets ?")&&window.open("https://sheets.google.com/create","_blank")},500)},[]),x=m.useCallback((S,h,N,C="")=>{const w=g=>h.find(y=>y.id===g)?.name||g,j=g=>N.find(y=>y.code===g)?.symbol||g,b=g=>N.find(y=>y.code===g)?.rate||1;let v=`<?xml version="1.0" encoding="UTF-8"?>
`;v+=`<?mso-application progid="Excel.Sheet"?>
`,v+=`<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
`,v+=`  xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">
`,v+=`<Worksheet ss:Name="">
<Table>
`,v+=`<Row>
`,["","","","","","","","",""].forEach(g=>{v+=`  <Cell><Data ss:Type="String">${g}</Data></Cell>
`}),v+=`</Row>
`,S.forEach(g=>{v+=`<Row>
`,v+=`  <Cell><Data ss:Type="String">${g.date}</Data></Cell>
`,v+=`  <Cell><Data ss:Type="String">${Xx(g.description)}</Data></Cell>
`,v+=`  <Cell><Data ss:Type="Number">${g.amount}</Data></Cell>
`,v+=`  <Cell><Data ss:Type="String">${j(g.currency)}</Data></Cell>
`,v+=`  <Cell><Data ss:Type="Number">${Math.round(g.amount*b(g.currency))}</Data></Cell>
`,v+=`  <Cell><Data ss:Type="String">${w(g.paidBy)}</Data></Cell>
`,v+=`  <Cell><Data ss:Type="String">${g.sharedBy.map(w).join(", ")}</Data></Cell>
`,v+=`  <Cell><Data ss:Type="String">${g.category}</Data></Cell>
`,v+=`  <Cell><Data ss:Type="String">${(g.tags||[]).join(", ")}</Data></Cell>
`,v+=`</Row>
`}),v+=`</Table>
</Worksheet>
</Workbook>`;const T=new Blob([v],{type:"application/vnd.ms-excel"});Mc(T,`${C}_${new Date().toISOString().split("T")[0]}.xls`)},[]);return{exportToCSV:i,exportToJSON:o,exportToPDF:d,exportSettlementPDF:u,exportToGoogleSheets:p,exportToExcel:x}}function Mc(i,o){const d=URL.createObjectURL(i),u=document.createElement("a");u.href=d,u.download=o,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d)}function Xx(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function Kx(){const[i,o]=m.useState(!1),[d,u]=m.useState(0),p=m.useCallback(async(S,h)=>{o(!0),u(0);const N={success:!1,data:{expenses:[],persons:[]},errors:[],warnings:[]};try{const w=(await S.text()).split(`
`).filter(I=>I.trim());if(w.length<2)return N.errors.push("CSV   "),N;const j=su(w[0]).map(I=>I.toLowerCase().trim());u(10);const v=["","","",""].filter(I=>!j.includes(I));if(v.length>0){const I={:"date",:"description",:"amount",:"paidby"},ie=v.filter(ne=>!j.includes(I[ne]));if(ie.length>0)return N.errors.push(`  : ${ie.join(", ")}`),N}const T=I=>{for(const ie of I){const ne=j.indexOf(ie.toLowerCase());if(ne!==-1)return ne}return-1},g=T(["","date"]),y=T(["","description","desc"]),A=T(["","amount"]),R=T(["","currency"]),E=T(["","paidby","paid by"]),_=T(["","sharedby","shared by"]),G=T(["","category"]),ee=T(["","location"]),P=T(["","memo",""]),X=new Set,ae=new Set(h.map(I=>I.name.toLowerCase()));for(let I=1;I<w.length;I++){const ie=su(w[I]);if(E!==-1&&ie[E]){const ne=ie[E].trim();ne&&!ae.has(ne.toLowerCase())&&X.add(ne)}_!==-1&&ie[_]&&ie[_].split(",").forEach(ne=>{const je=ne.trim();je&&!ae.has(je.toLowerCase())&&X.add(je)})}N.data.persons=Array.from(X).map(I=>({name:I})),X.size>0&&N.warnings.push(`  ${X.size} `),u(30);for(let I=1;I<w.length;I++){const ie=su(w[I]);try{const ne={date:ie[g]||new Date().toISOString().split("T")[0],description:ie[y]||` ${I}`,amount:parseFloat(ie[A]?.replace(/[^0-9.-]/g,"")||"0"),currency:ie[R]||"KRW",paidBy:ie[E]||"",sharedBy:_!==-1&&ie[_]?ie[_].split(",").map(je=>je.trim()):[],category:ie[G]||"other",location:ee!==-1?ie[ee]:void 0,receiptMemo:P!==-1?ie[P]:void 0};ne.amount>0?N.data.expenses.push(ne):N.warnings.push(` ${I+1}:  0  `)}catch{N.warnings.push(` ${I+1}:  `)}u(30+Math.floor(I/w.length*60))}u(100),N.success=N.data.expenses.length>0,N.success||N.errors.push("    ")}catch(C){N.errors.push(`  : ${C instanceof Error?C.message:"   "}`)}finally{o(!1)}return N},[]),x=m.useCallback(async S=>{o(!0);const h={success:!1,errors:[],warnings:[]};try{const N=await S.text(),C=JSON.parse(N);if(!C.version)return h.errors.push("   "),h;h.data={expenses:C.expenses||[],persons:C.persons||[]},h.success=!0,h.warnings.push(`${C.exportedAt?new Date(C.exportedAt).toLocaleDateString("ko-KR"):"   "}  `)}catch(N){h.errors.push(`JSON  : ${N instanceof Error?N.message:"   "}`)}finally{o(!1)}return h},[]);return{importing:i,progress:d,importFromCSV:p,importFromJSON:x}}function su(i){const o=[];let d="",u=!1;for(let p=0;p<i.length;p++){const x=i[p];x==='"'?u&&i[p+1]==='"'?(d+='"',p++):u=!u:x===","&&!u?(o.push(d.trim()),d=""):d+=x}return o.push(d.trim()),o}function Vx({expenses:i,persons:o,currencies:d,tripName:u="",onImportExpenses:p,onImportPersons:x,onClose:S}){const{exportToCSV:h,exportToJSON:N,exportToPDF:C}=Qx(),{importing:w,progress:j,importFromCSV:b,importFromJSON:v}=Kx(),[T,g]=m.useState("export"),[y,A]=m.useState(null),R=m.useRef(null),E=()=>{h(i,o,d,u)},_=async()=>{await C(i,o,d,u)},G=()=>{N({version:"1.0.0",exportedAt:new Date().toISOString(),persons:o,expenses:i,currencies:d},`${u}_backup`)},ee=async X=>{const ae=X.target.files?.[0];if(ae){if(A(null),ae.name.endsWith(".csv")){const I=await b(ae,o);A({success:I.success,message:I.success?`${I.data?.expenses.length}    `:I.errors.join(", "),data:I.data})}else if(ae.name.endsWith(".json")){const I=await v(ae);A({success:I.success,message:I.success?`    (${I.data?.expenses.length} , ${I.data?.persons.length})`:I.errors.join(", "),data:I.data})}else A({success:!1,message:"CSV  JSON  "});X.target.value=""}},P=()=>{y?.data&&(x&&y.data.persons.length>0&&x(y.data.persons),p&&y.data.expenses.length>0&&p(y.data.expenses),A({success:!0,message:"  !"}))};return l.jsx("div",{className:"data-overlay",onClick:S,children:l.jsxs("div",{className:"data-panel",onClick:X=>X.stopPropagation(),children:[l.jsxs("header",{className:"data-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:S,children:""})]}),l.jsxs("nav",{className:"data-tabs",children:[l.jsx("button",{className:`tab-btn ${T==="export"?"active":""}`,onClick:()=>g("export"),children:" "}),l.jsx("button",{className:`tab-btn ${T==="import"?"active":""}`,onClick:()=>g("import"),children:" "}),l.jsx("button",{className:`tab-btn ${T==="backup"?"active":""}`,onClick:()=>g("backup"),children:" /"})]}),l.jsxs("div",{className:"data-content",children:[T==="export"&&l.jsxs("div",{className:"tab-content",children:[l.jsx("p",{className:"tab-description",children:"      ."}),l.jsxs("div",{className:"export-options",children:[l.jsxs("button",{className:"export-btn",onClick:E,children:[l.jsx("span",{className:"export-icon",children:""}),l.jsx("span",{className:"export-label",children:"CSV "}),l.jsx("span",{className:"export-desc",children:"Excel    "})]}),l.jsxs("button",{className:"export-btn",onClick:_,children:[l.jsx("span",{className:"export-icon",children:""}),l.jsx("span",{className:"export-label",children:"PDF "}),l.jsx("span",{className:"export-desc",children:"  "})]})]}),l.jsxs("div",{className:"export-stats",children:[l.jsxs("div",{className:"stat",children:[l.jsx("span",{className:"stat-value",children:i.length}),l.jsx("span",{className:"stat-label",children:""})]}),l.jsxs("div",{className:"stat",children:[l.jsx("span",{className:"stat-value",children:o.length}),l.jsx("span",{className:"stat-label",children:""})]})]})]}),T==="import"&&l.jsxs("div",{className:"tab-content",children:[l.jsx("p",{className:"tab-description",children:"CSV      ."}),l.jsxs("div",{className:"import-zone",children:[l.jsx("input",{ref:R,type:"file",accept:".csv",onChange:ee,style:{display:"none"}}),l.jsx("button",{className:"import-dropzone",onClick:()=>R.current?.click(),disabled:w,children:w?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"import-icon",children:""}),l.jsxs("span",{children:[" ... ",j,"%"]})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"import-icon",children:""}),l.jsx("span",{children:"CSV  "}),l.jsx("span",{className:"import-hint",children:"  "})]})})]}),y&&l.jsxs("div",{className:`import-result ${y.success?"success":"error"}`,children:[l.jsx("span",{className:"result-icon",children:y.success?"":""}),l.jsx("span",{className:"result-message",children:y.message}),y.success&&y.data&&l.jsx("button",{className:"btn btn-primary",onClick:P,children:" "})]}),l.jsxs("div",{className:"import-help",children:[l.jsx("h4",{children:"CSV  "}),l.jsx("p",{children:"    :"}),l.jsx("code",{children:",,,,,,"})]})]}),T==="backup"&&l.jsxs("div",{className:"tab-content",children:[l.jsx("p",{className:"tab-description",children:"     ."}),l.jsxs("div",{className:"backup-section",children:[l.jsx("h3",{children:" "}),l.jsx("p",{children:"  JSON  ."}),l.jsx("button",{className:"btn btn-primary",onClick:G,children:"  "})]}),l.jsxs("div",{className:"backup-section",children:[l.jsx("h3",{children:" "}),l.jsx("p",{children:"    ."}),l.jsx("input",{type:"file",accept:".json",onChange:ee,className:"file-input"})]}),y&&T==="backup"&&l.jsxs("div",{className:`import-result ${y.success?"success":"error"}`,children:[l.jsx("span",{className:"result-icon",children:y.success?"":""}),l.jsx("span",{className:"result-message",children:y.message}),y.success&&y.data&&l.jsx("button",{className:"btn btn-primary",onClick:P,children:""})]}),l.jsxs("div",{className:"backup-warning",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"    ,   ."})]})]})]})]})})}function Zx({expenses:i,persons:o,onExpenseClick:d,onUpdateMemo:u,onClose:p}){const[x,S]=m.useState("date"),[h,N]=m.useState("with-receipt"),[C,w]=m.useState(null),[j,b]=m.useState(""),v=m.useMemo(()=>{let E=[...i];switch(h){case"with-receipt":E=E.filter(_=>_.receiptUrl);break;case"without-receipt":E=E.filter(_=>!_.receiptUrl);break;case"with-memo":E=E.filter(_=>_.receiptMemo);break}switch(x){case"date":E.sort((_,G)=>G.date.localeCompare(_.date));break;case"amount":E.sort((_,G)=>G.amount-_.amount);break;case"category":E.sort((_,G)=>_.category.localeCompare(G.category));break}return E},[i,x,h]),T=E=>rt[E]||{icon:"",label:E},g=E=>o.find(_=>_.id===E)?.name||"-",y=E=>{w(E),b(E.receiptMemo||"")},A=()=>{C&&u&&(u(C.id,j),w(null))},R=m.useMemo(()=>({total:i.length,withReceipt:i.filter(E=>E.receiptUrl).length,withMemo:i.filter(E=>E.receiptMemo).length}),[i]);return l.jsx("div",{className:"gallery-overlay",onClick:p,children:l.jsxs("div",{className:"gallery-panel",onClick:E=>E.stopPropagation(),children:[l.jsxs("header",{className:"gallery-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:p,children:""})]}),l.jsxs("div",{className:"gallery-content",children:[l.jsxs("div",{className:"gallery-stats",children:[l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:R.total}),l.jsx("span",{className:"stat-label",children:" "})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:R.withReceipt}),l.jsx("span",{className:"stat-label",children:" "})]}),l.jsxs("div",{className:"stat-item",children:[l.jsx("span",{className:"stat-value",children:R.withMemo}),l.jsx("span",{className:"stat-label",children:" "})]}),l.jsxs("div",{className:"stat-item",children:[l.jsxs("span",{className:"stat-value",children:[Math.round(R.withReceipt/R.total*100)||0,"%"]}),l.jsx("span",{className:"stat-label",children:" "})]})]}),l.jsxs("div",{className:"gallery-controls",children:[l.jsxs("div",{className:"control-group",children:[l.jsx("label",{children:""}),l.jsxs("select",{className:"control-select",value:h,onChange:E=>N(E.target.value),children:[l.jsx("option",{value:"all",children:""}),l.jsx("option",{value:"with-receipt",children:" "}),l.jsx("option",{value:"without-receipt",children:" "}),l.jsx("option",{value:"with-memo",children:" "})]})]}),l.jsxs("div",{className:"control-group",children:[l.jsx("label",{children:""}),l.jsxs("select",{className:"control-select",value:x,onChange:E=>S(E.target.value),children:[l.jsx("option",{value:"date",children:""}),l.jsx("option",{value:"amount",children:""}),l.jsx("option",{value:"category",children:""})]})]})]}),v.length===0?l.jsxs("div",{className:"empty-gallery",children:[l.jsx("span",{className:"empty-icon",children:""}),l.jsx("p",{children:"  "})]}):l.jsx("div",{className:"receipt-grid",children:v.map(E=>{const _=T(E.category);return l.jsxs("div",{className:"receipt-card",onClick:()=>y(E),children:[l.jsxs("div",{className:"receipt-image",children:[E.receiptUrl?l.jsx("img",{src:E.receiptUrl,alt:""}):l.jsxs("div",{className:"receipt-placeholder",children:[l.jsx("span",{children:_.icon}),l.jsx("span",{className:"no-receipt",children:" "})]}),E.receiptMemo&&l.jsx("div",{className:"memo-badge",children:""})]}),l.jsxs("div",{className:"receipt-info",children:[l.jsx("span",{className:"receipt-desc",children:E.description}),l.jsxs("span",{className:"receipt-meta",children:[E.date,"  ",E.amount.toLocaleString()]})]})]},E.id)})})]}),C&&l.jsx("div",{className:"receipt-detail-modal",onClick:()=>w(null),children:l.jsxs("div",{className:"detail-content",onClick:E=>E.stopPropagation(),children:[l.jsxs("div",{className:"detail-header",children:[l.jsx("h3",{children:C.description}),l.jsx("button",{className:"btn-close",onClick:()=>w(null),children:""})]}),C.receiptUrl&&l.jsx("div",{className:"detail-image",children:l.jsx("img",{src:C.receiptUrl,alt:""})}),l.jsxs("div",{className:"detail-info",children:[l.jsxs("div",{className:"info-row",children:[l.jsx("span",{className:"info-label",children:""}),l.jsx("span",{className:"info-value",children:C.date})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{className:"info-label",children:""}),l.jsxs("span",{className:"info-value",children:["",C.amount.toLocaleString()]})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{className:"info-label",children:""}),l.jsx("span",{className:"info-value",children:g(C.paidBy)})]}),C.location&&l.jsxs("div",{className:"info-row",children:[l.jsx("span",{className:"info-label",children:""}),l.jsx("span",{className:"info-value",children:C.location})]})]}),l.jsxs("div",{className:"detail-memo",children:[l.jsx("label",{children:" "}),l.jsx("textarea",{className:"memo-textarea",value:j,onChange:E=>b(E.target.value),placeholder:"   ...",rows:3}),l.jsxs("div",{className:"memo-actions",children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>w(null),children:""}),l.jsx("button",{className:"btn btn-primary",onClick:A,children:""})]})]})]})})]})})}function Jx({trip:i,expenses:o,schedules:d,convertToKRW:u,onDateClick:p,onExpenseClick:x,onClose:S}){const[h,N]=m.useState(()=>i.startDate?new Date(i.startDate):new Date),C=m.useMemo(()=>{const v=h.getFullYear(),T=h.getMonth(),g=new Date(v,T,1),y=new Date(v,T+1,0),A=i.startDate?new Date(i.startDate):null,R=i.endDate?new Date(i.endDate):null,E=new Map;o.forEach(X=>{E.has(X.date)||E.set(X.date,[]),E.get(X.date).push(X)});const _=new Map;d.forEach(X=>{_.set(X.date,X)});const G=[];let ee=[];const P=g.getDay();for(let X=0;X<P;X++){const I=new Date(v,T,1-(P-X)).toISOString().split("T")[0];ee.push({date:I,isInTrip:!1,expenses:[],totalKRW:0})}for(let X=1;X<=y.getDate();X++){const ae=new Date(v,T,X),I=ae.toISOString().split("T")[0],ie=A&&R?ae>=A&&ae<=R:!1,ne=E.get(I)||[],je=ne.reduce((Ne,Z)=>Ne+u(Z.amount,Z.currency),0);ee.push({date:I,isInTrip:ie,expenses:ne,totalKRW:je,schedule:_.get(I)}),ee.length===7&&(G.push(ee),ee=[])}if(ee.length>0){for(;ee.length<7;){const ae=new Date(v,T+1,ee.length-6+(7-ee.length)).toISOString().split("T")[0];ee.push({date:ae,isInTrip:!1,expenses:[],totalKRW:0})}G.push(ee)}return G},[h,i,o,d,u]),w=v=>{N(T=>new Date(T.getFullYear(),T.getMonth()+v,1))},j=new Date().toISOString().split("T")[0],b=v=>v>=1e4?`${(v/1e4).toFixed(0)}`:v.toLocaleString();return l.jsx("div",{className:"calendar-overlay",onClick:S,children:l.jsxs("div",{className:"calendar-panel",onClick:v=>v.stopPropagation(),children:[l.jsxs("header",{className:"calendar-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:S,children:""})]}),l.jsxs("div",{className:"calendar-nav",children:[l.jsx("button",{className:"nav-btn",onClick:()=>w(-1),children:""}),l.jsxs("span",{className:"nav-title",children:[h.getFullYear()," ",h.getMonth()+1,""]}),l.jsx("button",{className:"nav-btn",onClick:()=>w(1),children:""})]}),l.jsxs("div",{className:"calendar-content",children:[l.jsx("div",{className:"weekday-header",children:["","","","","","",""].map((v,T)=>l.jsx("div",{className:`weekday ${T===0?"sunday":T===6?"saturday":""}`,children:v},v))}),l.jsx("div",{className:"calendar-grid",children:C.map((v,T)=>l.jsx("div",{className:"week-row",children:v.map((g,y)=>{const A=new Date(g.date).getDate(),R=new Date(g.date).getMonth()===h.getMonth();return l.jsxs("div",{className:`day-cell 
                                                ${R?"":"other-month"} 
                                                ${g.isInTrip?"in-trip":""} 
                                                ${g.date===j?"today":""}
                                                ${g.expenses.length>0?"has-expenses":""}
                                                ${y===0?"sunday":y===6?"saturday":""}
                                            `,onClick:()=>p?.(g.date),children:[l.jsx("span",{className:"day-num",children:A}),g.schedule&&l.jsxs("div",{className:"day-schedule",title:g.schedule.title,children:[" ",g.schedule.title.substring(0,6)]}),g.totalKRW>0&&l.jsxs("div",{className:"day-amount",children:["",b(g.totalKRW)]}),g.expenses.length>0&&l.jsxs("div",{className:"expense-dots",children:[g.expenses.slice(0,3).map((E,_)=>l.jsx("span",{className:"expense-dot",title:E.description,children:rt[E.category]?.icon||""},_)),g.expenses.length>3&&l.jsxs("span",{className:"more-dot",children:["+",g.expenses.length-3]})]})]},g.date)})},T))})]}),l.jsxs("div",{className:"calendar-legend",children:[l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-color in-trip"}),l.jsx("span",{children:" "})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-color today"}),l.jsx("span",{children:""})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-color has-expense"}),l.jsx("span",{children:" "})]})]})]})})}const Mf=ea.TEMPLATES,Af=ea.RECURRING_EXPENSES,wf=ea.SCHEDULED_EXPENSES;function $x(i){const[o,d]=m.useState({templates:[],recurringExpenses:[],scheduledExpenses:[]});m.useEffect(()=>{try{const _=localStorage.getItem(Mf),G=localStorage.getItem(Af),ee=localStorage.getItem(wf);d({templates:_?JSON.parse(_):[],recurringExpenses:G?JSON.parse(G):[],scheduledExpenses:ee?JSON.parse(ee):[]})}catch(_){oe.error("Failed to load expense management data:",_)}},[]);const u=m.useCallback(_=>{localStorage.setItem(Mf,JSON.stringify(_)),d(G=>({...G,templates:_}))},[]),p=m.useCallback(_=>{localStorage.setItem(Af,JSON.stringify(_)),d(G=>({...G,recurringExpenses:_}))},[]),x=m.useCallback(_=>{localStorage.setItem(wf,JSON.stringify(_)),d(G=>({...G,scheduledExpenses:_}))},[]),S=m.useCallback((_,G)=>{const ee={id:lu(),name:_,expense:G,createdAt:new Date().toISOString()};return u([...o.templates,ee]),ee.id},[o.templates,u]),h=m.useCallback(_=>{u(o.templates.filter(G=>G.id!==_))},[o.templates,u]),N=m.useCallback((_,G)=>{u(o.templates.map(ee=>ee.id===_?{...ee,...G}:ee))},[o.templates,u]),C=m.useCallback(_=>{const{id:G,...ee}=_;return{...ee,date:new Date().toISOString().split("T")[0]}},[]),w=m.useCallback((_,G,ee,P,X)=>{const ae={id:lu(),name:_,expense:G,frequency:ee,startDate:P,endDate:X,enabled:!0};return p([...o.recurringExpenses,ae]),ae.id},[o.recurringExpenses,p]),j=m.useCallback(_=>{p(o.recurringExpenses.filter(G=>G.id!==_))},[o.recurringExpenses,p]),b=m.useCallback(_=>{p(o.recurringExpenses.map(G=>G.id===_?{...G,enabled:!G.enabled}:G))},[o.recurringExpenses,p]),v=m.useCallback(async()=>{},[o.recurringExpenses,i,p]),T=m.useCallback((_,G,ee)=>{const P={id:lu(),expense:_,scheduledDate:G,status:"pending",note:ee};return x([...o.scheduledExpenses,P]),P.id},[o.scheduledExpenses,x]),g=m.useCallback(_=>{x(o.scheduledExpenses.filter(G=>G.id!==_))},[o.scheduledExpenses,x]),y=m.useCallback(_=>{x(o.scheduledExpenses.map(G=>G.id===_?{...G,status:"cancelled"}:G))},[o.scheduledExpenses,x]),A=m.useCallback(async _=>!1,[o.scheduledExpenses,i,x]),R=m.useCallback(async()=>{},[o.scheduledExpenses,A,i]),E=m.useMemo(()=>o.scheduledExpenses.filter(_=>_.status==="pending").length,[o.scheduledExpenses]);return{...o,addTemplate:S,removeTemplate:h,updateTemplate:N,duplicateExpense:C,addRecurringExpense:w,removeRecurringExpense:j,toggleRecurringExpense:b,checkAndApplyRecurring:v,addScheduledExpense:T,removeScheduledExpense:g,cancelScheduledExpense:y,applyScheduledExpense:A,checkAndApplyScheduled:R,pendingScheduledCount:E}}const Fx=m.memo(function({expense:o,currencies:d,persons:u,convertToKRW:p,onRemove:x,onEdit:S,onCopy:h,onToggleBookmark:N,draggable:C,onDragStart:w,onDragEnd:j,onDragOver:b}){const v=(g,y)=>`${d.find(R=>R.code===y)?.symbol||""}${g.toLocaleString()}`,T=g=>u.find(y=>y.id===g)?.name||"  ";return l.jsxs("li",{className:`expense-item ${o.bookmarked?"bookmarked":""}`,onClick:()=>S(o),draggable:C,onDragStart:g=>w?.(g,o.id),onDragEnd:j,onDragOver:g=>{g.preventDefault(),b?.(g,o.id)},children:[l.jsx("button",{className:`btn-bookmark ${o.bookmarked?"active":""}`,onClick:g=>{g.stopPropagation(),N?.(o.id)},title:o.bookmarked?" ":"",children:o.bookmarked?"":""}),l.jsx("div",{className:"expense-icon",children:rt[o.category]?.icon||""}),l.jsxs("div",{className:"expense-info",children:[l.jsxs("div",{className:"expense-description",children:[o.description,o.location&&l.jsxs("span",{className:"expense-location",children:[" ",o.location]})]}),l.jsxs("div",{className:"expense-meta",children:[l.jsxs("span",{children:[T(o.paidBy)," "]}),l.jsx("span",{children:""}),l.jsxs("span",{children:[o.sharedBy.length," "]}),o.receiptUrl&&l.jsx("span",{children:""}),o.tags&&o.tags.length>0&&l.jsxs("span",{className:"expense-tags",children:[" ",o.tags.length]})]})]}),l.jsxs("div",{className:"expense-amount-section",children:[l.jsx("div",{className:"expense-amount",children:v(o.amount,o.currency)}),o.currency!=="KRW"&&l.jsxs("div",{className:"expense-amount-krw",children:[" ",p(o.amount,o.currency).toLocaleString()]})]}),l.jsxs("div",{className:"expense-actions-btns",children:[l.jsx("button",{className:"btn-icon btn-copy",onClick:g=>{g.stopPropagation(),h?.(o)},title:"",children:""}),l.jsx("button",{className:"btn-icon btn-danger",onClick:g=>{g.stopPropagation(),x(o.id)},title:"",children:""})]})]})});function Pf({persons:i,expenses:o,currencies:d,onAddExpense:u,onRemoveExpense:p,onUpdateExpense:x,onReorderExpenses:S,onUploadReceipt:h,convertToKRW:N,getExpensesByCategory:C,getExpensesByDate:w,getExpensesByPerson:j}){const[b,v]=m.useState(!1),[T,g]=m.useState(""),[y,A]=m.useState(""),[R,E]=m.useState("KRW"),[_,G]=m.useState(""),[ee,P]=m.useState([]),[X,ae]=m.useState("food"),[I,ie]=m.useState(""),[ne,je]=m.useState(""),[Ne,Z]=m.useState(!1),[H,z]=m.useState(!1),[$,te]=m.useState(kx),[ge,Me]=m.useState(null),[de,K]=m.useState(!0),[M,q]=m.useState(null),[F,le]=m.useState(null),[re,he]=m.useState(!1),[pe,xe]=m.useState(!1),[Qe,Nt]=m.useState(!1),[Ge,ot]=m.useState(!1),[ta,aa]=m.useState(!1),[bl,Wa]=m.useState(!1),[Ia,Yt]=m.useState(!1),St=$x(),la=m.useMemo(()=>{let W=Ux(o,$);if(ne.trim()){const be=ne.toLowerCase();W=W.filter(et=>et.description.toLowerCase().includes(be)||et.location?.toLowerCase().includes(be)||et.tags?.some(Gt=>Gt.toLowerCase().includes(be)))}return Ne&&(W=W.filter(be=>be.bookmarked)),W},[o,$,ne,Ne]),Je=m.useMemo(()=>{let W=0;return $.searchQuery&&W++,$.categories.length>0&&W++,$.payers.length>0&&W++,($.dateFrom||$.dateTo)&&W++,ne&&W++,Ne&&W++,W},[$,ne,Ne]),cs=m.useMemo(()=>la.reduce((W,be)=>W+N(be.amount,be.currency),0),[la,N]),is=m.useCallback(W=>{const{id:be,...et}=W;u({...et,description:`${W.description} ()`,date:new Date().toISOString(),bookmarked:!1})},[u]),rs=m.useCallback(W=>{const be=o.find(et=>et.id===W);be&&x(W,{bookmarked:!be.bookmarked})},[o,x]),jl=m.useCallback((W,be)=>{q(be),W.dataTransfer.effectAllowed="move"},[]),qc=m.useCallback(async()=>{if(M&&F&&M!==F){const W=la.map(Gt=>Gt.id),be=W.indexOf(M),et=W.indexOf(F);if(be!==-1&&et!==-1){const Gt=[...W];if(Gt.splice(be,1),Gt.splice(et,0,M),S)try{await S(Gt)}catch{}}}q(null),le(null)},[M,F,la,S]),us=m.useCallback((W,be)=>{le(be)},[]),Nl=m.useCallback(()=>{g(""),A(""),E("KRW"),G(""),P([]),ae("food"),ie(""),v(!1)},[]),Yc=m.useCallback(W=>{W.preventDefault();const be=parseFloat(y);if(!T.trim()){alert(" ");return}if(!y||isNaN(be)||be<=0){alert("   (0  )");return}if(!_){alert(" ");return}if(ee.length===0){alert("   ");return}u({description:T.trim(),amount:be,currency:R,paidBy:_,sharedBy:ee,date:new Date().toISOString(),category:X,location:I.trim()||void 0}),Nl()},[T,y,R,_,ee,X,I,u,Nl]),Pa=m.useCallback(W=>{P(be=>be.includes(W)?be.filter(et=>et!==W):[...be,W])},[]),dt=m.useCallback(()=>{P(i.map(W=>W.id))},[i]),Jt=m.useCallback(W=>{Me(W)},[]);return l.jsxs("div",{className:"expense-tab",children:[l.jsxs("div",{className:"expense-search-bar",children:[l.jsxs("div",{className:"search-input-wrapper",children:[l.jsx("span",{className:"search-icon",children:""}),l.jsx("input",{type:"text",className:"search-input",placeholder:"  (, , )...",value:ne,onChange:W=>je(W.target.value)}),ne&&l.jsx("button",{className:"search-clear-btn",onClick:()=>je(""),children:""})]}),l.jsx("button",{className:`bookmark-filter-btn ${Ne?"active":""}`,onClick:()=>Z(!Ne),title:Ne?"  ":" ",children:Ne?"":""})]}),l.jsxs("div",{className:"expense-actions",children:[!b&&l.jsx("button",{className:"btn btn-primary btn-add-expense",onClick:()=>v(!0),disabled:i.length<2,children:"+  "}),l.jsxs("div",{className:"expense-action-buttons",children:[l.jsxs("button",{className:`filter-toggle-btn ${Je>0?"active":""}`,onClick:()=>z(!H),children:[" ",Je>0&&l.jsx("span",{className:"filter-badge",children:Je})]}),l.jsx("button",{className:`filter-toggle-btn ${de?"active":""}`,onClick:()=>K(!de),children:" "}),l.jsxs("div",{className:"tools-menu-container",children:[l.jsx("button",{className:`filter-toggle-btn ${Ia?"active":""}`,onClick:()=>Yt(!Ia),children:" "}),Ia&&l.jsxs("div",{className:"tools-dropdown",children:[l.jsx("button",{onClick:()=>{he(!0),Yt(!1)},children:" "}),l.jsx("button",{onClick:()=>{xe(!0),Yt(!1)},children:"  "}),l.jsx("button",{onClick:()=>{Nt(!0),Yt(!1)},children:"  "}),l.jsx("button",{onClick:()=>{Wa(!0),Yt(!1)},children:"  "}),l.jsx("button",{onClick:()=>{aa(!0),Yt(!1)},children:"  "}),l.jsx("button",{onClick:()=>{ot(!0),Yt(!1)},children:"  "})]})]})]})]}),H&&l.jsx(Bx,{persons:i,filters:$,onFilterChange:te,onClose:()=>z(!1)}),de&&o.length>0&&l.jsx(Hx,{expensesByCategory:C(),expensesByDate:w(),expensesByPerson:j(),persons:i,totalExpenses:cs}),b&&l.jsxs("form",{className:"expense-form",onSubmit:Yc,children:[l.jsxs("div",{className:"form-header",children:[l.jsx("h3",{children:"  "}),l.jsx("button",{type:"button",className:"btn-close",onClick:Nl,children:""})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"text",className:"input-field",placeholder:":  ",value:T,onChange:W=>g(W.target.value),required:!0})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"number",className:"input-field",placeholder:"0",value:y,onChange:W=>A(W.target.value),min:"0",step:"0.01",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("select",{className:"input-field",value:R,onChange:W=>E(W.target.value),children:d.map(W=>l.jsxs("option",{value:W.code,children:[W.symbol," ",W.code]},W.code))})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("div",{className:"category-grid",children:Object.entries(rt).map(([W,{label:be,icon:et}])=>l.jsxs("button",{type:"button",className:`category-btn ${X===W?"active":""}`,onClick:()=>ae(W),children:[l.jsx("span",{children:et}),l.jsx("span",{children:be})]},W))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsxs("select",{className:"input-field",value:_,onChange:W=>G(W.target.value),required:!0,children:[l.jsx("option",{value:"",children:""}),i.map(W=>l.jsx("option",{value:W.id,children:W.name},W.id))]})]}),l.jsxs("div",{className:"form-group",children:[l.jsxs("div",{className:"form-label-row",children:[l.jsx("label",{children:"  "}),l.jsx("button",{type:"button",className:"btn-text",onClick:dt,children:" "})]}),l.jsx("div",{className:"shared-by-grid",children:i.map(W=>l.jsxs("button",{type:"button",className:`shared-btn ${ee.includes(W.id)?"active":""}`,onClick:()=>Pa(W.id),style:{"--person-color":W.color},children:[l.jsx("span",{className:"shared-avatar",children:W.name.charAt(0)}),l.jsx("span",{children:W.name})]},W.id))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" ()"}),l.jsx("input",{type:"text",className:"input-field",placeholder:":  ",value:I,onChange:W=>ie(W.target.value)})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Nl,children:""}),l.jsx("button",{type:"submit",className:"btn btn-primary",children:""})]})]}),i.length<2&&l.jsx("div",{className:"warning-box",children:"    2  "}),la.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("p",{children:Je>0?"    ":"   "}),l.jsx("p",{className:"empty-hint",children:Je>0?" ":"  "})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"expense-summary",children:[l.jsx("span",{children:Je>0?`  (${la.length})`:" "}),l.jsxs("span",{className:"total-amount",children:["",cs.toLocaleString()]})]}),l.jsx("ul",{className:"expense-list",children:la.map(W=>l.jsx(Fx,{expense:W,currencies:d,persons:i,convertToKRW:N,onRemove:p,onEdit:Jt,onCopy:is,onToggleBookmark:rs,draggable:!0,onDragStart:jl,onDragEnd:qc,onDragOver:us},W.id))})]}),ge&&l.jsx(Rx,{expense:ge,persons:i,currencies:d,onSave:x,onUploadReceipt:h,onClose:()=>Me(null)}),re&&l.jsx(Lx,{templates:St.templates,persons:i,onApplyTemplate:W=>{W.expense&&u({description:W.expense.description||"",amount:W.expense.amount||0,currency:W.expense.currency||"KRW",paidBy:W.expense.paidBy||"",sharedBy:W.expense.sharedBy||[],date:new Date().toISOString(),category:W.expense.category||"other"}),he(!1)},onSaveTemplate:(W,be)=>{St.addTemplate(W,be)},onDeleteTemplate:St.removeTemplate,onClose:()=>he(!1)}),pe&&l.jsx(Yx,{recurringExpenses:St.recurringExpenses,persons:i,onAdd:(W,be,et,Gt,el)=>St.addRecurringExpense(W,be,et,Gt,el),onDelete:St.removeRecurringExpense,onToggle:St.toggleRecurringExpense,onClose:()=>xe(!1)}),Qe&&l.jsx(Gx,{scheduledExpenses:St.scheduledExpenses,persons:i,onApply:St.applyScheduledExpense,onCancel:St.cancelScheduledExpense,onDelete:St.removeScheduledExpense,onClose:()=>Nt(!1)}),Ge&&l.jsx(Vx,{expenses:o,persons:i,currencies:d,onImportExpenses:W=>{W.forEach(be=>u(be))},onClose:()=>ot(!1)}),ta&&l.jsx(Zx,{expenses:o,persons:i,onExpenseClick:W=>{aa(!1),Me(W)},onUpdateMemo:(W,be)=>x(W,{receiptMemo:be}),onClose:()=>aa(!1)}),bl&&l.jsx(Jx,{trip:{startDate:"",endDate:"",name:" "},expenses:o,schedules:[],convertToKRW:N,onExpenseClick:W=>{Wa(!1),Me(W)},onClose:()=>Wa(!1)})]})}function Wx({fromName:i,toName:o,amount:d,bankInfo:u,tossId:p,kakaopayId:x,onClose:S}){const[h,N]=m.useState("text"),[C,w]=m.useState(!1),j=u?.bankName&&u?.accountNumber,b=m.useMemo(()=>typeof window>"u"?!1:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),[]),v=()=>{switch(h){case"toss":return j?`supertoss://send?bank=${encodeURIComponent(u.bankName)}&accountNo=${u.accountNumber}&amount=${d}&origin=travel-expense`:`supertoss://send?amount=${d}`;case"kakaopay":return`kakaotalk://kakaopay/money/to/friend?amount=${d}`;default:return j?`${u.bankName} ${u.accountNumber} ${u.accountHolder||o} ${d}`:`: ${i}  ${o} ${d.toLocaleString()}`}},T=async()=>{if(j){const g=`${u.bankName} ${u.accountNumber} (${u.accountHolder||o})`;await navigator.clipboard.writeText(g),w(!0),setTimeout(()=>w(!1),2e3)}};return l.jsx("div",{className:"qr-modal",onClick:S,children:l.jsxs("div",{className:"qr-content",onClick:g=>g.stopPropagation(),children:[l.jsx("h3",{className:"qr-title",children:"  "}),l.jsxs("p",{className:"qr-subtitle",children:[i,"  ",o]}),l.jsxs("div",{className:"qr-type-selector",children:[l.jsx("button",{className:`qr-type-btn ${h==="text"?"active":""}`,onClick:()=>N("text"),children:" "}),l.jsx("button",{className:`qr-type-btn ${h==="toss"?"active":""}`,onClick:()=>N("toss"),children:" "}),l.jsx("button",{className:`qr-type-btn ${h==="kakaopay"?"active":""}`,onClick:()=>N("kakaopay"),children:" "})]}),l.jsx("div",{className:"qr-code-wrapper",children:l.jsx(Xg,{value:v(),size:180,level:"H",includeMargin:!1})}),l.jsxs("div",{className:"qr-amount",children:["",d.toLocaleString()]}),h!=="text"&&l.jsxs("div",{className:"qr-deeplink-info",children:[l.jsx("p",{className:"qr-deeplink-hint",children:"  QR     "}),!b&&l.jsxs("p",{className:"qr-platform-warning",children:["  PC .",h==="toss"?"":"","   .",l.jsx("br",{}),l.jsx("small",{children:"    ."})]})]}),j?l.jsxs("div",{className:"qr-bank-info",children:[l.jsxs("div",{className:"qr-bank-header",children:[l.jsx("span",{className:"bank-icon",children:""}),l.jsx("span",{children:"  "})]}),l.jsxs("div",{className:"qr-bank-details",children:[l.jsx("span",{className:"bank-name",children:u.bankName}),l.jsx("span",{className:"bank-account",children:u.accountNumber}),l.jsxs("span",{className:"bank-holder",children:["(",u.accountHolder||o,")"]})]}),l.jsx("button",{className:`btn btn-secondary btn-sm ${C?"copied":""}`,onClick:T,children:C?" ":"  "})]}):l.jsxs("div",{className:"qr-no-bank",children:[l.jsxs("p",{className:"qr-hint",children:[" ",o,"   "]}),l.jsxs("p",{className:"qr-hint-sub",children:["    ",l.jsx("br",{}),"    ."]})]}),l.jsx("div",{className:"qr-actions",children:l.jsx("button",{className:"btn btn-primary",onClick:S,children:""})})]})})}const Of="settlement_reminder";function Ix({persons:i,pendingSettlements:o,onClose:d}){const[u,p]=m.useState(()=>{const b=localStorage.getItem(Of);if(b)try{return JSON.parse(b)}catch{}return{enabled:!1,frequency:"daily",customDays:3,notifyAt:"20:00"}}),[x,S]=m.useState(!1);m.useEffect(()=>{localStorage.setItem(Of,JSON.stringify(u))},[u]);const h=b=>{p(v=>({...v,...b}))},N=b=>i.find(v=>v.id===b)?.name||"-",C=m.useCallback(async()=>{if(!("Notification"in window)){alert("    .");return}if(Notification.permission!=="granted"&&await Notification.requestPermission()!=="granted"){alert("  .");return}const b=o.filter(T=>!T.completed),v=b.length>0?` ${b.length} !`:"  !";new Notification(" ",{body:v,icon:"/icon-192.png",badge:"/icon-192.png"}),S(!0),setTimeout(()=>S(!1),3e3)},[o]),w=o.filter(b=>!b.completed).length,j=o.filter(b=>!b.completed).reduce((b,v)=>b+v.amount,0);return l.jsx("div",{className:"reminder-overlay",onClick:d,children:l.jsxs("div",{className:"reminder-panel",onClick:b=>b.stopPropagation(),children:[l.jsxs("header",{className:"reminder-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:d,children:""})]}),l.jsxs("div",{className:"reminder-content",children:[l.jsx("div",{className:"reminder-status",children:w>0?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"status-icon pending",children:""}),l.jsxs("div",{className:"status-text",children:[l.jsxs("span",{className:"status-count",children:[w,""]}),l.jsx("span",{className:"status-label",children:"  "})]}),l.jsxs("div",{className:"status-amount",children:["",j.toLocaleString()]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"status-icon complete",children:""}),l.jsx("div",{className:"status-text",children:l.jsx("span",{className:"status-label",children:"  !"})})]})}),w>0&&l.jsxs("div",{className:"pending-list",children:[l.jsx("h3",{children:"  "}),o.filter(b=>!b.completed).map((b,v)=>l.jsxs("div",{className:"pending-item",children:[l.jsx("span",{className:"pending-from",children:N(b.from)}),l.jsx("span",{className:"pending-arrow",children:""}),l.jsx("span",{className:"pending-to",children:N(b.to)}),l.jsxs("span",{className:"pending-amount",children:["",b.amount.toLocaleString()]})]},v))]}),l.jsxs("div",{className:"reminder-settings",children:[l.jsx("h3",{children:" "}),l.jsxs("div",{className:"setting-row",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("span",{className:"setting-label",children:" "}),l.jsx("span",{className:"setting-desc",children:"   "})]}),l.jsx("button",{className:`toggle-switch ${u.enabled?"on":""}`,onClick:()=>h({enabled:!u.enabled}),children:l.jsx("span",{className:"toggle-thumb"})})]}),u.enabled&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"setting-group",children:[l.jsx("label",{children:" "}),l.jsx("div",{className:"frequency-options",children:["daily","weekly","custom"].map(b=>l.jsxs("button",{className:`freq-btn ${u.frequency===b?"active":""}`,onClick:()=>h({frequency:b}),children:[b==="daily"&&"",b==="weekly"&&"",b==="custom"&&" "]},b))})]}),u.frequency==="custom"&&l.jsxs("div",{className:"setting-group",children:[l.jsx("label",{children:"  ()"}),l.jsx("input",{type:"number",className:"input-field",value:u.customDays||3,onChange:b=>h({customDays:Math.max(1,parseInt(b.target.value)||3)}),min:"1",max:"30"})]}),l.jsxs("div",{className:"setting-group",children:[l.jsx("label",{children:" "}),l.jsx("input",{type:"time",className:"input-field",value:u.notifyAt||"20:00",onChange:b=>h({notifyAt:b.target.value})})]})]}),l.jsx("button",{className:`btn btn-test ${x?"sent":""}`,onClick:C,children:x?"   ":"   "})]})]})]})})}function Px({fromPerson:i,toPerson:o,amount:d,onClose:u}){const[p,x]=m.useState(null),S=m.useCallback(()=>(encodeURIComponent(`${i.name}${o.name} : ${d.toLocaleString()}`),`kakaotalk://kakaopay/home?amount=${d}`),[i,o,d]),h=m.useCallback(()=>{const b=o.bankName||"",v=o.accountNumber||"";return o.accountHolder||o.name,b&&v?`supertoss://send?bank=${encodeURIComponent(b)}&accountNo=${v}&amount=${d}&origin=travel-expense`:`supertoss://send?amount=${d}`},[o,d]),N=m.useCallback(()=>o.bankName&&o.accountNumber?`${o.bankName} ${o.accountNumber} (${o.accountHolder||o.name})`:null,[o]),C=async(b,v)=>{try{await navigator.clipboard.writeText(b),x(v),setTimeout(()=>x(null),2e3)}catch(T){oe.error(" :",T)}},w=()=>{const b=N();let v=`[ ] ${i.name}  ${o.name}
`;return v+=`: ${d.toLocaleString()}
`,b&&(v+=`: ${b}`),v},j=N();return l.jsx("div",{className:"modal-overlay",onClick:u,children:l.jsxs("div",{className:"modal-content payment-links-modal",onClick:b=>b.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:" "}),l.jsx("button",{className:"btn-close",onClick:u,children:""})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"payment-summary",children:[l.jsxs("div",{className:"payment-from",children:[l.jsx("div",{className:"payment-avatar",style:{backgroundColor:i.color},children:i.name.charAt(0)}),l.jsx("span",{children:i.name})]}),l.jsxs("div",{className:"payment-arrow",children:[l.jsxs("span",{className:"arrow-amount",children:["",d.toLocaleString()]}),l.jsx("span",{className:"arrow-icon",children:""})]}),l.jsxs("div",{className:"payment-to",children:[l.jsx("div",{className:"payment-avatar",style:{backgroundColor:o.color},children:o.name.charAt(0)}),l.jsx("span",{children:o.name})]})]}),j&&l.jsxs("div",{className:"account-info-card",children:[l.jsxs("div",{className:"account-info-header",children:[l.jsx("span",{className:"account-icon",children:""}),l.jsx("span",{children:"  "})]}),l.jsxs("div",{className:"account-info-content",children:[l.jsx("span",{className:"account-text",children:j}),l.jsx("button",{className:`btn-copy ${p==="account"?"copied":""}`,onClick:()=>C(o.accountNumber||"","account"),children:p==="account"?" ":" "})]})]}),l.jsxs("div",{className:"payment-apps",children:[l.jsx("h4",{children:" "}),l.jsxs("div",{className:"payment-app-buttons",children:[l.jsxs("button",{className:"payment-app-btn kakaopay",onClick:()=>{const b=S(),v=Date.now(),T=document.createElement("iframe");T.style.display="none",T.src=b,document.body.appendChild(T),setTimeout(()=>{document.body.removeChild(T),Date.now()-v<1500&&window.open("https://kakaopay.com","_blank")},1e3)},children:[l.jsx("span",{className:"app-icon",children:""}),l.jsx("span",{className:"app-name",children:""})]}),l.jsxs("button",{className:"payment-app-btn toss",onClick:()=>{const b=h(),v=Date.now();window.location.href=b,setTimeout(()=>{Date.now()-v<1500&&window.open("https://toss.im","_blank")},1e3)},children:[l.jsx("span",{className:"app-icon",children:""}),l.jsx("span",{className:"app-name",children:""})]})]}),l.jsx("p",{className:"payment-hint",children:"      "})]}),l.jsxs("div",{className:"message-copy",children:[l.jsx("h4",{children:" "}),l.jsx("div",{className:"message-preview",children:l.jsx("pre",{children:w()})}),l.jsx("button",{className:`btn btn-secondary ${p==="message"?"copied":""}`,onClick:()=>C(w(),"message"),children:p==="message"?" ":"  "})]})]})]})})}function ey({settlement:i,fromPerson:o,toPerson:d,onPartialPay:u,onClose:p}){const[x,S]=m.useState(""),[h,N]=m.useState(""),[C,w]=m.useState(!1),[j,b]=m.useState(""),v=i.totalPaid||0,T=i.amount-v,g=async A=>{A.preventDefault(),b("");const R=parseFloat(x);if(isNaN(R)||R<=0){b("  .");return}if(R>T){b(` (${T.toLocaleString()}) .`);return}w(!0);try{await u(i.from,i.to,R,h||void 0),p()}catch{b("    .")}finally{w(!1)}},y=Math.round(v/i.amount*100);return l.jsx("div",{className:"modal-overlay",onClick:p,children:l.jsxs("div",{className:"modal-content partial-settlement-modal",onClick:A=>A.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:" "}),l.jsx("button",{className:"btn-close",onClick:p,children:""})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"settlement-info",children:[l.jsxs("div",{className:"settlement-parties",children:[l.jsxs("div",{className:"party from",children:[l.jsx("div",{className:"party-avatar",style:{backgroundColor:o.color},children:o.name.charAt(0)}),l.jsx("span",{children:o.name})]}),l.jsx("div",{className:"arrow",children:""}),l.jsxs("div",{className:"party to",children:[l.jsx("div",{className:"party-avatar",style:{backgroundColor:d.color},children:d.name.charAt(0)}),l.jsx("span",{children:d.name})]})]}),l.jsxs("div",{className:"progress-section",children:[l.jsxs("div",{className:"progress-header",children:[l.jsx("span",{children:" "}),l.jsxs("span",{children:[y,"%"]})]}),l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:"progress-fill",style:{width:`${y}%`}})}),l.jsxs("div",{className:"progress-amounts",children:[l.jsxs("span",{children:[": ",v.toLocaleString()]}),l.jsxs("span",{children:[": ",T.toLocaleString()]})]})]})]}),i.partialPayments&&i.partialPayments.length>0&&l.jsxs("div",{className:"payment-history",children:[l.jsx("h4",{children:" "}),l.jsx("ul",{children:i.partialPayments.map(A=>l.jsxs("li",{className:"payment-item",children:[l.jsxs("div",{className:"payment-info",children:[l.jsxs("span",{className:"payment-amount",children:["",A.amount.toLocaleString()]}),A.note&&l.jsx("span",{className:"payment-note",children:A.note})]}),l.jsx("span",{className:"payment-date",children:new Date(A.paidAt).toLocaleDateString()})]},A.id))})]}),T>0&&l.jsxs("form",{className:"partial-pay-form",onSubmit:g,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" "}),l.jsxs("div",{className:"amount-input-wrapper",children:[l.jsx("span",{className:"currency-symbol",children:""}),l.jsx("input",{type:"number",className:"input-field",placeholder:T.toString(),value:x,onChange:A=>S(A.target.value),min:"1",max:T})]}),l.jsxs("div",{className:"quick-amounts",children:[l.jsx("button",{type:"button",onClick:()=>S(Math.floor(T*.5).toString()),children:"50%"}),l.jsx("button",{type:"button",onClick:()=>S(Math.floor(T*.25).toString()),children:"25%"}),l.jsx("button",{type:"button",onClick:()=>S(T.toString()),children:""})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:" ()"}),l.jsx("input",{type:"text",className:"input-field",placeholder:":  ",value:h,onChange:A=>N(A.target.value)})]}),j&&l.jsx("p",{className:"error-message",children:j}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:p,disabled:C,children:""}),l.jsx("button",{type:"submit",className:"btn btn-primary",disabled:C||!x,children:C?" ...":" "})]})]}),T<=0&&l.jsxs("div",{className:"completed-message",children:[l.jsx("div",{className:"check-icon",children:""}),l.jsx("p",{children:" !"})]})]})]})})}function ty({history:i,persons:o,onClose:d}){const u=h=>o.find(N=>N.id===h),p=m.useMemo(()=>[...i].sort((h,N)=>new Date(N.paidAt).getTime()-new Date(h.paidAt).getTime()),[i]),x=m.useMemo(()=>i.reduce((h,N)=>h+N.amount,0),[i]),S=h=>new Date(h).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l.jsx("div",{className:"modal-overlay",onClick:d,children:l.jsxs("div",{className:"modal-content settlement-history-modal",onClick:h=>h.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:d,children:""})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"history-summary",children:[l.jsxs("div",{className:"summary-stat",children:[l.jsx("span",{className:"stat-value",children:i.length}),l.jsx("span",{className:"stat-label",children:"  "})]}),l.jsxs("div",{className:"summary-stat",children:[l.jsxs("span",{className:"stat-value",children:["",x.toLocaleString()]}),l.jsx("span",{className:"stat-label",children:"  "})]})]}),p.length===0?l.jsxs("div",{className:"empty-history",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("p",{children:"  "})]}):l.jsx("ul",{className:"history-list",children:p.map(h=>{const N=u(h.from),C=u(h.to);return l.jsxs("li",{className:`history-item ${h.type}`,children:[l.jsxs("div",{className:"history-main",children:[l.jsxs("div",{className:"history-parties",children:[l.jsx("div",{className:"history-avatar",style:{backgroundColor:N?.color||"#888"},children:N?.name.charAt(0)||"?"}),l.jsx("span",{className:"history-arrow",children:""}),l.jsx("div",{className:"history-avatar",style:{backgroundColor:C?.color||"#888"},children:C?.name.charAt(0)||"?"})]}),l.jsxs("div",{className:"history-details",children:[l.jsxs("div",{className:"history-names",children:[N?.name||"  ","  ",C?.name||"  "]}),l.jsxs("div",{className:"history-meta",children:[l.jsx("span",{className:`history-type ${h.type}`,children:h.type==="full"?"":""}),h.note&&l.jsx("span",{className:"history-note",children:h.note})]})]})]}),l.jsxs("div",{className:"history-right",children:[l.jsxs("div",{className:"history-amount",children:["",h.amount.toLocaleString()]}),l.jsx("div",{className:"history-date",children:S(h.paidAt)})]})]},h.id)})})]})]})})}function eh({persons:i,settlements:o,expenses:d,currencies:u,settlementHistory:p=[],getTotalByPerson:x,convertToKRW:S,onMarkComplete:h,onMarkIncomplete:N,onPartialPay:C}){const[w,j]=m.useState(null),[b,v]=m.useState(!1),[T,g]=m.useState(!1),[y,A]=m.useState(null),[R,E]=m.useState(null),[_,G]=m.useState(null),[ee,P]=m.useState(!1),X=m.useRef(null),ae=m.useMemo(()=>new Map(i.map(Z=>[Z.id,Z])),[i]),I=m.useCallback(Z=>ae.get(Z),[ae]),ie=m.useCallback(async Z=>{try{Z.completed?await N(Z.from,Z.to):await h(Z.from,Z.to)}catch(H){oe.error("   :",H)}},[h,N]),ne=m.useCallback((Z,H,z)=>{const $=I(Z),te=I(H);$&&te&&j({from:$.name,to:te.name,amount:z,bankInfo:{bankName:te.bankName,accountNumber:te.accountNumber,accountHolder:te.accountHolder}})},[I]),je=m.useCallback(async()=>{if(!X.current){oe.warn("settlementRef.current is null");return}v(!0);try{oe.info("Starting image export...");const H=(await iu(X.current,{backgroundColor:"#ffffff",scale:2,useCORS:!0,allowTaint:!0,logging:!1})).toDataURL("image/png"),z=document.createElement("a");z.download=`_${new Date().toLocaleDateString().replace(/\//g,"-")}.png`,z.href=H,document.body.appendChild(z),z.click(),document.body.removeChild(z),oe.info("Image export completed")}catch(Z){oe.error("  :",Z),alert("  .  .")}finally{v(!1)}},[]),Ne=m.useCallback(async()=>{if(!X.current){oe.warn("settlementRef.current is null");return}v(!0);try{oe.info("Starting PDF export...");const Z=await iu(X.current,{backgroundColor:"#ffffff",scale:2,useCORS:!0,allowTaint:!0,logging:!1}),H=Z.toDataURL("image/png"),z=new Bc("p","mm","a4"),$=z.internal.pageSize.getWidth(),te=Z.height*$/Z.width,ge=z.internal.pageSize.getHeight();te>ge,z.addImage(H,"PNG",0,0,$,te),z.save(`_${new Date().toLocaleDateString().replace(/\//g,"-")}.pdf`),oe.info("PDF export completed")}catch(Z){oe.error("PDF  :",Z),alert("PDF  .  .")}finally{v(!1)}},[]);return i.length===0?l.jsx("div",{className:"settlement-tab",children:l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("p",{children:"  "})]})}):l.jsxs("div",{className:"settlement-tab",children:[l.jsxs("div",{ref:X,children:[l.jsxs("section",{className:"summary-section",children:[l.jsx("h3",{children:" "}),l.jsx("div",{className:"summary-grid",children:i.map(Z=>{const{paid:H,shouldPay:z}=x(Z.id),$=H-z;return l.jsxs("div",{className:"summary-card",children:[l.jsxs("div",{className:"summary-header",children:[l.jsx("div",{className:"summary-avatar",style:{backgroundColor:Z.color},children:Z.name.charAt(0)}),l.jsx("span",{className:"summary-name",children:Z.name})]}),l.jsxs("div",{className:"summary-details",children:[l.jsxs("div",{className:"summary-row",children:[l.jsx("span",{children:" "}),l.jsxs("span",{className:"amount paid",children:["",H.toLocaleString()]})]}),l.jsxs("div",{className:"summary-row",children:[l.jsx("span",{children:"  "}),l.jsxs("span",{className:"amount should-pay",children:["",z.toLocaleString()]})]}),l.jsx("div",{className:"summary-divider"}),l.jsxs("div",{className:"summary-row balance-row",children:[l.jsx("span",{children:""}),l.jsxs("span",{className:`amount balance ${$>=0?"positive":"negative"}`,children:[$>=0?"+":"-","",Math.abs($).toLocaleString()]})]})]}),l.jsx("button",{className:"btn-detail-view",onClick:()=>A(Z.id),children:" "})]},Z.id)})})]}),l.jsxs("section",{className:"settlement-section",children:[l.jsx("h3",{children:"  "}),o.length===0?l.jsxs("div",{className:"empty-settlement",children:[l.jsx("div",{className:"check-icon",children:""}),l.jsx("p",{children:"  "}),l.jsx("p",{className:"hint",children:"   ,   ."})]}):l.jsx("ul",{className:"settlement-list",children:o.map((Z,H)=>{const z=I(Z.from),$=I(Z.to);return!z||!$?null:l.jsxs("li",{className:`settlement-item ${Z.completed?"completed":""}`,role:"listitem","aria-label":`${z.name} ${$.name} ${Z.amount.toLocaleString()} ${Z.completed?" - ":""}`,children:[l.jsxs("div",{className:"settlement-transfer",children:[l.jsxs("div",{className:"settlement-from",children:[l.jsx("div",{className:"settlement-avatar",style:{backgroundColor:z.color},"aria-hidden":"true",children:z.name.charAt(0)}),l.jsx("span",{children:z.name})]}),l.jsxs("div",{className:"settlement-arrow","aria-hidden":"true",children:[l.jsx("span",{className:"arrow-icon",children:""}),l.jsxs("div",{className:"arrow-amount",children:["",Z.amount.toLocaleString()]}),l.jsx("span",{className:"arrow-icon",children:""})]}),l.jsxs("div",{className:"settlement-to",children:[l.jsx("div",{className:"settlement-avatar",style:{backgroundColor:$.color},"aria-hidden":"true",children:$.name.charAt(0)}),l.jsx("span",{children:$.name})]})]}),l.jsxs("div",{className:"settlement-actions",children:[l.jsx("button",{className:`btn-sm settlement-complete-btn ${Z.completed?"completed":""}`,onClick:()=>ie(Z),"aria-label":Z.completed?"  ":"  ","aria-pressed":Z.completed,children:Z.completed?" ":" "}),C&&!Z.completed&&l.jsx("button",{className:"btn-sm settlement-partial-btn",onClick:()=>G(Z),"aria-label":" ",children:" "}),l.jsx("button",{className:"btn-sm settlement-send-btn",onClick:()=>E({from:z,to:$,amount:Z.amount}),"aria-label":`${$.name} `,children:" "}),l.jsx("button",{className:"btn-sm settlement-qr-btn",onClick:()=>ne(Z.from,Z.to,Z.amount),"aria-label":`${$.name}  QR `,children:"QR"})]})]},H)})})]})]}),o.length>0&&l.jsxs("section",{className:"export-section",children:[l.jsx("h4",{children:" "}),l.jsxs("div",{className:"export-buttons",children:[l.jsx("button",{className:"export-btn",onClick:je,disabled:b,children:"  "}),l.jsx("button",{className:"export-btn",onClick:Ne,disabled:b,children:" PDF "}),l.jsx("button",{className:"export-btn reminder-btn",onClick:()=>g(!0),children:"  "}),p.length>0&&l.jsx("button",{className:"export-btn history-btn",onClick:()=>P(!0),children:"  "})]})]}),w&&l.jsx(Wx,{fromName:w.from,toName:w.to,amount:w.amount,bankInfo:w.bankInfo,onClose:()=>j(null)}),T&&l.jsx(Ix,{persons:i,pendingSettlements:o,onClose:()=>g(!1)}),y&&(()=>{const Z=I(y);if(!Z)return null;const{paid:H,shouldPay:z}=x(y),$=H-z,te=d.filter(de=>de.paidBy===y),ge=d.filter(de=>de.sharedBy.includes(y)),Me=de=>u.find(M=>M.code===de)?.symbol||"";return l.jsx("div",{className:"modal-overlay",onClick:()=>A(null),children:l.jsxs("div",{className:"modal-content detail-modal",onClick:de=>de.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("div",{className:"detail-header-info",children:[l.jsx("div",{className:"detail-avatar",style:{backgroundColor:Z.color},children:Z.name.charAt(0)}),l.jsxs("div",{children:[l.jsxs("h2",{children:[Z.name,"  "]}),l.jsxs("div",{className:`detail-balance ${$>=0?"positive":"negative"}`,children:[": ",$>=0?"+":"-","",Math.abs($).toLocaleString()]})]})]}),l.jsx("button",{className:"btn-close",onClick:()=>A(null),children:""})]}),l.jsxs("div",{className:"modal-body detail-body",children:[l.jsxs("section",{className:"detail-section",children:[l.jsxs("h3",{children:["   ",l.jsxs("span",{className:"detail-total positive",children:["",H.toLocaleString()]})]}),te.length===0?l.jsx("p",{className:"detail-empty",children:"  "}):l.jsx("ul",{className:"detail-list",children:te.map(de=>l.jsxs("li",{className:"detail-item",children:[l.jsx("div",{className:"detail-item-icon",children:rt[de.category]?.icon||""}),l.jsxs("div",{className:"detail-item-info",children:[l.jsx("span",{className:"detail-item-desc",children:de.description}),l.jsxs("span",{className:"detail-item-meta",children:[de.sharedBy.length," "]})]}),l.jsxs("div",{className:"detail-item-amount",children:[l.jsxs("span",{children:[Me(de.currency),de.amount.toLocaleString()]}),de.currency!=="KRW"&&l.jsxs("span",{className:"detail-item-krw",children:[" ",S(de.amount,de.currency).toLocaleString()]})]})]},de.id))})]}),l.jsxs("section",{className:"detail-section",children:[l.jsxs("h3",{children:["   ",l.jsxs("span",{className:"detail-total warning",children:["",z.toLocaleString()]})]}),ge.length===0?l.jsx("p",{className:"detail-empty",children:"  "}):l.jsx("ul",{className:"detail-list",children:ge.map(de=>{const K=pu(S(de.amount,de.currency),de.sharedBy.length),M=I(de.paidBy);return l.jsxs("li",{className:"detail-item",children:[l.jsx("div",{className:"detail-item-icon",children:rt[de.category]?.icon||""}),l.jsxs("div",{className:"detail-item-info",children:[l.jsx("span",{className:"detail-item-desc",children:de.description}),l.jsxs("span",{className:"detail-item-meta",children:[M?.name||"  ","   1/",de.sharedBy.length," "]})]}),l.jsx("div",{className:"detail-item-amount share",children:l.jsxs("span",{children:["",Math.round(K).toLocaleString()]})})]},de.id)})})]}),l.jsxs("section",{className:"detail-summary",children:[l.jsxs("div",{className:"detail-summary-row",children:[l.jsx("span",{children:" "}),l.jsxs("span",{className:"positive",children:["",H.toLocaleString()]})]}),l.jsxs("div",{className:"detail-summary-row",children:[l.jsx("span",{children:" "}),l.jsxs("span",{className:"warning",children:["",z.toLocaleString()]})]}),l.jsx("div",{className:"detail-summary-divider"}),l.jsxs("div",{className:`detail-summary-row final ${$>=0?"positive":"negative"}`,children:[l.jsx("span",{children:$>=0?" ":" "}),l.jsxs("span",{children:["",Math.abs($).toLocaleString()]})]})]})]})]})})})(),R&&l.jsx(Px,{fromPerson:R.from,toPerson:R.to,amount:R.amount,onClose:()=>E(null)}),_&&C&&l.jsx(ey,{settlement:_,fromPerson:I(_.from),toPerson:I(_.to),onPartialPay:C,onClose:()=>G(null)}),ee&&l.jsx(ty,{history:p,persons:i,onClose:()=>P(!1)})]})}function ay({totalBudget:i,totalSpent:o,totalRemaining:d,totalPercentage:u,dailyBudget:p,todaySpent:x,todayRemaining:S,todayPercentage:h,isOverBudget:N,isNearBudget:C,isTodayOverBudget:w,recommendedDailyBudget:j,daysRemaining:b,avgDailySpending:v,projectedTotal:T,onClose:g}){if(i<=0)return l.jsx("div",{className:"budget-alert-container",children:l.jsxs("div",{className:"budget-empty",children:[l.jsx("span",{className:"budget-empty-icon",children:""}),l.jsx("p",{children:"  "}),l.jsx("p",{className:"budget-empty-hint",children:"   "})]})});const y=()=>N?"status-critical":C?"status-warning":"status-good",A=()=>N?"":C?"":"",R=()=>N?" ":C?" ":"";return l.jsxs("div",{className:"budget-alert-container",children:[l.jsxs("div",{className:`budget-status-banner ${y()}`,children:[l.jsx("span",{className:"status-icon",children:A()}),l.jsx("span",{className:"status-text",children:R()}),N&&l.jsxs("span",{className:"status-detail",children:["",Math.abs(d).toLocaleString()," "]})]}),l.jsxs("div",{className:"budget-card",children:[l.jsxs("div",{className:"budget-card-header",children:[l.jsx("h4",{children:"  "}),l.jsxs("span",{className:"budget-amount",children:["",i.toLocaleString()]})]}),l.jsxs("div",{className:"budget-progress-container",children:[l.jsxs("div",{className:"budget-progress-bar",children:[l.jsx("div",{className:`budget-progress-fill ${y()}`,style:{width:`${Math.min(100,u)}%`}}),u>100&&l.jsx("div",{className:"budget-progress-overflow",style:{width:`${Math.min(50,u-100)}%`}})]}),l.jsxs("span",{className:"budget-percentage",children:[u,"%"]})]}),l.jsxs("div",{className:"budget-stats",children:[l.jsxs("div",{className:"budget-stat",children:[l.jsx("span",{className:"stat-label",children:""}),l.jsxs("span",{className:"stat-value spent",children:["",o.toLocaleString()]})]}),l.jsxs("div",{className:"budget-stat",children:[l.jsx("span",{className:"stat-label",children:""}),l.jsxs("span",{className:`stat-value ${d>=0?"remaining":"over"}`,children:[d>=0?"":"-","",Math.abs(d).toLocaleString()]})]})]})]}),l.jsxs("div",{className:"budget-card today",children:[l.jsxs("div",{className:"budget-card-header",children:[l.jsx("h4",{children:"  "}),l.jsxs("span",{className:"budget-amount",children:["",p.toLocaleString()]})]}),l.jsxs("div",{className:"budget-progress-container",children:[l.jsx("div",{className:"budget-progress-bar",children:l.jsx("div",{className:`budget-progress-fill ${w?"status-critical":"status-good"}`,style:{width:`${Math.min(100,h)}%`}})}),l.jsxs("span",{className:"budget-percentage",children:[h,"%"]})]}),l.jsxs("div",{className:"budget-stats",children:[l.jsxs("div",{className:"budget-stat",children:[l.jsx("span",{className:"stat-label",children:" "}),l.jsxs("span",{className:"stat-value spent",children:["",x.toLocaleString()]})]}),l.jsxs("div",{className:"budget-stat",children:[l.jsx("span",{className:"stat-label",children:" "}),l.jsxs("span",{className:`stat-value ${S>=0?"remaining":"over"}`,children:[S>=0?"":"-","",Math.abs(S).toLocaleString()]})]})]})]}),l.jsxs("div",{className:"budget-card forecast",children:[l.jsx("h4",{children:"  "}),l.jsxs("div",{className:"forecast-grid",children:[l.jsxs("div",{className:"forecast-item",children:[l.jsx("span",{className:"forecast-label",children:"  "}),l.jsxs("span",{className:"forecast-value",children:["",v.toLocaleString()]})]}),l.jsxs("div",{className:"forecast-item",children:[l.jsx("span",{className:"forecast-label",children:" "}),l.jsxs("span",{className:"forecast-value",children:[b,""]})]}),l.jsxs("div",{className:"forecast-item highlight",children:[l.jsx("span",{className:"forecast-label",children:" "}),l.jsxs("span",{className:`forecast-value ${T>i?"over":""}`,children:["",T.toLocaleString()]})]}),l.jsxs("div",{className:"forecast-item recommendation",children:[l.jsx("span",{className:"forecast-label",children:"  "}),l.jsxs("span",{className:"forecast-value",children:["",j>0?j.toLocaleString():"-"]})]})]})]}),C&&!N&&l.jsxs("div",{className:"budget-tip warning",children:[l.jsx("span",{className:"tip-icon",children:""}),l.jsxs("p",{children:[" 80% .     ",j.toLocaleString(),"  ."]})]}),N&&l.jsxs("div",{className:"budget-tip critical",children:[l.jsx("span",{className:"tip-icon",children:""}),l.jsx("p",{children:" .    ."})]})]})}function ly({expenses:i,persons:o,currencies:d,convertToKRW:u,tripName:p="",startDate:x,endDate:S,onClose:h}){const N=m.useRef(null),C=m.useMemo(()=>i.reduce((g,y)=>g+u(y.amount,y.currency),0),[i,u]),w=m.useMemo(()=>{const g={};return i.forEach(y=>{const A=y.category,R=rt[A]||{label:"",icon:""};g[A]||(g[A]={amount:0,count:0,label:R.label,icon:R.icon}),g[A].amount+=u(y.amount,y.currency),g[A].count++}),Object.entries(g).map(([y,A])=>({key:y,...A})).sort((y,A)=>A.amount-y.amount)},[i,u]),j=m.useMemo(()=>{const g={};return o.forEach(y=>{g[y.id]={paid:0,shouldPay:0,count:0}}),i.forEach(y=>{const A=u(y.amount,y.currency),R=A/y.sharedBy.length;g[y.paidBy]&&(g[y.paidBy].paid+=A,g[y.paidBy].count++),y.sharedBy.forEach(E=>{g[E]&&(g[E].shouldPay+=R)})}),o.map(y=>({person:y,...g[y.id],balance:g[y.id].paid-g[y.id].shouldPay})).sort((y,A)=>A.paid-y.paid)},[i,o,u]),b=m.useMemo(()=>{const g={};return i.forEach(y=>{const A=y.date;g[A]||(g[A]=0),g[A]+=u(y.amount,y.currency)}),Object.entries(g).map(([y,A])=>({date:y,amount:A})).sort((y,A)=>y.date.localeCompare(A.date))},[i,u]),v=b.length>0?Math.round(C/b.length):0,T=async()=>{if(N.current)try{const g=await iu(N.current,{backgroundColor:"#ffffff",scale:2}),y=g.toDataURL("image/png"),A=new Bc("p","mm","a4"),R=A.internal.pageSize.getWidth(),E=g.height*R/g.width;let _=E,G=0;const ee=A.internal.pageSize.getHeight();for(;_>0;)A.addImage(y,"PNG",0,G,R,E),_-=ee,_>0&&(G-=ee,A.addPage());A.save(`${p}__${new Date().toLocaleDateString()}.pdf`)}catch(g){oe.error("PDF  :",g),alert("PDF  .")}};return l.jsx("div",{className:"expense-report-modal",children:l.jsxs("div",{className:"expense-report-container",children:[l.jsxs("div",{className:"report-header-actions",children:[l.jsx("h2",{children:"   "}),l.jsxs("div",{className:"report-actions",children:[l.jsx("button",{className:"btn-export",onClick:T,children:" PDF "}),h&&l.jsx("button",{className:"btn-close",onClick:h,children:""})]})]}),l.jsxs("div",{className:"report-content",ref:N,children:[l.jsxs("section",{className:"report-section trip-info",children:[l.jsx("h3",{children:p}),(x||S)&&l.jsx("p",{className:"trip-dates",children:x&&S?`${x} ~ ${S}`:x||S}),l.jsxs("p",{className:"report-generated",children:[" : ",new Date().toLocaleDateString()]})]}),l.jsxs("section",{className:"report-section summary",children:[l.jsxs("div",{className:"summary-card main",children:[l.jsx("span",{className:"summary-label",children:" "}),l.jsxs("span",{className:"summary-value",children:["",C.toLocaleString()]})]}),l.jsxs("div",{className:"summary-grid",children:[l.jsxs("div",{className:"summary-card",children:[l.jsx("span",{className:"summary-label",children:" "}),l.jsxs("span",{className:"summary-value",children:[i.length,""]})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("span",{className:"summary-label",children:""}),l.jsxs("span",{className:"summary-value",children:[o.length,""]})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("span",{className:"summary-label",children:" "}),l.jsxs("span",{className:"summary-value",children:["",v.toLocaleString()]})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("span",{className:"summary-label",children:"1 "}),l.jsxs("span",{className:"summary-value",children:["",o.length>0?Math.round(C/o.length).toLocaleString():0]})]})]})]}),l.jsxs("section",{className:"report-section",children:[l.jsx("h4",{children:"  "}),l.jsx("div",{className:"category-breakdown",children:w.map(({key:g,icon:y,label:A,amount:R,count:E})=>{const _=C>0?R/C*100:0;return l.jsxs("div",{className:"breakdown-item",children:[l.jsx("div",{className:"breakdown-icon",children:y}),l.jsxs("div",{className:"breakdown-info",children:[l.jsx("span",{className:"breakdown-label",children:A}),l.jsxs("span",{className:"breakdown-count",children:[E,""]})]}),l.jsx("div",{className:"breakdown-bar-container",children:l.jsx("div",{className:"breakdown-bar",style:{width:`${_}%`}})}),l.jsxs("div",{className:"breakdown-amount",children:[l.jsxs("span",{children:["",R.toLocaleString()]}),l.jsxs("span",{className:"breakdown-percentage",children:[_.toFixed(1),"%"]})]})]},g)})})]}),l.jsxs("section",{className:"report-section",children:[l.jsx("h4",{children:"  "}),l.jsx("div",{className:"person-breakdown",children:j.map(({person:g,paid:y,shouldPay:A,count:R,balance:E})=>l.jsxs("div",{className:"person-item",children:[l.jsx("div",{className:"person-avatar",style:{backgroundColor:g.color},children:g.name.charAt(0)}),l.jsxs("div",{className:"person-info",children:[l.jsx("span",{className:"person-name",children:g.name}),l.jsxs("span",{className:"person-count",children:[R," "]})]}),l.jsxs("div",{className:"person-stats",children:[l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"stat-label",children:""}),l.jsxs("span",{className:"stat-value paid",children:["",y.toLocaleString()]})]}),l.jsxs("div",{className:"stat-row",children:[l.jsx("span",{className:"stat-label",children:""}),l.jsxs("span",{className:"stat-value should",children:["",Math.round(A).toLocaleString()]})]}),l.jsxs("div",{className:`stat-row balance ${E>=0?"positive":"negative"}`,children:[l.jsx("span",{className:"stat-label",children:""}),l.jsxs("span",{className:"stat-value",children:[E>=0?"+":"","",Math.round(E).toLocaleString()]})]})]})]},g.id))})]}),b.length>0&&l.jsxs("section",{className:"report-section",children:[l.jsx("h4",{children:"  "}),l.jsx("div",{className:"daily-breakdown",children:b.map(({date:g,amount:y})=>{const A=Math.max(...b.map(E=>E.amount)),R=A>0?y/A*100:0;return l.jsxs("div",{className:"daily-item",children:[l.jsx("span",{className:"daily-date",children:g}),l.jsx("div",{className:"daily-bar-container",children:l.jsx("div",{className:"daily-bar",style:{width:`${R}%`}})}),l.jsxs("span",{className:"daily-amount",children:["",y.toLocaleString()]})]},g)})})]})]})]})})}const ny={warningThreshold:80,criticalThreshold:100};function sy(i,o,d,u=0,p,x,S=ny){const h=m.useMemo(()=>{const w=new Date;w.setHours(0,0,0,0);const j=w.toISOString().split("T")[0],b=i.reduce((ne,je)=>ne+d(je.amount,je.currency),0),v=i.filter(ne=>ne.date===j).reduce((ne,je)=>ne+d(je.amount,je.currency),0);let T=1,g=0,y=1;if(p){const ne=new Date(p);if(ne.setHours(0,0,0,0),x){const je=new Date(x);je.setHours(0,0,0,0),y=Math.max(1,Math.ceil((je.getTime()-ne.getTime())/864e5)+1),T=Math.max(1,Math.min(y,Math.ceil((w.getTime()-ne.getTime())/864e5)+1)),g=Math.max(0,y-T)}else T=Math.max(1,Math.ceil((w.getTime()-ne.getTime())/864e5)+1)}const A=u>0?Math.round(u/y):0,R=A-v,E=u-b,_=u>0?Math.round(b/u*100):0,G=A>0?Math.round(v/A*100):0,ee=T>0?Math.round(b/T):0,P=ee*y,X=_>=S.criticalThreshold,ae=_>=S.warningThreshold&&!X,I=G>=S.criticalThreshold,ie=G>=S.warningThreshold&&!I;return{totalBudget:u,totalSpent:Math.round(b),totalRemaining:Math.round(E),totalPercentage:_,dailyBudget:A,todaySpent:Math.round(v),todayRemaining:Math.round(R),todayPercentage:G,isOverBudget:X,isNearBudget:ae,isTodayOverBudget:I,isTodayNearBudget:ie,projectedTotal:Math.round(P),daysElapsed:T,daysRemaining:g,avgDailySpending:ee}},[i,d,u,p,x,S]),N=m.useMemo(()=>h.isOverBudget?{type:"critical",title:"  !",message:`  ${h.totalBudget.toLocaleString()} ${Math.abs(h.totalRemaining).toLocaleString()} .`}:h.isNearBudget?{type:"warning",title:"  ",message:` ${h.totalPercentage}% .  : ${h.totalRemaining.toLocaleString()}`}:h.isTodayOverBudget?{type:"warning",title:"   ",message:`   ${h.dailyBudget.toLocaleString()} .`}:h.isTodayNearBudget?{type:"info",title:"   ",message:`   ${h.todayPercentage}% .`}:null,[h]),C=m.useMemo(()=>h.daysRemaining<=0?0:Math.round(h.totalRemaining/h.daysRemaining),[h]);return{...h,alertMessage:N,recommendedDailyBudget:C,config:S}}Uf.register(Lf,qf,Lg,qg,Yf,Hf,Gf,Qf,Xf,Yg);function th({expenses:i,persons:o,currencies:d,convertToKRW:u,totalBudget:p,tripName:x,startDate:S,endDate:h}){const[N,C]=m.useState(!1),[w,j]=m.useState(!1),b=sy(i,d,u,p||0,S,h),v=m.useMemo(()=>i.reduce((X,ae)=>X+u(ae.amount,ae.currency),0),[i,u]),T=m.useMemo(()=>{const X=new Map;i.forEach(I=>{const ie=X.get(I.date)||0;X.set(I.date,ie+u(I.amount,I.currency))});const ae=Array.from(X.entries()).sort((I,ie)=>I[0].localeCompare(ie[0]));return{labels:ae.map(([I])=>I.slice(5)),values:ae.map(([I,ie])=>ie)}},[i,u]),g=m.useMemo(()=>{const X=new Map;i.forEach(I=>{const ie=I.category||"other",ne=X.get(ie)||0;X.set(ie,ne+u(I.amount,I.currency))});const ae=Array.from(X.entries());return{labels:ae.map(([I])=>rt[I]?.label||I),values:ae.map(([I,ie])=>ie),colors:["#667eea","#f093fb","#4facfe","#43e97b","#fa709a","#fee140"]}},[i,u]),y=m.useMemo(()=>{const X=new Map;return i.forEach(ae=>{const I=X.get(ae.paidBy)||0;X.set(ae.paidBy,I+u(ae.amount,ae.currency))}),o.map(ae=>({name:ae.name,color:ae.color,amount:X.get(ae.id)||0}))},[i,o,u]),A=m.useMemo(()=>{const X=new Map;return i.forEach(ae=>{(ae.tags||[]).forEach(I=>{X.set(I,(X.get(I)||0)+1)})}),Array.from(X.entries()).sort((ae,I)=>I[1]-ae[1]).slice(0,5)},[i]),R=i.length>0?Math.round(v/i.length):0,E=i.length>0?Math.max(...i.map(X=>u(X.amount,X.currency))):0,_=p?Math.min(v/p*100,100):0,G={labels:T.labels,datasets:[{label:" ",data:T.values,fill:!0,borderColor:"#667eea",backgroundColor:"rgba(102, 126, 234, 0.1)",tension:.4,pointRadius:4,pointBackgroundColor:"#667eea"}]},ee={labels:g.labels,datasets:[{data:g.values,backgroundColor:g.colors,borderWidth:0,hoverOffset:10}]},P={labels:y.map(X=>X.name),datasets:[{label:" ",data:y.map(X=>X.amount),backgroundColor:y.map(X=>X.color),borderRadius:8}]};return i.length===0?l.jsx("div",{className:"dashboard-tab",children:l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("p",{children:"   "})]})}):l.jsxs("div",{className:"dashboard-tab",children:[l.jsxs("section",{className:"summary-cards",children:[l.jsxs("div",{className:"stat-card total",children:[l.jsx("div",{className:"stat-icon",children:""}),l.jsxs("div",{className:"stat-content",children:[l.jsx("span",{className:"stat-label",children:" "}),l.jsxs("span",{className:"stat-value",children:["",v.toLocaleString()]})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:""}),l.jsxs("div",{className:"stat-content",children:[l.jsx("span",{className:"stat-label",children:" "}),l.jsxs("span",{className:"stat-value",children:[i.length,""]})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:""}),l.jsxs("div",{className:"stat-content",children:[l.jsx("span",{className:"stat-label",children:" "}),l.jsxs("span",{className:"stat-value",children:["",R.toLocaleString()]})]})]}),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",children:""}),l.jsxs("div",{className:"stat-content",children:[l.jsx("span",{className:"stat-label",children:" "}),l.jsxs("span",{className:"stat-value",children:["",Math.round(E).toLocaleString()]})]})]})]}),p&&p>0&&l.jsxs("section",{className:"budget-progress-section",children:[l.jsx("h3",{children:"  "}),l.jsxs("div",{className:"budget-progress-card",children:[l.jsxs("div",{className:"budget-info",children:[l.jsxs("span",{children:[": ",v.toLocaleString()]}),l.jsxs("span",{children:[": ",p.toLocaleString()]})]}),l.jsx("div",{className:"budget-bar",children:l.jsx("div",{className:`budget-fill ${_>=90?"danger":_>=70?"warning":""}`,style:{width:`${_}%`}})}),l.jsx("div",{className:"budget-remaining",children:p-v>=0?` : ${(p-v).toLocaleString()}`:` : ${(v-p).toLocaleString()}`})]})]}),l.jsxs("section",{className:"chart-section",children:[l.jsx("h3",{children:"   "}),l.jsx("div",{className:"chart-container",children:l.jsx(Gg,{data:G,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:X=>`${Number(X).toLocaleString()}`}}}}})})]}),l.jsxs("div",{className:"chart-grid",children:[l.jsxs("section",{className:"chart-section",children:[l.jsx("h3",{children:"  "}),l.jsx("div",{className:"chart-container doughnut",children:l.jsx(Qg,{data:ee,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:15,usePointStyle:!0}}}}})})]}),l.jsxs("section",{className:"chart-section",children:[l.jsx("h3",{children:"  "}),l.jsx("div",{className:"chart-container",children:l.jsx(Kf,{data:P,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:X=>`${(Number(X)/1e3).toFixed(0)}K`}}}}})})]})]}),A.length>0&&l.jsxs("section",{className:"tag-stats-section",children:[l.jsx("h3",{children:"  "}),l.jsx("div",{className:"tag-list",children:A.map(([X,ae])=>l.jsxs("div",{className:"tag-stat",children:[l.jsxs("span",{className:"tag-name",children:["#",X]}),l.jsxs("span",{className:"tag-count",children:[ae,""]})]},X))})]}),l.jsxs("section",{className:"dashboard-actions",children:[l.jsx("button",{className:"btn-dashboard-action report",onClick:()=>C(!0),children:"  "}),p&&p>0&&l.jsx("button",{className:"btn-dashboard-action budget",onClick:()=>j(!w),children:"  "})]}),w&&p&&p>0&&l.jsx("section",{className:"budget-alert-section",children:l.jsx(ay,{...b,onClose:()=>j(!1)})}),b.alertMessage&&l.jsxs("div",{className:`budget-warning-banner ${b.alertMessage.type}`,children:[l.jsx("span",{children:b.alertMessage.title}),l.jsx("span",{children:b.alertMessage.message})]}),N&&l.jsx(ly,{expenses:i,persons:o,currencies:d,convertToKRW:u,tripName:x,startDate:S,endDate:h,onClose:()=>C(!1)})]})}function ah({currencies:i,onUpdateRate:o,onClose:d}){const[u,p]=m.useState(null),[x,S]=m.useState(""),h=C=>{p(C.code),S(C.rate.toString())},N=()=>{if(u&&x){const C=parseFloat(x);C>0&&o(u,C)}p(null),S("")};return l.jsx("div",{className:"modal-overlay",onClick:d,children:l.jsxs("div",{className:"modal-content",onClick:C=>C.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:d,children:""})]}),l.jsx("p",{className:"modal-description",children:"  KRW  . (1  = ? KRW)"}),l.jsx("ul",{className:"currency-list",children:i.map(C=>l.jsxs("li",{className:"currency-item",children:[l.jsxs("div",{className:"currency-info",children:[l.jsx("span",{className:"currency-symbol",children:C.symbol}),l.jsxs("div",{className:"currency-details",children:[l.jsx("span",{className:"currency-code",children:C.code}),l.jsx("span",{className:"currency-name",children:C.name})]})]}),l.jsx("div",{className:"currency-rate",children:u===C.code?l.jsxs("div",{className:"rate-edit",children:[l.jsx("input",{type:"number",className:"input-field rate-input",value:x,onChange:w=>S(w.target.value),onBlur:N,onKeyDown:w=>w.key==="Enter"&&N(),autoFocus:!0,min:"0",step:"0.01"}),l.jsx("span",{className:"rate-unit",children:"KRW"})]}):l.jsxs("button",{className:"rate-display",onClick:()=>h(C),disabled:C.code==="KRW",children:[C.rate.toLocaleString()," KRW"]})})]},C.code))}),l.jsx("div",{className:"modal-footer",children:l.jsx("button",{className:"btn btn-primary",onClick:d,children:""})})]})})}function cy({onEnableDemoMode:i}){return l.jsx("div",{className:"config-error",children:l.jsxs("div",{className:"config-error-content",children:[l.jsx("div",{className:"config-error-icon",children:""}),l.jsx("h1",{children:"Firebase  "}),l.jsx("p",{children:"  Firebase   ."}),i&&l.jsxs("div",{className:"demo-mode-section",children:[l.jsx("button",{className:"btn btn-demo",onClick:i,children:"   "}),l.jsx("p",{className:"demo-hint",children:"Firebase    "})]}),l.jsx("div",{className:"config-divider",children:l.jsx("span",{children:""})}),l.jsxs("div",{className:"config-steps",children:[l.jsx("h3",{children:"Firebase  :"}),l.jsxs("ol",{children:[l.jsxs("li",{children:[l.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",children:"Firebase Console"}),"  "]}),l.jsx("li",{children:"        "}),l.jsxs("li",{children:["  ",l.jsx("code",{children:".env"}),"  "]}),l.jsx("li",{children:"  :"})]}),l.jsx("pre",{className:"config-example",children:`VITE_FIREBASE_API_KEY=your-api-key
VITE_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=your-project-id
VITE_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=123456789
VITE_FIREBASE_APP_ID=1:123456789:web:abcdef`}),l.jsxs("p",{className:"config-note",children:[" ",l.jsx("code",{children:".env.example"}),"   ."]})]}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>window.location.reload(),children:"   "})]})})}class iy extends m.Component{constructor(d){super(d);pf(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(d){return{hasError:!0,error:d}}componentDidCatch(d,u){this.setState({errorInfo:u}),oe.error("ErrorBoundary caught an error:",d,u),fu(d,{componentStack:u.componentStack,timestamp:new Date().toISOString()}),this.props.onError?.(d,u)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:l.jsx("div",{className:"error-boundary",children:l.jsxs("div",{className:"error-boundary-content",children:[l.jsx("div",{className:"error-icon",children:""}),l.jsx("h2",{children:" "}),l.jsx("p",{children:"   ."}),!1,l.jsxs("div",{className:"error-actions",children:[l.jsx("button",{className:"btn btn-primary",onClick:this.handleRetry,children:" "}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>window.location.reload(),children:" "})]})]})}):this.props.children}}const zf="app_error_logs",_f=50;function fu(i,o){const d={name:i.name,message:i.message,stack:i.stack,context:o,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href};oe.error("[ErrorLogger]",d);try{const u=JSON.parse(localStorage.getItem(zf)||"[]");u.unshift(d),u.length>_f&&u.splice(_f),localStorage.setItem(zf,JSON.stringify(u))}catch(u){oe.warn("Failed to save error log to localStorage:",u)}}function ry(){window.onerror=(i,o,d,u,p)=>(fu(p||new Error(String(i)),{source:o,lineno:d,colno:u}),!1),window.onunhandledrejection=i=>{const o=i.reason instanceof Error?i.reason:new Error(String(i.reason));fu(o,{type:"unhandledrejection"})}}const lh=m.createContext(null);function uy(){const i=m.useContext(lh);if(!i)throw new Error("useToast must be used within ToastProvider");return i}function oy({children:i}){const[o,d]=m.useState([]),u=m.useCallback(x=>{const S=Math.random().toString(36).substring(2,9),h={...x,id:S,duration:x.duration??4e3};d(N=>[...N,h])},[]),p=m.useCallback(x=>{d(S=>S.filter(h=>h.id!==x))},[]);return l.jsxs(lh.Provider,{value:{toasts:o,showToast:u,hideToast:p},children:[i,l.jsx(dy,{toasts:o,onDismiss:p})]})}function dy({toasts:i,onDismiss:o}){return l.jsx("div",{className:"toast-container",children:i.map(d=>l.jsx(my,{toast:d,onDismiss:()=>o(d.id)},d.id))})}function my({toast:i,onDismiss:o}){const[d,u]=m.useState(!1);m.useEffect(()=>{if(i.duration&&i.duration>0){const S=setTimeout(()=>{u(!0),setTimeout(o,300)},i.duration);return()=>clearTimeout(S)}},[i.duration,o]);const p=()=>{u(!0),setTimeout(o,300)},x={success:"",error:"",warning:"",info:""};return l.jsxs("div",{className:`toast toast-${i.type} ${d?"toast-exit":""}`,children:[l.jsx("div",{className:"toast-icon",children:x[i.type]}),l.jsxs("div",{className:"toast-content",children:[l.jsx("div",{className:"toast-title",children:i.title}),i.message&&l.jsx("div",{className:"toast-message",children:i.message})]}),l.jsx("button",{className:"toast-close",onClick:p,children:""}),i.duration&&i.duration>0&&l.jsx("div",{className:"toast-progress",style:{animationDuration:`${i.duration}ms`}})]})}const Rf="exchange_rates_cache",Bf="exchange_rates_history",Ac="exchange_rate_alerts",fy=1440*60*1e3,kf=3,hy=2e3,py="https://api.frankfurter.app";function gy(){const[i,o]=m.useState({rates:{KRW:1,USD:1350,EUR:1450,JPY:9,CNY:185,THB:38,VND:.054,PHP:24},lastUpdated:null,loading:!1,error:null,isCacheStale:!1}),[d,u]=m.useState([]),[p,x]=m.useState([]);m.useEffect(()=>{const g=localStorage.getItem(Rf);if(g)try{const{rates:R,lastUpdated:E}=JSON.parse(g),_=new Date(E).getTime(),G=Date.now()-_>=fy;o(ee=>({...ee,rates:R,lastUpdated:E,isCacheStale:G}))}catch(R){oe.error("Failed to parse cached rates:",R)}const y=localStorage.getItem(Bf);if(y)try{u(JSON.parse(y))}catch(R){oe.error("Failed to parse history:",R)}const A=localStorage.getItem(Ac);if(A)try{x(JSON.parse(A))}catch(R){oe.error("Failed to parse alerts:",R)}},[]),m.useEffect(()=>{const g=()=>{i.isCacheStale&&!i.loading&&S()};return window.addEventListener("online",g),()=>window.removeEventListener("online",g)},[i.isCacheStale,i.loading]);const S=m.useCallback(async(g="KRW")=>{o(A=>({...A,loading:!0,error:null}));let y=0;for(;y<kf;)try{const A=await fetch(`${py}/latest?from=EUR`);if(!A.ok)throw new Error("Failed to fetch exchange rates");const E=(await A.json()).rates,_=E.KRW||1450,G={KRW:1,USD:_/(E.USD||1.08),EUR:_,JPY:_/(E.JPY||160),CNY:_/(E.CNY||7.8),THB:_/(E.THB||38),VND:_/(E.VND||26e3),PHP:_/(E.PHP||61)},ee=new Date().toISOString();o({rates:G,lastUpdated:ee,loading:!1,error:null,isCacheStale:!1}),localStorage.setItem(Rf,JSON.stringify({rates:G,lastUpdated:ee}));const P=Object.entries(G).map(([X,ae])=>({code:X,rate:ae,timestamp:ee}));return u(X=>{const ae=[...X,...P].slice(-500);return localStorage.setItem(Bf,JSON.stringify(ae)),ae}),h(G),!0}catch(A){if(y++,y<kf){await new Promise(E=>setTimeout(E,hy*y));continue}const R=A instanceof Error?A.message:"Unknown error";return o(E=>({...E,loading:!1,error:`   (${y} ).   . (${R})`,isCacheStale:!0})),!1}return!1},[]),h=m.useCallback(g=>{p.forEach(y=>{if(!y.enabled)return;const A=g[y.fromCurrency]||1,R=g[y.toCurrency]||1,E=A/R;(y.condition==="above"?E>=y.targetRate:E<=y.targetRate)&&"Notification"in window&&Notification.permission==="granted"&&new Notification(" ",{body:`${y.fromCurrency}/${y.toCurrency}  ${y.targetRate}${y.condition==="above"?" ":" "}.`,icon:"/icon-192.png"})})},[p]),N=m.useCallback(async()=>"Notification"in window?Notification.permission==="granted"?!0:Notification.permission==="denied"?!1:await Notification.requestPermission()==="granted":!1,[]),C=m.useCallback(g=>{N();const y=Math.random().toString(36).substring(2,11),A={...g,id:y};return x(R=>{const E=[...R,A];return localStorage.setItem(Ac,JSON.stringify(E)),E}),y},[N]),w=m.useCallback(g=>{x(y=>{const A=y.filter(R=>R.id!==g);return localStorage.setItem(Ac,JSON.stringify(A)),A})},[]),j=m.useCallback(g=>{x(y=>{const A=y.map(R=>R.id===g?{...R,enabled:!R.enabled}:R);return localStorage.setItem(Ac,JSON.stringify(A)),A})},[]),b=m.useCallback((g,y,A)=>{const R=i.rates[y]||1,E=i.rates[A]||1;if(E===0||!Number.isFinite(E))return 0;const _=g*R/E;return Number.isFinite(_)?_:0},[i.rates]),v=m.useCallback((g,y)=>{const A=Date.now()-y*24*60*60*1e3;return d.filter(R=>R.code===g&&new Date(R.timestamp).getTime()>=A)},[d]),T=m.useCallback((g,y=7)=>{const A=v(g,y);if(A.length<2)return null;const R=A[0].rate,E=A[A.length-1].rate;if(R===0||!Number.isFinite(R))return null;const _=(E-R)/R*100;return Number.isFinite(_)?_:null},[v]);return{...i,history:d,alerts:p,fetchRates:S,convert:b,addAlert:C,removeAlert:w,toggleAlert:j,getHistoryByPeriod:v,getChangeRate:T}}function nh({onClose:i}){const{lastUpdated:o,loading:d,error:u,fetchRates:p,convert:x,getChangeRate:S}=gy(),[h,N]=m.useState("10000"),[C,w]=m.useState("KRW"),[j,b]=m.useState("USD"),v=m.useMemo(()=>{const E=parseFloat(h)||0;return x(E,C,j)},[h,C,j,x]),T=m.useMemo(()=>x(1,C,j),[C,j,x]),g=S(j,7),y=()=>{w(j),b(C)},A=(E,_)=>{const G=Vt.find(P=>P.code===_),ee=["JPY","KRW","VND"].includes(_)?0:2;return`${G?.symbol||""}${E.toLocaleString("ko-KR",{minimumFractionDigits:ee,maximumFractionDigits:ee})}`},R=E=>E?new Date(E).toLocaleString("ko-KR"):"-";return l.jsx("div",{className:"calculator-overlay",onClick:i,children:l.jsxs("div",{className:"calculator-panel",onClick:E=>E.stopPropagation(),children:[l.jsxs("header",{className:"calculator-header",children:[l.jsx("h2",{children:"  "}),l.jsx("button",{className:"btn-close",onClick:i,children:""})]}),l.jsxs("div",{className:"calculator-content",children:[l.jsxs("div",{className:"rate-info",children:[l.jsxs("div",{className:"rate-display",children:[l.jsx("span",{className:"rate-label",children:" "}),l.jsxs("span",{className:"rate-value",children:["1 ",C," = ",T.toFixed(4)," ",j]})]}),g!==null&&l.jsxs("div",{className:`rate-change ${g>=0?"positive":"negative"}`,children:[g>=0?"":""," 7 ",g>=0?"+":"",g.toFixed(2),"%"]}),l.jsxs("div",{className:"last-updated",children:[" : ",R(o)]}),l.jsx("button",{className:"btn btn-refresh",onClick:()=>p(),disabled:d,children:d?"  ...":" "}),u&&l.jsxs("div",{className:"rate-error",children:[" ",u]})]}),l.jsxs("div",{className:"conversion-section",children:[l.jsxs("div",{className:"currency-input-group",children:[l.jsx("label",{children:" "}),l.jsxs("div",{className:"input-with-select",children:[l.jsx("input",{type:"number",value:h,onChange:E=>N(E.target.value),className:"input-field",min:"0"}),l.jsx("select",{value:C,onChange:E=>w(E.target.value),className:"currency-select",children:Vt.map(E=>l.jsxs("option",{value:E.code,children:[E.symbol," ",E.code]},E.code))})]})]}),l.jsx("button",{className:"btn-swap",onClick:y,title:" ",children:""}),l.jsxs("div",{className:"currency-input-group",children:[l.jsx("label",{children:" "}),l.jsxs("div",{className:"input-with-select",children:[l.jsx("div",{className:"result-display",children:A(v,j)}),l.jsx("select",{value:j,onChange:E=>b(E.target.value),className:"currency-select",children:Vt.map(E=>l.jsxs("option",{value:E.code,children:[E.symbol," ",E.code]},E.code))})]})]})]}),l.jsxs("div",{className:"quick-conversions",children:[l.jsx("h3",{children:" "}),l.jsx("div",{className:"quick-list",children:[1e3,5e3,1e4,5e4,1e5].map(E=>l.jsx("button",{className:"quick-btn",onClick:()=>N(E.toString()),children:A(E,C)},E))})]}),l.jsxs("div",{className:"all-rates",children:[l.jsxs("h3",{children:["  (",C," )"]}),l.jsxs("table",{className:"rates-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:""}),l.jsx("th",{children:""}),l.jsx("th",{children:"7 "})]})}),l.jsx("tbody",{children:Vt.filter(E=>E.code!==C).map(E=>{const _=x(1,C,E.code),G=S(E.code,7);return l.jsxs("tr",{children:[l.jsxs("td",{children:[l.jsxs("span",{className:"currency-name",children:[E.symbol," ",E.code]}),l.jsx("span",{className:"currency-full-name",children:E.name})]}),l.jsx("td",{className:"rate-cell",children:_.toFixed(4)}),l.jsx("td",{className:`change-cell ${G!==null&&G>=0?"positive":"negative"}`,children:G!==null?`${G>=0?"+":""}${G.toFixed(2)}%`:"-"})]},E.code)})})]})]})]})]})})}function xy(){const[i,o]=m.useState({isSupported:!1,permission:"default",isSubscribed:!1});m.useEffect(()=>{const S="Notification"in window&&"serviceWorker"in navigator;o(h=>({...h,isSupported:S,permission:S?Notification.permission:"denied"})),S&&"PushManager"in window&&navigator.serviceWorker.ready.then(h=>{h.pushManager.getSubscription().then(N=>{o(C=>({...C,isSubscribed:!!N}))})})},[]);const d=m.useCallback(async()=>{if(!i.isSupported)return!1;try{const S=await Notification.requestPermission();return o(h=>({...h,permission:S})),S==="granted"}catch(S){return oe.error("Failed to request notification permission:",S),!1}},[i.isSupported]),u=m.useCallback(async S=>{if(!i.isSupported||i.permission!=="granted")return!1;try{return await(await navigator.serviceWorker.ready).showNotification(S.title,{body:S.body,icon:S.icon||"/icon-192.png",badge:"/icon-192.png",tag:S.tag||"expense-notification",data:S.data}),!0}catch(h){return oe.error("Failed to show notification:",h),!1}},[i.isSupported,i.permission]),p=m.useCallback(async()=>{if(!i.isSupported||i.permission!=="granted")return null;try{const N=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:yy("YOUR_VAPID_PUBLIC_KEY")});return o(C=>({...C,isSubscribed:!0})),N}catch(S){return oe.error("Failed to subscribe to push:",S),null}},[i.isSupported,i.permission]),x=m.useCallback(async()=>{try{const h=await(await navigator.serviceWorker.ready).pushManager.getSubscription();return h?(await h.unsubscribe(),o(N=>({...N,isSubscribed:!1})),!0):!1}catch(S){return oe.error("Failed to unsubscribe from push:",S),!1}},[]);return{...i,requestPermission:d,showNotification:u,subscribe:p,unsubscribe:x}}function yy(i){const o="=".repeat((4-i.length%4)%4),d=(i+o).replace(/-/g,"+").replace(/_/g,"/"),u=window.atob(d),p=new Uint8Array(u.length);for(let x=0;x<u.length;++x)p[x]=u.charCodeAt(x);return p}function vy(i,o){return{...{expense_added:{title:"  ",body:`${o.userName} "${o.description}"  `,tag:"expense-added"},expense_updated:{title:" ",body:`"${o.description}"  `,tag:"expense-updated"},expense_deleted:{title:" ",body:`"${o.description}"  `,tag:"expense-deleted"},settlement_completed:{title:" ",body:`${o.fromName} ${o.toName} ${o.amount.toLocaleString()}  `,tag:"settlement-completed"},member_joined:{title:"  ",body:`${o.userName}  `,tag:"member-joined"},comment_added:{title:" ",body:`${o.userName}  : "${o.content}"`,tag:"comment-added"}}[i],data:{type:i,...o}}}const by={expense_added:{icon:"",label:"  "},expense_updated:{icon:"",label:" "},expense_deleted:{icon:"",label:" "},settlement_completed:{icon:"",label:" "},member_joined:{icon:"",label:"  "},comment_added:{icon:"",label:" "}};function jy(){const{isSupported:i,permission:o,requestPermission:d,showNotification:u}=xy(),[p,x]=m.useState(()=>{const v=localStorage.getItem("notification_preferences");if(v)try{return JSON.parse(v)}catch{}return{expense_added:!0,expense_updated:!0,expense_deleted:!0,settlement_completed:!0,member_joined:!0,comment_added:!0}}),[S,h]=m.useState(!1),N=async()=>{h(!0);try{await d()}finally{h(!1)}},C=v=>{const T={...p,[v]:!p[v]};x(T),localStorage.setItem("notification_preferences",JSON.stringify(T))},w=async()=>{const v=vy("expense_added",{userName:" ",description:" "});await u(v)};if(!i)return l.jsx("div",{className:"notification-settings",children:l.jsxs("div",{className:"notification-not-supported",children:[l.jsx("div",{className:"icon",children:""}),l.jsx("h3",{children:" "}),l.jsx("p",{children:"      ."})]})});const b=(()=>{switch(o){case"granted":return{icon:"",iconClass:"enabled",title:" ",subtitle:"    "};case"denied":return{icon:"",iconClass:"disabled",title:" ",subtitle:"   "};default:return{icon:"",iconClass:"pending",title:"  ",subtitle:"   "}}})();return l.jsxs("div",{className:"notification-settings",children:[l.jsx("h3",{children:"  "}),l.jsx("p",{children:"     "}),l.jsxs("div",{className:"notification-status",children:[l.jsx("div",{className:`status-icon ${b.iconClass}`,children:b.icon}),l.jsxs("div",{className:"status-text",children:[l.jsx("strong",{children:b.title}),l.jsx("span",{children:b.subtitle})]})]}),o==="default"&&l.jsx("button",{className:"notification-permission-btn enable",onClick:N,disabled:S,children:S?" ...":"  "}),o==="granted"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"notification-types",children:[l.jsx("h4",{children:" "}),l.jsx("div",{className:"notification-type-list",children:Object.entries(by).map(([v,{icon:T,label:g}])=>l.jsxs("div",{className:"notification-type-item",children:[l.jsxs("label",{children:[l.jsx("span",{children:T}),l.jsx("span",{children:g})]}),l.jsxs("label",{className:"toggle-switch",children:[l.jsx("input",{type:"checkbox",checked:p[v],onChange:()=>C(v)}),l.jsx("span",{className:"toggle-slider"})]})]},v))})]}),l.jsx("button",{className:"test-notification-btn",onClick:w,children:"   "})]}),o==="denied"&&l.jsx("div",{className:"notification-status",style:{background:"rgba(239, 68, 68, 0.1)"},children:l.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)"},children:"  .         ."})})]})}function Ny(){const[i,o]=m.useState({isInstallable:!1,isInstalled:!1,isOnline:navigator.onLine,updateAvailable:!1}),[d,u]=m.useState(null);return m.useEffect(()=>{const S=j=>{j.preventDefault(),u(j),o(b=>({...b,isInstallable:!0}))},h=()=>{u(null),o(j=>({...j,isInstallable:!1,isInstalled:!0}))},N=()=>o(j=>({...j,isOnline:!0})),C=()=>o(j=>({...j,isOnline:!1}));return(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0)&&o(j=>({...j,isInstalled:!0})),window.addEventListener("beforeinstallprompt",S),window.addEventListener("appinstalled",h),window.addEventListener("online",N),window.addEventListener("offline",C),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(j=>{j.addEventListener("updatefound",()=>{const b=j.installing;b&&b.addEventListener("statechange",()=>{b.state==="installed"&&navigator.serviceWorker.controller&&o(v=>({...v,updateAvailable:!0}))})})}),()=>{window.removeEventListener("beforeinstallprompt",S),window.removeEventListener("appinstalled",h),window.removeEventListener("online",N),window.removeEventListener("offline",C)}},[]),{...i,promptInstall:async()=>{if(!d)return!1;try{await d.prompt();const{outcome:S}=await d.userChoice;return S==="accepted"?(o(h=>({...h,isInstallable:!1,isInstalled:!0})),u(null),!0):!1}catch(S){return oe.error("Install prompt failed:",S),!1}},updateApp:()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(S=>{S.waiting&&(S.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())})}}}function Sy(){const{isInstallable:i,isInstalled:o,promptInstall:d}=Ny();return o?l.jsxs("div",{className:"install-status installed",children:[l.jsx("span",{className:"icon",children:""}),l.jsx("span",{children:"  "})]}):i?l.jsxs("button",{className:"btn btn-install-full",onClick:d,children:[l.jsx("span",{className:"icon",children:""}),l.jsx("span",{children:" "})]}):l.jsxs("div",{className:"install-status unavailable",children:[l.jsx("span",{className:"icon",children:""}),l.jsx("span",{children:"      "})]})}function sh({onClose:i,deadline:o,onUpdateDeadline:d}){const[u,p]=m.useState("general"),{theme:x,setTheme:S}=Ff(),{isDemoMode:h,disableDemoMode:N}=kc(),{locale:C,setLocale:w}=sx();return l.jsx("div",{className:"settings-overlay",onClick:i,children:l.jsxs("div",{className:"settings-panel",onClick:j=>j.stopPropagation(),children:[l.jsxs("header",{className:"settings-header",children:[l.jsx("h2",{children:" "}),l.jsx("button",{className:"btn-close",onClick:i,children:""})]}),l.jsxs("nav",{className:"settings-nav",children:[l.jsx("button",{className:`settings-nav-btn ${u==="general"?"active":""}`,onClick:()=>p("general"),children:" "}),l.jsx("button",{className:`settings-nav-btn ${u==="notifications"?"active":""}`,onClick:()=>p("notifications"),children:" "}),l.jsx("button",{className:`settings-nav-btn ${u==="about"?"active":""}`,onClick:()=>p("about"),children:" "})]}),l.jsxs("div",{className:"settings-content",children:[u==="general"&&l.jsxs("div",{className:"settings-section",children:[l.jsx("h3",{children:" "}),l.jsx("div",{className:"language-options",children:Object.entries(cx).map(([j,b])=>l.jsxs("button",{className:`language-option ${C===j?"active":""}`,onClick:()=>w(j),children:[l.jsxs("span",{className:"lang-flag",children:[j==="ko"&&"",j==="en"&&"",j==="ja"&&"",j==="zh"&&""]}),l.jsx("span",{children:b})]},j))}),l.jsx("h3",{children:" "}),l.jsxs("div",{className:"theme-options",children:[l.jsx("button",{className:`theme-option ${x==="light"?"active":""}`,onClick:()=>S("light"),children:" "}),l.jsx("button",{className:`theme-option ${x==="dark"?"active":""}`,onClick:()=>S("dark"),children:" "}),l.jsx("button",{className:`theme-option ${x==="system"?"active":""}`,onClick:()=>S("system"),children:" "})]}),l.jsx("h3",{children:"  "}),l.jsx(Sy,{}),h&&l.jsxs(l.Fragment,{children:[l.jsx("h3",{children:"  "}),l.jsxs("div",{className:"demo-mode-info",children:[l.jsx("p",{children:"    .    ."}),l.jsx("button",{className:"btn btn-danger",onClick:N,children:"    "})]})]}),d&&l.jsxs("div",{className:"settings-section",children:[l.jsx("h3",{children:"   "}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:""}),l.jsx("input",{type:"date",className:"input-field",value:o?.date||"",onChange:j=>{const b=j.target.value;d({date:b,reminderDays:o?.reminderDays||[7,3,1],notified:o?.notified||[]})}}),l.jsxs("p",{className:"description-text",children:[" ",o?.reminderDays?.join(", "),"   ."]})]})]})]}),u==="notifications"&&l.jsx(jy,{}),u==="about"&&l.jsxs("div",{className:"settings-section about-section",children:[l.jsx("div",{className:"about-logo",children:""}),l.jsx("h3",{children:" "}),l.jsx("p",{className:"version",children:" 2.0.0"}),l.jsxs("div",{className:"about-features",children:[l.jsx("h4",{children:" "}),l.jsxs("ul",{children:[l.jsx("li",{children:"   "}),l.jsx("li",{children:"   "}),l.jsx("li",{children:"   "}),l.jsx("li",{children:" QR "}),l.jsx("li",{children:"  "}),l.jsx("li",{children:"  "})]})]}),l.jsxs("div",{className:"about-links",children:[l.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",children:" GitHub"}),l.jsx("a",{href:"mailto:support@example.com",children:" "})]}),l.jsx("p",{className:"copyright",children:" 2024-2026  "})]})]})]})})}function ch({startDate:i,endDate:o,tripName:d}){const u=m.useMemo(()=>{if(!i&&!o)return null;const p=new Date;p.setHours(0,0,0,0);const x=i?new Date(i):null,S=o?new Date(o):null;if(x&&x.setHours(0,0,0,0),S&&S.setHours(0,0,0,0),x&&p<x){const h=x.getTime()-p.getTime();return{status:"before",label:`D-${Math.ceil(h/(1e3*60*60*24))}`,detail:"",color:"#667eea"}}if(x&&S&&p>=x&&p<=S){const h=p.getTime()-x.getTime(),N=Math.floor(h/(1e3*60*60*24))+1,C=Math.floor((S.getTime()-x.getTime())/(1e3*60*60*24))+1;return{status:"during",label:`DAY ${N}`,detail:`${C} `,color:"#43e97b"}}if(S&&p>S){const h=p.getTime()-S.getTime(),N=Math.floor(h/(1e3*60*60*24));return{status:"after",label:"",detail:N===0?"":`${N} `,color:"#fa709a"}}if(x&&!S){if(p.getTime()===x.getTime())return{status:"during",label:"DAY 1",detail:" ",color:"#43e97b"};if(p>x){const h=p.getTime()-x.getTime();return{status:"during",label:`DAY ${Math.floor(h/(1e3*60*60*24))+1}`,detail:" ",color:"#43e97b"}}}return null},[i,o]);return u?l.jsxs("div",{className:`trip-countdown ${u.status}`,style:{"--countdown-color":u.color},children:[l.jsx("div",{className:"countdown-main",children:l.jsx("span",{className:"countdown-label",children:u.label})}),l.jsx("span",{className:"countdown-detail",children:u.detail})]}):null}function ih({tripId:i,deadline:o,settlements:d,persons:u,onUpdateDeadline:p}){const[x,S]=m.useState([]),[h,N]=m.useState(null),[C,w]=m.useState(!1),j=d.filter(y=>!y.completed&&y.amount>0).map(y=>({from:u.find(A=>A.id===y.from)?.name||y.from,to:u.find(A=>A.id===y.to)?.name||y.to,amount:y.amount}));m.useEffect(()=>{if(!o?.date){N(null),w(!1);return}const y=()=>{const R=new Date;R.setHours(0,0,0,0);const E=new Date(o.date);E.setHours(0,0,0,0);const _=E.getTime()-R.getTime(),G=Math.ceil(_/(1e3*60*60*24));N(G),w(G<0)};y();const A=setInterval(y,3600*1e3);return()=>clearInterval(A)},[o?.date]),m.useEffect(()=>{if(!o||h===null)return;(async()=>{const A=new Date().toISOString().split("T")[0];if(o.notified?.includes(A))return;if((o.reminderDays?.includes(h)||C&&h%3===0)&&j.length>0){const E=C?`  ${Math.abs(h)} ! ${j.length}  .`:h===0?`  ! ${j.length}  .`:`  D-${h}! ${j.length}  .`;"Notification"in window&&Notification.permission==="granted"&&new Notification("  ",{body:E,icon:"/icon-192.png",tag:`settlement-deadline-${i}`});const _={id:`notif-${Date.now()}`,type:C?"overdue":"reminder",daysUntil:h,message:E,timestamp:new Date().toISOString()};S(G=>[_,...G].slice(0,10)),p&&p({...o,notified:[...o.notified||[],A]})}})()},[h,o,C,j.length,i,p]);const b=m.useCallback((y,A=[7,3,1])=>{p&&p({date:y,reminderDays:A,notified:[]})},[p]),v=m.useCallback(()=>{p&&p({date:"",reminderDays:[],notified:[]})},[p]),T=m.useCallback(async()=>"Notification"in window?Notification.permission==="granted"?!0:Notification.permission==="denied"?(oe.warn("  ."),!1):await Notification.requestPermission()==="granted":(oe.warn("    ."),!1),[]),g=m.useCallback(()=>h===null?null:C?` ${Math.abs(h)} `:h===0?" ":h===1?" ":`D-${h}`,[h,C]);return{daysUntilDeadline:h,isOverdue:C,notifications:x,unsettledParticipants:j,deadlineText:g(),setDeadline:b,clearDeadline:v,requestNotificationPermission:T}}const Cy="TravelExpenseDB",Ey=1,Ja="syncQueue",un="offlineData";function Dy(){const[i,o]=m.useState({isOnline:navigator.onLine,isSyncing:!1,pendingCount:0,lastSyncTime:localStorage.getItem("lastSyncTime"),error:null,syncProgress:null,conflicts:[]}),[d,u]=m.useState(null);m.useEffect(()=>{const j=indexedDB.open(Cy,Ey);j.onerror=()=>{oe.error("IndexedDB  :",j.error),o(b=>({...b,error:`IndexedDB  : ${j.error?.message||"   "}`}))},j.onsuccess=()=>{u(j.result)},j.onupgradeneeded=b=>{const v=b.target.result;v.objectStoreNames.contains(Ja)||v.createObjectStore(Ja,{keyPath:"id"}),v.objectStoreNames.contains(un)||v.createObjectStore(un,{keyPath:"key"}).createIndex("type","type",{unique:!1})}},[]),m.useEffect(()=>()=>{d&&d.close()},[d]),m.useEffect(()=>{const j=()=>{o(v=>({...v,isOnline:!0})),C()},b=()=>{o(v=>({...v,isOnline:!1}))};return window.addEventListener("online",j),window.addEventListener("offline",b),()=>{window.removeEventListener("online",j),window.removeEventListener("offline",b)}},[d]);const p=m.useCallback(async j=>{if(!d)return;const b={...j,id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};return new Promise((v,T)=>{const A=d.transaction([Ja],"readwrite").objectStore(Ja).add(b);A.onsuccess=()=>{o(R=>({...R,pendingCount:R.pendingCount+1})),v()},A.onerror=()=>{oe.error("   :",A.error),T(new Error(`   : ${A.error?.message||"   "}`))}})},[d]),x=m.useCallback(async(j,b,v)=>{if(d)return new Promise((T,g)=>{const R=d.transaction([un],"readwrite").objectStore(un).put({key:j,type:b,data:v,updatedAt:Date.now()});R.onsuccess=()=>T(),R.onerror=()=>{oe.error("   :",R.error),g(new Error(`   : ${R.error?.message||"   "}`))}})},[d]),S=m.useCallback(async j=>d?new Promise((b,v)=>{const y=d.transaction([un],"readonly").objectStore(un).get(j);y.onsuccess=()=>{b(y.result?.data||null)},y.onerror=()=>{oe.error("   :",y.error),v(new Error(`   : ${y.error?.message||"   "}`))}}):null,[d]),h=m.useCallback(async()=>d?new Promise((j,b)=>{const g=d.transaction([Ja],"readonly").objectStore(Ja).getAll();g.onsuccess=()=>j(g.result||[]),g.onerror=()=>b(g.error)}):[],[d]),N=m.useCallback(async j=>{if(d)return new Promise((b,v)=>{const y=d.transaction([Ja],"readwrite").objectStore(Ja).delete(j);y.onsuccess=()=>{o(A=>({...A,pendingCount:Math.max(0,A.pendingCount-1)})),b()},y.onerror=()=>v(y.error)})},[d]),C=m.useCallback(async j=>{if(!(!d||!i.isOnline||i.isSyncing)){o(b=>({...b,isSyncing:!0,error:null}));try{const b=await h();for(const T of b.sort((g,y)=>g.timestamp-y.timestamp))try{j?await j(T)&&await N(T.id):await N(T.id)}catch(g){oe.error(" :",T,g)}const v=new Date().toISOString();localStorage.setItem("lastSyncTime",v),o(T=>({...T,isSyncing:!1,lastSyncTime:v,pendingCount:0}))}catch(b){o(v=>({...v,isSyncing:!1,error:b instanceof Error?b.message:" "}))}}},[d,i.isOnline,i.isSyncing,h,N]);m.useEffect(()=>{d&&h().then(j=>{o(b=>({...b,pendingCount:j.length}))})},[d,h]);const w=m.useCallback((j,b)=>{o(v=>({...v,conflicts:v.conflicts.map(T=>T.id===j?{...T,resolved:!0,resolution:b}:T).filter(T=>!T.resolved)})),oe.info("Conflict resolved",{conflictId:j,resolution:b})},[]);return{state:i,addToSyncQueue:p,saveOfflineData:x,getOfflineData:S,getPendingItems:h,syncPendingItems:C,resolveConflict:w,isReady:!!d}}function Ty({conflicts:i,onResolve:o,onResolveAll:d,onClose:u}){if(i.length===0)return null;const p=h=>new Date(h).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),x=h=>{switch(h){case"expense":return"";case"person":return"";case"settlement":return"";default:return h}},S=h=>{switch(h){case"add":return"";case"update":return"";case"delete":return"";default:return h}};return l.jsx("div",{className:"sync-conflict-overlay",onClick:u,children:l.jsxs("div",{className:"sync-conflict-modal",onClick:h=>h.stopPropagation(),children:[l.jsxs("div",{className:"sync-conflict-header",children:[l.jsx("h2",{children:"   "}),l.jsxs("p",{className:"sync-conflict-subtitle",children:["      .",l.jsx("br",{}),"     ."]})]}),l.jsx("div",{className:"sync-conflict-list",children:i.map(h=>l.jsxs("div",{className:`sync-conflict-item ${h.resolved?"resolved":""}`,children:[l.jsxs("div",{className:"conflict-info",children:[l.jsxs("span",{className:"conflict-type",children:[x(h.localItem.type)," - ",S(h.localItem.action)]}),l.jsxs("span",{className:"conflict-time",children:[": ",p(h.localItem.timestamp)]})]}),l.jsxs("div",{className:"conflict-comparison",children:[l.jsxs("div",{className:"conflict-local",children:[l.jsx("h4",{children:"   ()"}),l.jsx("pre",{children:JSON.stringify(h.localItem.data,null,2)})]}),l.jsx("div",{className:"conflict-divider",children:"VS"}),l.jsxs("div",{className:"conflict-remote",children:[l.jsx("h4",{children:" "}),l.jsx("pre",{children:JSON.stringify(h.remoteData,null,2)})]})]}),!h.resolved&&l.jsxs("div",{className:"conflict-actions",children:[l.jsx("button",{className:"btn btn-local",onClick:()=>o(h.id,"local"),children:"  "}),l.jsx("button",{className:"btn btn-remote",onClick:()=>o(h.id,"remote"),children:"  "})]}),h.resolved&&l.jsxs("div",{className:"conflict-resolved-badge",children:[" ",h.resolution==="local"?"":"","  "]})]},h.id))}),l.jsxs("div",{className:"sync-conflict-footer",children:[l.jsxs("div",{className:"bulk-actions",children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>d("local"),children:"  "}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>d("remote"),children:"  "})]}),l.jsx("button",{className:"btn btn-primary",onClick:u,children:""})]})]})})}const rh=[{id:"participants",label:"",icon:""},{id:"expenses",label:"",icon:""},{id:"settlement",label:"",icon:""},{id:"dashboard",label:"",icon:""}];function My(){const{currentTrip:i,setCurrentTrip:o}=mu(),[d,u]=m.useState("participants"),[p,x]=m.useState(!1),[S,h]=m.useState(!1),[N,C]=m.useState(!1),{disableDemoMode:w}=kc(),j=mu(),b=j.calculateSettlements(),{deadlineText:v}=ih({tripId:i?.id||"",deadline:i?.settlementDeadline,settlements:b,persons:j.persons,onUpdateDeadline:j.updateDeadline});if(!i)return l.jsx(wx,{onSelectTrip:o});const T=()=>{o(null)};return l.jsxs("div",{className:"app",children:[l.jsx("header",{className:"app-header",children:l.jsxs("div",{className:"header-content",children:[l.jsx("button",{className:"btn-back",onClick:T,children:" "}),l.jsxs("div",{className:"header-title",children:[l.jsx("h1",{children:i?.name}),l.jsxs("div",{className:"header-badges",children:[l.jsx(ch,{startDate:i?.startDate,endDate:i?.endDate}),v&&l.jsx("span",{className:"deadline-badge",children:v}),l.jsx("div",{className:"demo-badge",children:" "})]})]}),l.jsxs("div",{className:"header-actions",children:[l.jsx(Lc,{}),l.jsx("button",{className:"btn-header",onClick:()=>h(!0),title:" ","data-tooltip":" ",children:""}),l.jsx("button",{className:"btn-header",onClick:()=>x(!0),title:" ","data-tooltip":" ",children:""}),l.jsx("button",{className:"btn-header",onClick:()=>C(!0),title:"","data-tooltip":"",children:""}),l.jsx("button",{className:"btn-header btn-exit-demo",onClick:w,title:" ","data-tooltip":" ",children:""})]})]})}),l.jsx("nav",{className:"tab-nav",children:rh.map(g=>l.jsxs("button",{className:`tab-btn ${d===g.id?"active":""}`,onClick:()=>u(g.id),children:[l.jsx("span",{className:"tab-icon",children:g.icon}),l.jsx("span",{className:"tab-label",children:g.label}),g.id==="settlement"&&b.length>0&&l.jsx("span",{className:"tab-badge",children:b.length})]},g.id))}),l.jsx("main",{className:"app-main",children:l.jsxs("div",{className:"tab-content",children:[d==="participants"&&l.jsx(If,{persons:j.persons,expenses:j.expenses,onAddPerson:j.addPerson,onRemovePerson:j.removePerson,onUpdatePerson:j.updatePerson}),d==="expenses"&&l.jsx(Pf,{persons:j.persons,expenses:j.expenses,currencies:j.currencies,onAddExpense:j.addExpense,onRemoveExpense:j.removeExpense,onUpdateExpense:j.updateExpense,onUploadReceipt:j.uploadReceipt,convertToKRW:j.convertToKRW,getExpensesByCategory:j.getExpensesByCategory,getExpensesByDate:j.getExpensesByDate,getExpensesByPerson:j.getExpensesByPerson}),d==="settlement"&&l.jsx(eh,{persons:j.persons,settlements:b,expenses:j.expenses,currencies:j.currencies,getTotalByPerson:j.getTotalByPerson,convertToKRW:j.convertToKRW,onMarkComplete:j.markSettlementComplete,onMarkIncomplete:j.markSettlementIncomplete,onPartialPay:j.partialPay}),d==="dashboard"&&l.jsx(th,{expenses:j.expenses,persons:j.persons,currencies:j.currencies,convertToKRW:j.convertToKRW,totalBudget:i?.totalBudget})]})}),p&&l.jsx(ah,{currencies:j.currencies,onUpdateRate:j.updateCurrencyRate,onClose:()=>x(!1)}),S&&l.jsx(nh,{onClose:()=>h(!1)}),N&&l.jsx(sh,{onClose:()=>C(!1),deadline:i?.settlementDeadline,onUpdateDeadline:j.updateDeadline})]})}function Ay(){const{currentTrip:i,setCurrentTrip:o}=Uc(),[d,u]=m.useState("participants"),[p,x]=m.useState(!1),[S,h]=m.useState(!1),[N,C]=m.useState(!1),w=ix(),j=w.calculateSettlements(),{state:b,resolveConflict:v}=Dy(),{showToast:T}=uy(),{deadlineText:g}=ih({tripId:i?.id||"",deadline:i?.settlementDeadline,settlements:j,persons:w.persons,onUpdateDeadline:w.updateDeadline}),y=()=>{o(null)},A=()=>{i?.inviteCode&&(navigator.clipboard.writeText(i.inviteCode),T({type:"success",title:"  ",message:i.inviteCode}))};return w.loading?l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"  ..."})]}):l.jsxs("div",{className:"app",children:[l.jsx("header",{className:"app-header",children:l.jsxs("div",{className:"header-content",children:[l.jsx("button",{className:"btn-back",onClick:y,children:" "}),l.jsxs("div",{className:"header-title",children:[l.jsx("h1",{children:i?.name}),l.jsxs("div",{className:"header-badges",children:[l.jsx(ch,{startDate:i?.startDate,endDate:i?.endDate}),g&&l.jsx("span",{className:"deadline-badge",children:g}),l.jsxs("button",{className:"invite-code-btn",onClick:A,children:[" ",i?.inviteCode]})]})]}),l.jsxs("div",{className:"header-actions",children:[l.jsx(Lc,{}),l.jsx("button",{className:"btn-header",onClick:()=>h(!0),title:" ","data-tooltip":" ",children:""}),l.jsx("button",{className:"btn-header",onClick:()=>x(!0),title:" ","data-tooltip":" ",children:""}),l.jsx("button",{className:"btn-header",onClick:()=>C(!0),title:"","data-tooltip":"",children:""})]})]})}),l.jsx("nav",{className:"tab-nav",children:rh.map(R=>l.jsxs("button",{className:`tab-btn ${d===R.id?"active":""}`,onClick:()=>u(R.id),children:[l.jsx("span",{className:"tab-icon",children:R.icon}),l.jsx("span",{className:"tab-label",children:R.label}),R.id==="settlement"&&j.length>0&&l.jsx("span",{className:"tab-badge",children:j.length})]},R.id))}),l.jsx("main",{className:"app-main",children:l.jsxs("div",{className:"tab-content",children:[d==="participants"&&l.jsx(If,{persons:w.persons,expenses:w.expenses,onAddPerson:w.addPerson,onRemovePerson:w.removePerson,onUpdatePerson:w.updatePerson}),d==="expenses"&&l.jsx(Pf,{persons:w.persons,expenses:w.expenses,currencies:w.currencies,onAddExpense:w.addExpense,onRemoveExpense:w.removeExpense,onUpdateExpense:w.updateExpense,onUploadReceipt:w.uploadReceipt,convertToKRW:w.convertToKRW,getExpensesByCategory:w.getExpensesByCategory,getExpensesByDate:w.getExpensesByDate,getExpensesByPerson:w.getExpensesByPerson}),d==="settlement"&&l.jsx(eh,{persons:w.persons,settlements:j,expenses:w.expenses,currencies:w.currencies,getTotalByPerson:w.getTotalByPerson,convertToKRW:w.convertToKRW,onMarkComplete:w.markSettlementComplete,onMarkIncomplete:w.markSettlementIncomplete,onPartialPay:w.partialPay}),d==="dashboard"&&l.jsx(th,{expenses:w.expenses,persons:w.persons,currencies:w.currencies,convertToKRW:w.convertToKRW,totalBudget:i?.totalBudget})]})}),p&&l.jsx(ah,{currencies:w.currencies,onUpdateRate:w.updateCurrencyRate,onClose:()=>x(!1)}),S&&l.jsx(nh,{onClose:()=>h(!1)}),N&&l.jsx(sh,{onClose:()=>C(!1),deadline:i?.settlementDeadline,onUpdateDeadline:w.updateDeadline}),b.conflicts.length>0&&l.jsx(Ty,{conflicts:b.conflicts,onResolve:v,onClose:()=>{}})]})}function wy(){const{user:i,loading:o}=ss(),{currentTrip:d}=Uc();return o?l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:" ..."})]}):i?d?l.jsx(Ay,{}):l.jsx(Mx,{}):l.jsx(Dx,{})}function Oy(){return l.jsx(My,{})}function zy(){const{isDemoMode:i,enableDemoMode:o}=kc();return i?l.jsx(Oy,{}):Na?l.jsx(Pg,{children:l.jsx(ax,{children:l.jsx(wy,{})})}):l.jsx(cy,{onEnableDemoMode:o})}function _y(){return m.useEffect(()=>{ry()},[]),l.jsx(iy,{children:l.jsx(lx,{children:l.jsx(nx,{children:l.jsx(oy,{children:l.jsx(Ig,{children:l.jsx(zy,{})})})})})})}$g.createRoot(document.getElementById("root")).render(l.jsx(m.StrictMode,{children:l.jsx(_y,{})}));
